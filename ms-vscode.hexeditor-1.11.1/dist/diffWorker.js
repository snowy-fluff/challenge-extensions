"use strict";var b=class{constructor(e,t){this.messageHandler=e;this.postMessage=t;this.messageIdCounter=0;this.pendingMessages=new Map}sendEvent(e,t){this.postMessage({body:e,messageId:this.messageIdCounter++},t)}sendRequest(e,t){let s=this.messageIdCounter++;return this.postMessage({body:e,messageId:s},t),new Promise((i,r)=>{this.pendingMessages.set(s,{resolve:i,reject:r})})}sendReply(e,t){this.postMessage({body:t,messageId:this.messageIdCounter++,inReplyTo:e.messageId})}handleMessage(e){e.inReplyTo!==void 0?(this.pendingMessages.get(e.inReplyTo)?.resolve(e.body),this.pendingMessages.delete(e.inReplyTo)):Promise.resolve(this.messageHandler(e.body)).then(t=>t&&this.sendReply(e,t))}};function g(){}g.prototype={diff:function(e,t){var s,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=i.callback;typeof i=="function"&&(r=i,i={}),this.options=i;var o=this;function a(d){return r?(setTimeout(function(){r(void 0,d)},0),!0):d}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));var f=t.length,u=e.length,p=1,l=f+u;i.maxEditLength&&(l=Math.min(l,i.maxEditLength));var y=(s=i.timeout)!==null&&s!==void 0?s:1/0,L=Date.now()+y,c=[{oldPos:-1,lastComponent:void 0}],m=this.extractCommon(c[0],t,e,0);if(c[0].oldPos+1>=u&&m+1>=f)return a([{value:this.join(t),count:t.length}]);var w=-1/0,h=1/0;function I(){for(var d=Math.max(w,-p);d<=Math.min(h,p);d+=2){var v=void 0,x=c[d-1],S=c[d+1];x&&(c[d-1]=void 0);var H=!1;if(S){var A=S.oldPos-d;H=S&&0<=A&&A<f}var N=x&&x.oldPos+1<u;if(!H&&!N){c[d]=void 0;continue}if(!N||H&&x.oldPos+1<S.oldPos?v=o.addToPath(S,!0,void 0,0):v=o.addToPath(x,void 0,!0,1),m=o.extractCommon(v,t,e,d),v.oldPos+1>=u&&m+1>=f)return a(U(o,v.lastComponent,t,e,o.useLongestToken));c[d]=v,v.oldPos+1>=u&&(h=Math.min(h,d-1)),m+1>=f&&(w=Math.max(w,d+1))}p++}if(r)(function d(){setTimeout(function(){if(p>l||Date.now()>L)return r();I()||d()},0)})();else for(;p<=l&&Date.now()<=L;){var T=I();if(T)return T}},addToPath:function(e,t,s,i){var r=e.lastComponent;return r&&r.added===t&&r.removed===s?{oldPos:e.oldPos+i,lastComponent:{count:r.count+1,added:t,removed:s,previousComponent:r.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:t,removed:s,previousComponent:r}}},extractCommon:function(e,t,s,i){for(var r=t.length,o=s.length,a=e.oldPos,f=a-i,u=0;f+1<r&&a+1<o&&this.equals(t[f+1],s[a+1]);)f++,a++,u++;return u&&(e.lastComponent={count:u,previousComponent:e.lastComponent}),e.oldPos=a,f},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],s=0;s<e.length;s++)e[s]&&t.push(e[s]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function U(n,e,t,s,i){for(var r=[],o;e;)r.push(e),o=e.previousComponent,delete e.previousComponent,e=o;r.reverse();for(var a=0,f=r.length,u=0,p=0;a<f;a++){var l=r[a];if(l.removed){if(l.value=n.join(s.slice(p,p+l.count)),p+=l.count,a&&r[a-1].added){var L=r[a-1];r[a-1]=r[a],r[a]=L}}else{if(!l.added&&i){var y=t.slice(u,u+l.count);y=y.map(function(m,w){var h=s[p+w];return h.length>m.length?h:m}),l.value=n.join(y)}else l.value=n.join(t.slice(u,u+l.count));u+=l.count,l.added||(p+=l.count)}}var c=r[f-1];return f>1&&typeof c.value=="string"&&(c.added||c.removed)&&n.equals("",c.value)&&(r[f-2].value+=c.value,r.pop()),r}var V=new g;var W=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,C=/\S/,q=new g;q.equals=function(n,e){return this.options.ignoreCase&&(n=n.toLowerCase(),e=e.toLowerCase()),n===e||this.options.ignoreWhitespace&&!C.test(n)&&!C.test(e)};q.tokenize=function(n){for(var e=n.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),t=0;t<e.length-1;t++)!e[t+1]&&e[t+2]&&W.test(e[t])&&W.test(e[t+2])&&(e[t]+=e[t+2],e.splice(t+1,2),t--);return e};var z=new g;z.tokenize=function(n){this.options.stripTrailingCr&&(n=n.replace(/\r\n/g,`
`));var e=[],t=n.split(/(\n|\r\n)/);t[t.length-1]||t.pop();for(var s=0;s<t.length;s++){var i=t[s];s%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};var J=new g;J.tokenize=function(n){return n.split(/(\S.+?[.!?])(?=\s+|$)/)};var $=new g;$.tokenize=function(n){return n.split(/([{}:;,]|\s+)/)};function D(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?D=function(e){return typeof e}:D=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(n)}var G=Object.prototype.toString,R=new g;R.useLongestToken=!0;R.tokenize=z.tokenize;R.castInput=function(n){var e=this.options,t=e.undefinedReplacement,s=e.stringifyReplacer,i=s===void 0?function(r,o){return typeof o>"u"?t:o}:s;return typeof n=="string"?n:JSON.stringify(O(n,null,null,i),i,"  ")};R.equals=function(n,e){return g.prototype.equals.call(R,n.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function O(n,e,t,s,i){e=e||[],t=t||[],s&&(n=s(i,n));var r;for(r=0;r<e.length;r+=1)if(e[r]===n)return t[r];var o;if(G.call(n)==="[object Array]"){for(e.push(n),o=new Array(n.length),t.push(o),r=0;r<n.length;r+=1)o[r]=O(n[r],e,t,s,i);return e.pop(),t.pop(),o}if(n&&n.toJSON&&(n=n.toJSON()),D(n)==="object"&&n!==null){e.push(n),o={},t.push(o);var a=[],f;for(f in n)n.hasOwnProperty(f)&&a.push(f);for(a.sort(),r=0;r<a.length;r+=1)f=a[r],o[f]=O(n[f],e,t,s,f);e.pop(),t.pop()}else o=n;return o}var F=new g;F.tokenize=function(n){return n.slice()};F.join=F.removeEmpty=function(n){return n};function B(n,e,t){return F.diff(n,e,t)}var E=class n{constructor(e,t=Number.MAX_SAFE_INTEGER,s){this.start=e;this.end=t;if(e<0)throw new Error("Cannot construct a range with a negative start");t<e?([this.start,this.end]=[t,e],s??=1):s??=0,this.direction=s}get size(){return this.end-this.start}static single(e){return new n(e,e+1)}static inclusive(e,t){return t>=e?new n(e,t+1):new n(e+1,t)}includes(e){return e>=this.start&&e<this.end}expandToContain(e){return e<this.start?new n(e,this.end,this.direction):e>=this.end?new n(this.start,e+1,this.direction):this}overlaps(e){return e.end>this.start&&e.start<this.end}difference(e){if(!this.overlaps(e))return[this,e];let t=[];return this.start!==e.start&&t.push(new n(e.start,this.start)),this.end!==e.end&&t.push(new n(e.end,this.end)),t}};var M=class{static lcs(e,t){return B(e,t)}static toDecorator(e){let t={original:[],modified:[]},s=0;for(let i of e){let r=new E(s,s+i.count);i.removed?(t.original.push({type:1,range:r}),t.modified.push({type:2,range:r})):i.added&&(t.original.push({type:2,range:r}),t.modified.push({type:0,range:r})),s+=i.count}return t}};function P(n){switch(n.type){case 0:let e=M.lcs(n.original,n.modified),t=M.toDecorator(e);return{type:1,original:t.original,modified:t.modified}}}try{let n=new b(async e=>P(e),e=>postMessage(e));onmessage=e=>n.handleMessage(e.data)}catch{let{parentPort:n}=require("worker_threads");if(n){let e=new b(async t=>P(t),t=>n.postMessage(t));n.on("message",t=>{e.handleMessage(t)})}}
