"use strict";var up=Object.create;var oo=Object.defineProperty;var lp=Object.getOwnPropertyDescriptor;var dp=Object.getOwnPropertyNames;var fp=Object.getPrototypeOf,pp=Object.prototype.hasOwnProperty;var qt=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),hp=(e,n)=>{for(var t in n)oo(e,t,{get:n[t],enumerable:!0})},Hu=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let s of dp(n))!pp.call(e,s)&&s!==t&&oo(e,s,{get:()=>n[s],enumerable:!(r=lp(n,s))||r.enumerable});return e};var ar=(e,n,t)=>(t=e!=null?up(fp(e)):{},Hu(n||!e||!e.__esModule?oo(t,"default",{value:e,enumerable:!0}):t,e)),vp=e=>Hu(oo({},"__esModule",{value:!0}),e);var $a=qt((ao,Uu)=>{"use strict";(function(e,n){typeof ao=="object"&&typeof Uu<"u"?n(ao):typeof define=="function"&&define.amd?define(["exports"],n):(e=typeof globalThis<"u"?globalThis:e||self,n((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{},e.Microsoft.ApplicationInsights.Shims={})))})(ao,function(e){"use strict";var n="function",t="object",r="undefined",s="prototype",a="hasOwnProperty",o="default",i=Object,c=i[s],l=i.assign,d=i.create,u=i.defineProperty,p=c[a],v=null;function m($){return $===void 0&&($=!0),(!v||!$)&&(typeof globalThis!==r&&globalThis&&(v=globalThis),typeof self!==r&&self&&(v=self),typeof window!==r&&window&&(v=window),typeof global!==r&&global&&(v=global)),v}function g($){throw new TypeError($)}function E($){var ee=d;if(ee)return ee($);if($==null)return{};var re=typeof $;re!==t&&re!==n&&g("Object prototype may only be an Object:"+$);function ve(){}return ve[s]=$,new ve}var T=(m()||{}).Symbol,O=(m()||{}).Reflect,P=!!O,A="decorate",M="metadata",j="getOwnPropertySymbols",G="iterator",q=function($){for(var ee,re=1,ve=arguments.length;re<ve;re++){ee=arguments[re];for(var Ve in ee)c[a].call(ee,Ve)&&($[Ve]=ee[Ve])}return $},Y=l||q,ne=function($,ee){return ne=i.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,ve){re.__proto__=ve}||function(re,ve){for(var Ve in ve)ve[a](Ve)&&(re[Ve]=ve[Ve])},ne($,ee)};function _e($,ee){typeof ee!==n&&ee!==null&&g("Class extends value "+String(ee)+" is not a constructor or null"),ne($,ee);function re(){this.constructor=$}$[s]=ee===null?E(ee):(re[s]=ee[s],new re)}function De($,ee){var re={};for(var ve in $)p.call($,ve)&&ee.indexOf(ve)<0&&(re[ve]=$[ve]);if($!=null&&typeof i[j]===n)for(var Ve=0,Ae=i[j]($);Ve<Ae.length;Ve++)ee.indexOf(Ae[Ve])<0&&c.propertyIsEnumerable.call($,Ae[Ve])&&(re[Ae[Ve]]=$[Ae[Ve]]);return re}function ct($,ee,re,ve){var Ve=arguments.length,Ae=Ve<3?ee:ve===null?ve=i.getOwnPropertyDescriptor(ee,re):ve,Ne;if(P&&typeof O[A]===n)Ae=O[A]($,ee,re,ve);else for(var Xe=$.length-1;Xe>=0;Xe--)(Ne=$[Xe])&&(Ae=(Ve<3?Ne(Ae):Ve>3?Ne(ee,re,Ae):Ne(ee,re))||Ae);return Ve>3&&Ae&&u(ee,re,Ae),Ae}function ot($,ee){return function(re,ve){ee(re,ve,$)}}function xt($,ee){if(P&&O[M]===n)return O[M]($,ee)}function at($,ee){for(var re in $)re!==o&&!p.call(ee,re)&&oe(ee,$,re)}function oe($,ee,re,ve){ve===void 0&&(ve=re),d?u($,ve,{enumerable:!0,get:function(){return ee[re]}}):$[ve]=ee[re]}function ge($){var ee=typeof T===n&&T[G],re=ee&&$[ee],ve=0;if(re)return re.call($);if($&&typeof $.length=="number")return{next:function(){return $&&ve>=$.length&&($=void 0),{value:$&&$[ve++],done:!$}}};g(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}function le($,ee){var re=typeof T===n&&$[T[G]];if(!re)return $;var ve=re.call($),Ve,Ae=[],Ne;try{for(;(ee===void 0||ee-- >0)&&!(Ve=ve.next()).done;)Ae.push(Ve.value)}catch(Xe){Ne={error:Xe}}finally{try{Ve&&!Ve.done&&(re=ve.return)&&re.call(ve)}finally{if(Ne)throw Ne.error}}return Ae}function Ue(){for(var $=arguments,ee=0,re=0,ve=$.length;re<ve;re++)ee+=$[re].length;for(var Ve=Array(ee),Ae=0,re=0;re<ve;re++)for(var Ne=$[re],Xe=0,Ot=Ne.length;Xe<Ot;Xe++,Ae++)Ve[Ae]=Ne[Xe];return Ve}function Q($,ee){for(var re=0,ve=ee.length,Ve=$.length;re<ve;re++,Ve++)$[Ve]=ee[re];return $}function Ee($,ee){return u?u($,"raw",{value:ee}):$.raw=ee,$}function se($){if($&&$.__esModule)return $;var ee={};if($!=null)for(var re in $)re!==o&&Object.prototype.hasOwnProperty.call($,re)&&oe(ee,$,re);return d?u(ee,o,{enumerable:!0,value:$}):ee[o]=$,ee}function We($){return $&&$.__esModule?$:{strDefault:$}}function rt(){var $=m()||{};(function(ee,re,ve,Ve){ee.__assign||(ee.__assign=l||re),ee.__extends||(ee.__extends=ve),ee.__createBinding||(ee.__createBinding=Ve)})($,Y,_e,oe),__assign||(__assign=$.__assign),__extends||(__extends=$.__extends),__createBinding||(__createBinding=$.__createBinding)}e.ObjAssign=l,e.ObjClass=i,e.ObjCreate=d,e.ObjDefineProperty=u,e.ObjHasOwnProperty=p,e.ObjProto=c,e.__assignFn=Y,e.__createBindingFn=oe,e.__decorateFn=ct,e.__exportStarFn=at,e.__exposeGlobalTsLib=rt,e.__extendsFn=_e,e.__importDefaultFn=We,e.__importStarFn=se,e.__makeTemplateObjectFn=Ee,e.__metadataFn=xt,e.__paramFn=ot,e.__readFn=le,e.__restFn=De,e.__spreadArrayFn=Q,e.__spreadArraysFn=Ue,e.__valuesFn=ge,e.getGlobal=m,e.objCreateFn=E,e.strDefault=o,e.strShimFunction=n,e.strShimHasOwnProperty=a,e.strShimObject=t,e.strShimPrototype=s,e.strShimUndefined=r,e.throwTypeError=g,function($,ee,re){var ve=Object.defineProperty;if(ve)try{return ve($,ee,re)}catch{}return re&&typeof re.value!==void 0&&($[ee]=re.value),$}(e,"__esModule",{value:!0})})});var Bu=qt((so,Fu)=>{"use strict";(function(e,n){typeof so=="object"&&typeof Fu<"u"?n(so):typeof define=="function"&&define.amd?define(["exports"],n):(e=typeof globalThis<"u"?globalThis:e||self,n((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{})))})(so,function(e){"use strict";var n=100,t="function",r="object",s="undefined",a="prototype",o="hasOwnProperty",i=Object,c=i[a],l=i.assign,d=i.create,u=i.defineProperty,p=c[o],v=null;function m(h){return h===void 0&&(h=!0),(!v||!h)&&(typeof globalThis!==s&&globalThis&&(v=globalThis),typeof self!==s&&self&&(v=self),typeof window!==s&&window&&(v=window),typeof global!==s&&global&&(v=global)),v}function g(h){throw new TypeError(h)}function E(h){var _=d;if(_)return _(h);if(h==null)return{};var b=typeof h;b!==r&&b!==t&&g("Object prototype may only be an Object:"+h);function w(){}return w[a]=h,new w}(m()||{}).Symbol,(m()||{}).Reflect;var T=function(h,_){return T=i.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,w){b.__proto__=w}||function(b,w){for(var I in w)w[o](I)&&(b[I]=w[I])},T(h,_)};function O(h,_){typeof _!==t&&_!==null&&g("Class extends value "+String(_)+" is not a constructor or null"),T(h,_);function b(){this.constructor=h}h[a]=_===null?E(_):(b[a]=_[a],new b)}function P(h,_){for(var b=0,w=_.length,I=h.length;b<w;b++,I++)h[I]=_[b];return h}var A="",M="processTelemetry",j="priority",G="setNextPlugin",q="isInitialized",Y="teardown",ne="core",_e="update",De="disabled",ct="_doTeardown",ot="processNext",xt="resume",at="pause",oe="NotificationListener",ge="add"+oe,le="remove"+oe,Ue="eventsSent",Q="eventsDiscarded",Ee="eventsSendRequest",se="perfEvent",We="toISOString",rt="endsWith",$="startsWith",ee="indexOf",re="map",ve="reduce",Ve="trim",Ae="toString",Ne="__proto__",Xe="constructor",Ot=u,Sr=i.freeze,mr=i.seal,ce=i.keys,Tr=String[a],nr=Tr[Ve],Wt=Tr[rt],Ft=Tr[$],sr=Date[a],ir=sr[We],wr=Array.isArray,ie=c[Ae],K=p[Ae],xe=K.call(i),Te=/-([a-z])/g,vt=/([^\w\d_$])/g,Ke=/^(\d+[\w\d_$])/,Fe=Object.getPrototypeOf;function $e(h){if(h){if(Fe)return Fe(h);var _=h[Ne]||h[a]||h[Xe];if(_)return _}return null}function Tt(h){return ie.call(h)}function wt(h,_){return typeof h===_}function Oe(h){return h===void 0||typeof h===s}function Ye(h){return!Oe(h)}function ae(h){return h===null||Oe(h)}function Ie(h){return!ae(h)}function Le(h,_){return!!(h&&p.call(h,_))}function he(h){return!!(h&&typeof h===r)}function ut(h){return!!(h&&typeof h===t)}function Bt(h){var _=h;return _&&pe(_)&&(_=_.replace(Te,function(b,w){return w.toUpperCase()}),_=_.replace(vt,"_"),_=_.replace(Ke,function(b,w){return"_"+w})),_}function Ze(h,_){if(h)for(var b in h)p.call(h,b)&&_.call(h,b,h[b])}function Kt(h,_){var b=!1;return h&&_&&!(b=h===_)&&(b=Wt?h[rt](_):gr(h,_)),b}function gr(h,_){var b=!1,w=_?_.length:0,I=h?h.length:0;if(w&&I&&I>=w&&!(b=h===_)){for(var N=I-1,U=w-1;U>=0;U--){if(h[N]!=_[U])return!1;N--}b=!0}return b}function Ir(h,_){var b=!1;return h&&_&&!(b=h===_)&&(b=Ft?h[$](_):Me(h,_)),b}function Me(h,_){var b=!1,w=_?_.length:0;if(h&&w&&h.length>=w&&!(b=h===_)){for(var I=0;I<w;I++)if(h[I]!==_[I])return!1;b=!0}return b}function je(h,_){return h&&_?h.indexOf(_)!==-1:!1}function Se(h){return!!(h&&ie.call(h)==="[object Date]")}var Z=wr||et;function et(h){return!!(h&&ie.call(h)==="[object Array]")}function ze(h){return!!(h&&ie.call(h)==="[object Error]")}function pe(h){return typeof h=="string"}function mt(h){return typeof h=="number"}function bt(h){return typeof h=="boolean"}function Ct(h){return typeof h=="symbol"}function Vt(h){var _=!1;if(h&&typeof h=="object"){var b=Fe?Fe(h):$e(h);b?(b[Xe]&&p.call(b,Xe)&&(b=b[Xe]),_=typeof b===t&&K.call(b)===xe):_=!0}return _}function $t(h){if(h)return ir?h[We]():Ht(h)}function Ht(h){if(h&&h.getUTCFullYear){var _=function(b){var w=String(b);return w.length===1&&(w="0"+w),w};return h.getUTCFullYear()+"-"+_(h.getUTCMonth()+1)+"-"+_(h.getUTCDate())+"T"+_(h.getUTCHours())+":"+_(h.getUTCMinutes())+":"+_(h.getUTCSeconds())+"."+String((h.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}function nt(h,_,b){var w=h.length;try{for(var I=0;I<w&&!(I in h&&_.call(b||h,h[I],I,h)===-1);I++);}catch{}}function Dt(h,_,b){if(h){if(h[ee])return h[ee](_,b);var w=h.length,I=b||0;try{for(var N=Math.max(I>=0?I:w-Math.abs(I),0);N<w;N++)if(N in h&&h[N]===_)return N}catch{}}return-1}function lt(h,_,b){var w;if(h){if(h[re])return h[re](_,b);var I=h.length,N=b||h;w=new Array(I);try{for(var U=0;U<I;U++)U in h&&(w[U]=_.call(N,h[U],h))}catch{}}return w}function gt(h,_,b){var w;if(h){if(h[ve])return h[ve](_,b);var I=h.length,N=0;if(arguments.length>=3)w=arguments[2];else{for(;N<I&&!(N in h);)N++;w=h[N++]}for(;N<I;)N in h&&(w=_(w,h[N],N,h)),N++}return w}function f(h){return h&&(h=nr&&h[Ve]?h[Ve]():h.replace?h.replace(/^\s+|\s+$/g,""):h),h}var y=!{toString:null}.propertyIsEnumerable("toString"),S=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function C(h){var _=typeof h;if(_!==t&&(_!==r||h===null)&&g("objKeys called on non-object"),!y&&ce)return ce(h);var b=[];for(var w in h)h&&p.call(h,w)&&b.push(w);if(y)for(var I=S.length,N=0;N<I;N++)h&&p.call(h,S[N])&&b.push(S[N]);return b}function D(h,_,b,w){if(Ot)try{var I={enumerable:!0,configurable:!0};return b&&(I.get=b),w&&(I.set=w),Ot(h,_,I),!0}catch{}return!1}function k(h){return h}function L(h){return Sr&&Ze(h,function(_,b){(Z(b)||he(b))&&Sr(b)}),X(h)}var X=Sr||k,te=mr||k;function He(){var h=Date;return h.now?h.now():new h().getTime()}function dt(h){return ze(h)?h.name:A}function Be(h,_,b,w,I){var N=b;return h&&(N=h[_],N!==b&&(!I||I(N))&&(!w||w(b))&&(N=b,h[_]=N)),N}function it(h,_,b){var w;return h?(w=h[_],!w&&ae(w)&&(w=Oe(b)?{}:b,h[_]=w)):w=Oe(b)?{}:b,w}function pt(h){return!h}function St(h){return!!h}function Ut(h){throw new Error(h)}function Gr(h,_){var b=null,w=null;return ut(h)?b=h:w=h,function(){var I=arguments;if(b&&(w=b()),w)return w[_].apply(w,I)}}function pr(h,_,b){if(h&&_&&he(h)&&he(_)){var w=function(N){if(pe(N)){var U=_[N];ut(U)?(!b||b(N,!0,_,h))&&(h[N]=Gr(_,N)):(!b||b(N,!1,_,h))&&(Le(h,N)&&delete h[N],D(h,N,function(){return _[N]},function(W){_[N]=W})||(h[N]=U))}};for(var I in _)w(I)}return h}function yr(h,_,b,w,I){h&&_&&b&&(I!==!1||Oe(h[_]))&&(h[_]=Gr(b,w))}function Kr(h,_,b,w){return h&&_&&he(h)&&Z(b)&&nt(b,function(I){pe(I)&&yr(h,I,_,I,w)}),h}function Vr(h){return function(){function _(){var b=this;h&&Ze(h,function(w,I){b[w]=I})}return _}()}function on(h){return h&&l&&(h=i(l({},h))),h}function or(h,_,b,w,I,N){var U=arguments,W=U[0]||{},V=U.length,be=!1,J=1;for(V>0&&bt(W)&&(be=W,W=U[J]||{},J++),he(W)||(W={});J<V;J++){var we=U[J],Re=Z(we),fe=he(we);for(var Ge in we){var _t=Re&&Ge in we||fe&&p.call(we,Ge);if(_t){var Et=we[Ge],Mt=void 0;if(be&&Et&&((Mt=Z(Et))||Vt(Et))){var Nt=W[Ge];Mt?Z(Nt)||(Nt=[]):Vt(Nt)||(Nt={}),Et=or(be,Nt,Et)}Et!==void 0&&(W[Ge]=Et)}}}return W}function xr(h){var _={};return Ze(h,function(b,w){_[b]=w,_[w]=b}),L(_)}function Qr(h){var _={};return Ze(h,function(b,w){_[b]=b,_[w]=b}),L(_)}function Nr(h){var _={};return Ze(h,function(b,w){_[b]=w[1],_[w[0]]=w[1]}),L(_)}var Ar=xr({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5});var Mr="constructor",Or="prototype",Xr="function",zr="_dynInstFuncs",an="_isDynProxy",kr="_dynClass",sn="_dynCls$",Yr="_dynInstChk",Lr=Yr,Dr="_dfOpts",cn="_unknown_",F="__proto__",me="_dyn"+F,ye="_dynInstProto",Pe="useBaseInst",Qe="setInstFuncs",It=Object,yt=It.getPrototypeOf,Pt=It.getOwnPropertyNames,At=0;function Je(h,_){return h&&It[Or].hasOwnProperty.call(h,_)}function B(h){return h&&(h===It[Or]||h===Array[Or])}function ue(h){return B(h)||h===Function[Or]}function de(h){var _;if(h){if(yt)return yt(h);var b=h[F]||h[Or]||(h[Mr]?h[Mr][Or]:null);_=h[me]||b,Je(h,me)||(delete h[ye],_=h[me]=h[ye]||h[me],h[ye]=b)}return _}function Ce(h,_){var b=[];if(Pt)b=Pt(h);else for(var w in h)typeof w=="string"&&Je(h,w)&&b.push(w);if(b&&b.length>0)for(var I=0;I<b.length;I++)_(b[I])}function ft(h,_,b){return _!==Mr&&typeof h[_]===Xr&&(b||Je(h,_))}function ht(h){throw new TypeError("DynamicProto: "+h)}function Qt(h){var _={};return Ce(h,function(b){!_[b]&&ft(h,b,!1)&&(_[b]=h[b])}),_}function er(h,_){for(var b=h.length-1;b>=0;b--)if(h[b]===_)return!0;return!1}function _r(h,_,b,w){function I(V,be,J){var we=be[J];if(we[an]&&w){var Re=V[zr]||{};Re[Lr]!==!1&&(we=(Re[be[kr]]||{})[J]||we)}return function(){return we.apply(V,arguments)}}var N={};Ce(b,function(V){N[V]=I(_,b,V)});for(var U=de(h),W=[];U&&!ue(U)&&!er(W,U);)Ce(U,function(V){!N[V]&&ft(U,V,!yt)&&(N[V]=I(_,U,V))}),W.push(U),U=de(U);return N}function jr(h,_,b,w){var I=null;if(h&&Je(b,kr)){var N=h[zr]||{};if(I=(N[b[kr]]||{})[_],I||ht("Missing ["+_+"] "+Xr),!I[Yr]&&N[Lr]!==!1){for(var U=!Je(h,_),W=de(h),V=[];U&&W&&!ue(W)&&!er(V,W);){var be=W[_];if(be){U=be===w;break}V.push(W),W=de(W)}try{U&&(h[_]=I),I[Yr]=1}catch{N[Lr]=!1}}}return I}function hn(h,_,b){var w=_[h];return w===b&&(w=de(_)[h]),typeof w!==Xr&&ht("["+h+"] is not a "+Xr),w}function ai(h,_,b,w,I){function N(V,be){var J=function(){var we=jr(this,be,V,J)||hn(be,V,J);return we.apply(this,arguments)};return J[an]=1,J}if(!B(h)){var U=b[zr]=b[zr]||{},W=U[_]=U[_]||{};U[Lr]!==!1&&(U[Lr]=!!I),Ce(b,function(V){ft(b,V,!1)&&b[V]!==w[V]&&(W[V]=b[V],delete b[V],(!Je(h,V)||h[V]&&!h[V][an])&&(h[V]=N(h,V)))})}}function R(h,_){if(yt){for(var b=[],w=de(_);w&&!ue(w)&&!er(b,w);){if(w===h)return!0;b.push(w),w=de(w)}return!1}return!0}function H(h,_){return Je(h,Or)?h.name||_||cn:((h||{})[Mr]||{}).name||_||cn}function z(h,_,b,w){Je(h,Or)||ht("theClass is an invalid class definition.");var I=h[Or];R(I,_)||ht("["+H(h)+"] is not in class hierarchy of ["+H(_)+"]");var N=null;Je(I,kr)?N=I[kr]:(N=sn+H(h,"_")+"$"+At,At++,I[kr]=N);var U=z[Dr],W=!!U[Pe];W&&w&&w[Pe]!==void 0&&(W=!!w[Pe]);var V=Qt(_),be=_r(I,_,V,W);b(_,be);var J=!!yt&&!!U[Qe];J&&w&&(J=!!w[Qe]),ai(I,N,_,V,J!==!1)}var tt={setInstFuncs:!0,useBaseInst:!0};z[Dr]=tt;var Lt="window",zt="document",Xt="documentMode",jt="navigator",Yt="history",Hr="location",Rr="console",Rn="performance",Bn="JSON",si="crypto",Ui="msCrypto",Ud="ReactNative",sa="msie",ca="trident/",tc="XMLHttpRequest",ua=null,la=null,rc=!1,qn=null,da=null;function nc(h,_){var b=!1;if(h){try{if(b=_ in h,!b){var w=h[a];w&&(b=_ in w)}}catch{}if(!b)try{var I=new h;b=!Oe(I[_])}catch{}}return b}function Fd(h){rc=h}function hr(h){var _=m();return _&&_[h]?_[h]:h===Lt&&fa()?window:null}function fa(){return!!(typeof window===r&&window)}function pa(){return fa()?window:hr(Lt)}function ic(){return!!(typeof document===r&&document)}function vn(){return ic()?document:hr(zt)}function ha(){return!!(typeof navigator===r&&navigator)}function xn(){return ha()?navigator:hr(jt)}function oc(){return!!(typeof history===r&&history)}function Bd(){return oc()?history:hr(Yt)}function ac(h){if(h&&rc){var _=hr("__mockLocation");if(_)return _}return typeof location===r&&location?location:hr(Hr)}function sc(){return typeof console!==s?console:hr(Rr)}function va(){return hr(Rn)}function Fi(){return!!(typeof JSON===r&&JSON||hr(Bn)!==null)}function ma(){return Fi()?JSON||hr(Bn):null}function cc(){return hr(si)}function uc(){return hr(Ui)}function qd(){var h=xn();return h&&h.product?h.product===Ud:!1}function ci(){var h=xn();if(h&&(h.userAgent!==la||ua===null)){la=h.userAgent;var _=(la||A).toLowerCase();ua=je(_,sa)||je(_,ca)}return ua}function Gd(h){if(h===void 0&&(h=null),!h){var _=xn()||{};h=_?(_.userAgent||A).toLowerCase():A}var b=(h||A).toLowerCase();if(je(b,sa)){var w=vn()||{};return Math.max(parseInt(b.split(sa)[1]),w[Xt]||0)}else if(je(b,ca)){var I=parseInt(b.split(ca)[1]);if(I)return I+4}return null}function mn(h){var _=Object[a].toString.call(h),b=A;return _==="[object Error]"?b="{ stack: '"+h.stack+"', message: '"+h.message+"', name: '"+h.name+"'":Fi()&&(b=ma().stringify(h)),_+b}function Vd(h){if(!h||!pe(h)){var _=xn()||{};h=_?(_.userAgent||A).toLowerCase():A}var b=(h||A).toLowerCase();return b.indexOf("safari")>=0}function zd(){return da===null&&(da=ha()&&!!xn().sendBeacon),da}function Wd(h){var _=!1;try{_=!!hr("fetch");var b=hr("Request");_&&h&&b&&(_=nc(b,"keepalive"))}catch{}return _}function $d(){return qn===null&&(qn=typeof XDomainRequest!==s,qn&&lc()&&(qn=qn&&!nc(hr(tc),"withCredentials"))),qn}function lc(){var h=!1;try{var _=hr(tc);h=!!_}catch{}return h}function dc(h,_){if(h)for(var b=0;b<h.length;b++){var w=h[b];if(w.name&&w.name===_)return w}return{}}function fc(h){var _=vn();return _&&h?dc(_.querySelectorAll("meta"),h).content:null}function pc(h){var _,b=va();if(b){var w=b.getEntriesByType("navigation")||[];_=dc((w.length>0?w[0]:{}).serverTiming,h).description}return _}var ga=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],Bi=null,qi;function Kd(h,_){return function(){var b=arguments,w=ya(_);if(w){var I=w.listener;I&&I[h]&&I[h].apply(I,b)}}}function Qd(){var h=hr("Microsoft");return h&&(Bi=h.ApplicationInsights),Bi}function ya(h){var _=Bi;return!_&&h.disableDbgExt!==!0&&(_=Bi||Qd()),_?_.ChromeDbgExt:null}function hc(h){if(!qi){qi={};for(var _=0;_<ga.length;_++)qi[ga[_]]=Kd(ga[_],h)}return qi}var Xd="AI (Internal): ",Yd="AI: ",Zd="AITR_",Jd="errorToConsole",ef="warnToConsole";function vc(h){return h?'"'+h.replace(/\"/g,A)+'"':A}function mc(h,_){var b=sc();if(b){var w="log";b[h]&&(w=h),ut(b[w])&&b[w](_)}}var Gi=function(){function h(_,b,w,I){w===void 0&&(w=!1);var N=this;N.messageId=_,N.message=(w?Yd:Xd)+_;var U=A;Fi()&&(U=ma().stringify(I));var W=(b?" message:"+vc(b):A)+(I?" props:"+vc(U):A);N.message+=W}return h.dataType="MessageData",h}();function gc(h,_){return(h||{}).logger||new Gn(_)}var Gn=function(){function h(_){this.identifier="DiagnosticLogger",this.queue=[];var b=0,w={};z(h,this,function(I){ae(_)&&(_={}),I.consoleLoggingLevel=function(){return N("loggingLevelConsole",0)},I.telemetryLoggingLevel=function(){return N("loggingLevelTelemetry",1)},I.maxInternalMessageLimit=function(){return N("maxMessageLimit",25)},I.enableDebugExceptions=function(){return N("enableDebugExceptions",!1)},I.throwInternal=function(V,be,J,we,Re){Re===void 0&&(Re=!1);var fe=new Gi(be,J,Re,we);if(I.enableDebugExceptions())throw mn(fe);var Ge=V===1?Jd:ef;if(Oe(fe.message))W("throw"+(V===1?"Critical":"Warning"),fe);else{var _t=I.consoleLoggingLevel();if(Re){var Et=+fe.messageId;!w[Et]&&_t>=V&&(I[Ge](fe.message),w[Et]=!0)}else _t>=V&&I[Ge](fe.message);I.logInternalMessage(V,fe)}},I.warnToConsole=function(V){mc("warn",V),W("warning",V)},I.errorToConsole=function(V){mc("error",V),W("error",V)},I.resetInternalMessageCount=function(){b=0,w={}},I.logInternalMessage=function(V,be){if(!U()){var J=!0,we=Zd+be.messageId;if(w[we]?J=!1:w[we]=!0,J&&(V<=I.telemetryLoggingLevel()&&(I.queue.push(be),b++,W(V===1?"error":"warn",be)),b===I.maxInternalMessageLimit())){var Re="Internal events throttle limit per PageView reached for this app.",fe=new Gi(23,Re,!1);I.queue.push(fe),V===1?I.errorToConsole(Re):I.warnToConsole(Re)}}};function N(V,be){var J=_[V];return ae(J)?be:J}function U(){return b>=I.maxInternalMessageLimit()}function W(V,be){var J=ya(_);J&&J.diagLog&&J.diagLog(V,be)}})}return h}();function yc(h){return h||new Gn}function Nn(h,_,b,w,I,N){N===void 0&&(N=!1),(h||new Gn).throwInternal(_,b,w,I,N)}function _c(h,_){yc(h).warnToConsole(_)}function tf(h,_,b){yc(h).logInternalMessage(_,b)}var Vn="ctx",Ec=null,ui=function(){function h(_,b,w){var I=this,N=!1;if(I.start=He(),I.name=_,I.isAsync=w,I.isChildEvt=function(){return!1},ut(b)){var U;N=D(I,"payload",function(){return!U&&ut(b)&&(U=b(),b=null),U})}I.getCtx=function(W){return W?W===h.ParentContextKey||W===h.ChildrenContextKey?I[W]:(I[Vn]||{})[W]:null},I.setCtx=function(W,V){if(W)if(W===h.ParentContextKey)I[W]||(I.isChildEvt=function(){return!0}),I[W]=V;else if(W===h.ChildrenContextKey)I[W]=V;else{var be=I[Vn]=I[Vn]||{};be[W]=V}},I.complete=function(){var W=0,V=I.getCtx(h.ChildrenContextKey);if(Z(V))for(var be=0;be<V.length;be++){var J=V[be];J&&(W+=J.time)}I.time=He()-I.start,I.exTime=I.time-W,I.complete=function(){},!N&&ut(b)&&(I.payload=b())}}return h.ParentContextKey="parent",h.ChildrenContextKey="childEvts",h}(),bc=function(){function h(_){this.ctx={},z(h,this,function(b){b.create=function(w,I,N){return new ui(w,I,N)},b.fire=function(w){w&&(w.complete(),_&&ut(_.perfEvent)&&_.perfEvent(w))},b.setCtx=function(w,I){if(w){var N=b[Vn]=b[Vn]||{};N[w]=I}},b.getCtx=function(w){return(b[Vn]||{})[w]}})}return h}(),_a="CoreUtils.doPerf";function Ea(h,_,b,w,I){if(h){var N=h;if(ut(N.getPerfMgr)&&(N=N.getPerfMgr()),N){var U=void 0,W=N.getCtx(_a);try{if(U=N.create(_(),w,I),U){if(W&&U.setCtx&&(U.setCtx(ui.ParentContextKey,W),W.getCtx&&W.setCtx)){var V=W.getCtx(ui.ChildrenContextKey);V||(V=[],W.setCtx(ui.ChildrenContextKey,V)),V.push(U)}return N.setCtx(_a,U),b(U)}}catch(be){U&&U.setCtx&&U.setCtx("exception",be)}finally{U&&N.fire(U),N.setCtx(_a,W)}}}return b()}function rf(h){Ec=h}function Sc(){return Ec}var Tc=4294967296,gn=4294967295,wc=!1,li=123456789,di=987654321;function Ic(h){h<0&&(h>>>=0),li=123456789+h&gn,di=987654321-h&gn,wc=!0}function Ac(){try{var h=He()&2147483647;Ic((Math.random()*Tc^h)+h)}catch{}}function ba(h){return h>0?Math.floor(Mn()/gn*(h+1))>>>0:0}function Mn(h){var _=0,b=cc()||uc();return b&&b.getRandomValues&&(_=b.getRandomValues(new Uint32Array(1))[0]&gn),_===0&&ci()&&(wc||Ac(),_=Sa()&gn),_===0&&(_=Math.floor(Tc*Math.random()|0)),h||(_>>>=0),_}function Oc(h){h?Ic(h):Ac()}function Sa(h){di=36969*(di&65535)+(di>>16)&gn,li=18e3*(li&65535)+(li>>16)&gn;var _=(di<<16)+(li&65535)>>>0&gn|0;return h||(_>>>=0),_}function Ta(h){h===void 0&&(h=22);for(var _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=Mn()>>>0,w=0,I=A;I.length<h;)w++,I+=_.charAt(b&63),b>>>=6,w===5&&(b=(Mn()<<2&4294967295|b&3)>>>0,w=0);return I}var Pc=u,Cc="2.8.4",nf="."+Ta(6),of=0;function af(h,_,b){if(Pc)try{return Pc(h,_,{value:b,enumerable:!1,configurable:!0}),!0}catch{}return!1}function Dc(h){return h.nodeType===1||h.nodeType===9||!+h.nodeType}function sf(h,_){var b=_[h.id];if(!b){b={};try{Dc(_)&&(af(_,h.id,b)||(_[h.id]=b))}catch{}}return b}function fi(h,_){return _===void 0&&(_=!1),Bt(h+of+++(_?"."+Cc:"")+nf)}function Rc(h){var _={id:fi("_aiData-"+(h||"")+"."+Cc),accept:function(b){return Dc(b)},get:function(b,w,I,N){var U=b[_.id];return U?U[Bt(w)]:(N&&(U=sf(_,b),U[Bt(w)]=I),I)},kill:function(b,w){if(b&&b[w])try{delete b[w]}catch{}}};return _}var xc="toGMTString",Nc="toUTCString",wa="cookie",Ia="expires",Aa="enabled",Mc="isCookieUseDisabled",kc="disableCookiesUsage",yn="_ckMgr",Vi=null,Oa=null,Lc=null,pi=vn(),jc={},zi={};function Hc(h,_){var b=zn[yn]||zi[yn];return b||(b=zn[yn]=zn(h,_),zi[yn]=b),b}function Wi(h){return h?h.isEnabled():!0}function cf(h){var _=h.cookieCfg=h.cookieCfg||{};if(Be(_,"domain",h.cookieDomain,Ie,ae),Be(_,"path",h.cookiePath||"/",null,ae),ae(_[Aa])){var b=void 0;Oe(h[Mc])||(b=!h[Mc]),Oe(h[kc])||(b=!h[kc]),_[Aa]=b}return _}function uf(h,_){var b;if(h)b=h.getCookieMgr();else if(_){var w=_.cookieCfg;w[yn]?b=w[yn]:b=zn(_)}return b||(b=Hc(_,(h||{}).logger)),b}function zn(h,_){var b=cf(h||zi),w=b.path||"/",I=b.domain,N=b[Aa]!==!1,U={isEnabled:function(){var W=N&&Pa(_),V=zi[yn];return W&&V&&U!==V&&(W=Wi(V)),W},setEnabled:function(W){N=W!==!1},set:function(W,V,be,J,we){var Re=!1;if(Wi(U)){var fe={},Ge=f(V||A),_t=Ge.indexOf(";");if(_t!==-1&&(Ge=f(V.substring(0,_t)),fe=Uc(V.substring(_t+1))),Be(fe,"domain",J||I,St,Oe),!ae(be)){var Et=ci();if(Oe(fe[Ia])){var Mt=He(),Nt=Mt+be*1e3;if(Nt>0){var ur=new Date;ur.setTime(Nt),Be(fe,Ia,Fc(ur,Et?xc:Nc)||Fc(ur,Et?xc:Nc)||A,St)}}Et||Be(fe,"max-age",A+be,null,Oe)}var lr=ac();lr&&lr.protocol==="https:"&&(Be(fe,"secure",null,null,Oe),Oa===null&&(Oa=!Gc((xn()||{}).userAgent)),Oa&&Be(fe,"SameSite","None",null,Oe)),Be(fe,"path",we||w,null,Oe);var qe=b.setCookie||qc;qe(W,Bc(Ge,fe)),Re=!0}return Re},get:function(W){var V=A;return Wi(U)&&(V=(b.getCookie||lf)(W)),V},del:function(W,V){var be=!1;return Wi(U)&&(be=U.purge(W,V)),be},purge:function(W,V){var be,J=!1;if(Pa(_)){var we=(be={},be.path=V||"/",be[Ia]="Thu, 01 Jan 1970 00:00:01 GMT",be);ci()||(we["max-age"]="0");var Re=b.delCookie||qc;Re(W,Bc(A,we)),J=!0}return J}};return U[yn]=U,U}function Pa(h){if(Vi===null){Vi=!1;try{var _=pi||{};Vi=_[wa]!==void 0}catch(b){Nn(h,2,68,"Cannot access document.cookie - "+dt(b),{exception:mn(b)})}}return Vi}function Uc(h){var _={};if(h&&h.length){var b=f(h).split(";");nt(b,function(w){if(w=f(w||A),w){var I=w.indexOf("=");I===-1?_[w]=null:_[f(w.substring(0,I))]=f(w.substring(I+1))}})}return _}function Fc(h,_){return ut(h[_])?h[_]():null}function Bc(h,_){var b=h||A;return Ze(_,function(w,I){b+="; "+w+(ae(I)?A:"="+I)}),b}function lf(h){var _=A;if(pi){var b=pi[wa]||A;Lc!==b&&(jc=Uc(b),Lc=b),_=f(jc[h]||A)}return _}function qc(h,_){pi&&(pi[wa]=h+"="+_)}function Gc(h){return pe(h)?!!(je(h,"CPU iPhone OS 12")||je(h,"iPad; CPU OS 12")||je(h,"Macintosh; Intel Mac OS X 10_14")&&je(h,"Version/")&&je(h,"Safari")||je(h,"Macintosh; Intel Mac OS X 10_14")&&Kt(h,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||je(h,"Chrome/5")||je(h,"Chrome/6")||je(h,"UnrealEngine")&&!je(h,"Chrome")||je(h,"UCBrowser/12")||je(h,"UCBrowser/11")):!1}var Vc="on",zc="attachEvent",Wc="addEventListener",$c="detachEvent",Kc="removeEventListener",$i="events",hi="visibilitychange",Ki="pagehide",Qc="pageshow",Xc="unload",Yc="beforeunload",Zc=fi("aiEvtPageHide"),Jc=fi("aiEvtPageShow"),df=/\.[\.]+/g,ff=/[\.]+$/,pf=1,vi=Rc("events"),hf=/^([^.]*)(?:\.(.+)|)/;function eu(h){return h&&h.replace?h.replace(/^\s*\.*|\.*\s*$/g,""):h}function Qi(h,_){if(_){var b="";Z(_)?(b="",nt(_,function(I){I=eu(I),I&&(I[0]!=="."&&(I="."+I),b+=I)})):b=eu(_),b&&(b[0]!=="."&&(b="."+b),h=(h||"")+b)}var w=hf.exec(h||"")||[];return{type:w[1],ns:(w[2]||"").replace(df,".").replace(ff,"").split(".").sort().join(".")}}function vf(h,_,b){var w=[],I=vi.get(h,$i,{},!1),N=Qi(_,b);return Ze(I,function(U,W){nt(W,function(V){(!N.type||N.type===V.evtName.type)&&(!N.ns||N.ns===N.ns)&&w.push({name:V.evtName.type+(V.evtName.ns?"."+V.evtName.ns:""),handler:V.handler})})}),w}function tu(h,_,b){b===void 0&&(b=!0);var w=vi.get(h,$i,{},b),I=w[_];return I||(I=w[_]=[]),I}function ru(h,_,b,w){h&&_&&_.type&&(h[Kc]?h[Kc](_.type,b,w):h[$c]&&h[$c](Vc+_.type,b))}function mf(h,_,b,w){var I=!1;return h&&_&&_.type&&b&&(h[Wc]?(h[Wc](_.type,b,w),I=!0):h[zc]&&(h[zc](Vc+_.type,b),I=!0)),I}function nu(h,_,b,w){for(var I=_.length;I--;){var N=_[I];N&&(!b.ns||b.ns===N.evtName.ns)&&(!w||w(N))&&(ru(h,N.evtName,N.handler,N.capture),_.splice(I,1))}}function gf(h,_,b){if(_.type)nu(h,tu(h,_.type),_,b);else{var w=vi.get(h,$i,{});Ze(w,function(I,N){nu(h,N,_,b)}),C(w).length===0&&vi.kill(h,$i)}}function mi(h,_){var b;return _?(Z(_)?b=[h].concat(_):b=[h,_],b=Qi("xx",b).ns.split(".")):b=h,b}function gi(h,_,b,w,I){I===void 0&&(I=!1);var N=!1;if(h)try{var U=Qi(_,w);if(N=mf(h,U,b,I),N&&vi.accept(h)){var W={guid:pf++,evtName:U,handler:b,capture:I};tu(h,U.type).push(W)}}catch{}return N}function yi(h,_,b,w,I){if(I===void 0&&(I=!1),h)try{var N=Qi(_,w),U=!1;gf(h,N,function(W){return N.ns&&!b||W.handler===b?(U=!0,!0):!1}),U||ru(h,N,b,I)}catch{}}function Ca(h,_,b,w){return w===void 0&&(w=!1),gi(h,_,b,null,w)}function Da(h,_,b,w){w===void 0&&(w=!1),yi(h,_,b,null,w)}function Ra(h,_,b){var w=!1,I=pa();I&&(w=gi(I,h,_,b),w=gi(I.body,h,_,b)||w);var N=vn();return N&&(w=gi(N,h,_,b)||w),w}function iu(h,_,b){var w=pa();w&&(yi(w,h,_,b),yi(w.body,h,_,b));var I=vn();I&&yi(I,h,_,b)}function Wn(h,_,b,w){var I=!1;return _&&h&&h.length>0&&nt(h,function(N){N&&(!b||Dt(b,N)===-1)&&(I=Ra(N,_,w)||I)}),I}function ou(h,_,b,w){var I=!1;return _&&h&&Z(h)&&(I=Wn(h,_,b,w),!I&&b&&b.length>0&&(I=Wn(h,_,null,w))),I}function $n(h,_,b){h&&Z(h)&&nt(h,function(w){w&&iu(w,_,b)})}function yf(h,_,b){return ou([Yc,Xc,Ki],h,_,b)}function _f(h,_){$n([Yc,Xc,Ki],h,_)}function au(h,_,b){function w(U){var W=vn();h&&W&&W.visibilityState==="hidden"&&h(U)}var I=mi(Zc,b),N=Wn([Ki],h,_,I);return(!_||Dt(_,hi)===-1)&&(N=Wn([hi],w,_,I)||N),!N&&_&&(N=au(h,null,b)),N}function Ef(h,_){var b=mi(Zc,_);$n([Ki],h,b),$n([hi],null,b)}function su(h,_,b){function w(U){var W=vn();h&&W&&W.visibilityState==="visible"&&h(U)}var I=mi(Jc,b),N=Wn([Qc],h,_,I);return N=Wn([hi],w,_,I)||N,!N&&_&&(N=su(h,null,b)),N}function bf(h,_){var b=mi(Jc,_);$n([Qc],h,b),$n([hi],null,b)}var _i=null,Ei,Sf=s;function cu(){function h(){return ba(15)}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(Tf,function(_){var b=h()|0,w=_==="x"?b:b&3|8;return w.toString(16)})}function uu(){var h=va();return h&&h.now?h.now():He()}function Xi(){for(var h=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],_=A,b,w=0;w<4;w++)b=Mn(),_+=h[b&15]+h[b>>4&15]+h[b>>8&15]+h[b>>12&15]+h[b>>16&15]+h[b>>20&15]+h[b>>24&15]+h[b>>28&15];var I=h[8+(Mn()&3)|0];return _.substr(0,8)+_.substr(9,4)+"4"+_.substr(13,3)+I+_.substr(16,3)+_.substr(19,12)}var xa={_canUseCookies:void 0,isTypeof:wt,isUndefined:Oe,isNullOrUndefined:ae,hasOwnProperty:Le,isFunction:ut,isObject:he,isDate:Se,isArray:Z,isError:ze,isString:pe,isNumber:mt,isBoolean:bt,toISOString:$t,arrForEach:nt,arrIndexOf:Dt,arrMap:lt,arrReduce:gt,strTrim:f,objCreate:E,objKeys:C,objDefineAccessors:D,addEventHandler:Ra,dateNow:He,isIE:ci,disableCookies:lu,newGuid:cu,perfNow:uu,newId:Ta,randomValue:ba,random32:Mn,mwcRandomSeed:Oc,mwcRandom32:Sa,generateW3CId:Xi},Tf=/[xy]/g,wf={Attach:Ca,AttachEvent:Ca,Detach:Da,DetachEvent:Da};function Kn(h,_){var b=Hc(h,_),w=xa._canUseCookies;return _i===null&&(_i=[],Ei=w,D(xa,"_canUseCookies",function(){return Ei},function(I){Ei=I,nt(_i,function(N){N.setEnabled(I)})})),Dt(_i,b)===-1&&_i.push(b),bt(w)&&b.setEnabled(w),bt(Ei)&&b.setEnabled(Ei),b}function lu(){Kn().setEnabled(!1)}function If(h){return Kn(null,h).isEnabled()}function Af(h,_){return Kn(null,h).get(_)}function Of(h,_,b,w){Kn(null,h).set(_,b,null,w)}function Pf(h,_){return Kn(null,h).del(_)}var Cf=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,Na="00",Ma="ff",Yi="00000000000000000000000000000000",Zi="0000000000000000",du=1;function un(h,_,b){return h&&h.length===_&&h!==b?!!h.match(/^[\da-f]*$/):!1}function fu(h,_,b){return un(h,_)?h:b}function pu(h){(isNaN(h)||h<0||h>255)&&(h=1);for(var _=h.toString(16);_.length<2;)_="0"+_;return _}function Df(h,_,b,w){return{version:un(w,2,Ma)?w:Na,traceId:La(h)?h:Xi(),spanId:ja(_)?_:Xi().substr(0,16),traceFlags:b>=0&&b<=255?b:1}}function ka(h){if(!h||(Z(h)&&(h=h[0]||""),!h||!pe(h)||h.length>8192))return null;var _=Cf.exec(f(h));return!_||_[1]===Ma||_[2]===Yi||_[3]===Zi?null:{version:_[1],traceId:_[2],spanId:_[3],traceFlags:parseInt(_[4],16)}}function La(h){return un(h,32,Yi)}function ja(h){return un(h,16,Zi)}function hu(h){return!(!h||!un(h.version,2,Ma)||!un(h.traceId,32,Yi)||!un(h.spanId,16,Zi)||!un(pu(h.traceFlags),2))}function Rf(h){return hu(h)?(h.traceFlags&du)===du:!1}function xf(h){if(h){var _=pu(h.traceFlags);un(_,2)||(_="01");var b=h.version||Na;return b!=="00"&&b!=="ff"&&(b=Na),"".concat(b,"-").concat(fu(h.traceId,32,Yi),"-").concat(fu(h.spanId,16,Zi),"-").concat(_)}return""}function Nf(){var h="traceparent",_=ka(fc(h));return _||(_=ka(pc(h))),_}var Mf="_doUnload",kf=Rc("plugin");function kn(h){return kf.get(h,"state",{},!0)}function Ha(h,_){for(var b=[],w=null,I=h.getNext(),N;I;){var U=I.getPlugin();if(U){w&&ut(w[G])&&ut(U[M])&&w[G](U);var W=!1;ut(U[q])?W=U[q]():(N=kn(U),W=N[q]),W||b.push(U),w=U,I=I.getNext()}}nt(b,function(V){var be=h.core();V.initialize(h.getCfg(),be,_,h.getNext()),N=kn(V),!V[ne]&&!N[ne]&&(N[ne]=be),N[q]=!0,delete N[Y]})}function Ji(h){return h.sort(function(_,b){var w=0;if(b){var I=ut(b[M]);ut(_[M])?w=I?_[j]-b[j]:1:I&&(w=-1)}else w=_?1:-1;return w})}function Lf(h,_,b,w){var I=0;function N(){for(;I<h.length;){var U=h[I++];if(U){var W=U[Mf]||U[ct];if(ut(W)&&W.call(U,_,b,N)===!0)return!0}}}return N()}function jf(h){var _={};return{getName:function(){return _.name},setName:function(b){h&&h.setName(b),_.name=b},getTraceId:function(){return _.traceId},setTraceId:function(b){h&&h.setTraceId(b),La(b)&&(_.traceId=b)},getSpanId:function(){return _.spanId},setSpanId:function(b){h&&h.setSpanId(b),ja(b)&&(_.spanId=b)},getTraceFlags:function(){return _.traceFlags},setTraceFlags:function(b){h&&h.setTraceFlags(b),_.traceFlags=b}}}var Hf="TelemetryPluginChain",vu="_hasRun",mu="_getTelCtx",gu=0;function Uf(h,_,b){for(;h;){if(h.getPlugin()===b)return h;h=h.getNext()}return _n([b],_.config||{},_)}function Ua(h,_,b,w){var I=null,N=[];w!==null&&(I=w?Uf(h,b,w):h);var U={_next:V,ctx:{core:function(){return b},diagLog:function(){return gc(b,_)},getCfg:function(){return _},getExtCfg:be,getConfig:J,hasNext:function(){return!!I},getNext:function(){return I},setNext:function(Re){I=Re},iterate:we,onComplete:W}};function W(Re,fe){for(var Ge=[],_t=2;_t<arguments.length;_t++)Ge[_t-2]=arguments[_t];Re&&N.push({func:Re,self:Oe(fe)?U.ctx:fe,args:Ge})}function V(){var Re=I;if(I=Re?Re.getNext():null,!Re){var fe=N;fe&&fe.length>0&&(nt(fe,function(Ge){try{Ge.func.call(Ge.self,Ge.args)}catch(_t){Nn(b.logger,2,73,"Unexpected Exception during onComplete - "+mn(_t))}}),N=[])}return Re}function be(Re,fe,Ge){fe===void 0&&(fe={}),Ge===void 0&&(Ge=0);var _t;if(_){var Et=_.extensionConfig;Et&&Re&&(_t=Et[Re])}if(!_t)_t=fe;else if(he(fe)&&Ge!==0){var Mt=or(!0,fe,_t);_&&Ge===2&&Ze(fe,function(Nt){if(ae(Mt[Nt])){var ur=_[Nt];ae(ur)||(Mt[Nt]=ur)}}),_t=Mt}return _t}function J(Re,fe,Ge){Ge===void 0&&(Ge=!1);var _t,Et=be(Re,null);return Et&&!ae(Et[fe])?_t=Et[fe]:_&&!ae(_[fe])&&(_t=_[fe]),ae(_t)?Ge:_t}function we(Re){for(var fe;fe=U._next();){var Ge=fe.getPlugin();Ge&&Re(Ge)}}return U}function ln(h,_,b,w){var I=Ua(h,_,b,w),N=I.ctx;function U(V){var be=I._next();return be&&be.processTelemetry(V,N),!be}function W(V,be){return V===void 0&&(V=null),Z(V)&&(V=_n(V,_,b,be)),ln(V||N.getNext(),_,b,be)}return N.processNext=U,N.createNew=W,N}function eo(h,_,b){var w=_.config||{},I=Ua(h,w,_,b),N=I.ctx;function U(V){var be=I._next();return be&&be.unload(N,V),!be}function W(V,be){return V===void 0&&(V=null),Z(V)&&(V=_n(V,w,_,be)),eo(V||N.getNext(),_,be)}return N.processNext=U,N.createNew=W,N}function Fa(h,_,b){var w=_.config||{},I=Ua(h,w,_,b),N=I.ctx;function U(V){return N.iterate(function(be){ut(be.update)&&be.update(N,V)})}function W(V,be){return V===void 0&&(V=null),Z(V)&&(V=_n(V,w,_,be)),Fa(V||N.getNext(),_,be)}return N.processNext=U,N.createNew=W,N}function _n(h,_,b,w){var I=null,N=!w;if(Z(h)&&h.length>0){var U=null;nt(h,function(W){if(!N&&w===W&&(N=!0),N&&W&&ut(W.processTelemetry)){var V=Ff(W,_,b);I||(I=V),U&&U._setNext(V),U=V}})}return w&&!I?_n([w],_,b):I}function Ff(h,_,b){var w=null,I=ut(h.processTelemetry),N=ut(h.setNextPlugin),U;h?U=h.identifier+"-"+h.priority+"-"+gu++:U="Unknown-0-"+gu++;var W={getPlugin:function(){return h},getNext:function(){return w},processTelemetry:J,unload:we,update:Re,_id:U,_setNext:function(fe){w=fe}};function V(){var fe;return h&&ut(h[mu])&&(fe=h[mu]()),fe||(fe=ln(W,_,b)),fe}function be(fe,Ge,_t,Et,Mt){var Nt=!1,ur=h?h.identifier:Hf,lr=fe[vu];return lr||(lr=fe[vu]={}),fe.setNext(w),h&&Ea(fe[ne](),function(){return ur+":"+_t},function(){lr[U]=!0;try{var qe=w?w._id:A;qe&&(lr[qe]=!1),Nt=Ge(fe)}catch(Qn){var bi=w?lr[w._id]:!0;bi&&(Nt=!0),(!w||!bi)&&Nn(fe.diagLog(),1,73,"Plugin ["+ur+"] failed during "+_t+" - "+mn(Qn)+", run flags: "+mn(lr))}},Et,Mt),Nt}function J(fe,Ge){Ge=Ge||V();function _t(Et){if(!h||!I)return!1;var Mt=kn(h);return Mt.teardown||Mt[De]?!1:(N&&h.setNextPlugin(w),h.processTelemetry(fe,Et),!0)}be(Ge,_t,"processTelemetry",function(){return{item:fe}},!fe.sync)||Ge.processNext(fe)}function we(fe,Ge){function _t(){var Et=!1;if(h){var Mt=kn(h),Nt=h[ne]||Mt.core;h&&(!Nt||Nt===fe[ne]())&&!Mt[Y]&&(Mt[ne]=null,Mt[Y]=!0,Mt[q]=!1,h[Y]&&h[Y](fe,Ge)===!0&&(Et=!0))}return Et}be(fe,_t,"unload",function(){},Ge.isAsync)||fe.processNext(Ge)}function Re(fe,Ge){function _t(){var Et=!1;if(h){var Mt=kn(h),Nt=h[ne]||Mt.core;h&&(!Nt||Nt===fe[ne]())&&!Mt[Y]&&h[_e]&&h[_e](fe,Ge)===!0&&(Et=!0)}return Et}be(fe,_t,"update",function(){},!1)||fe.processNext(Ge)}return X(W)}var Bf=function(){function h(_,b,w,I){var N=this,U=ln(_,b,w,I);Kr(N,U,C(U))}return h}(),qf="iKey",yu="extensionConfig",to=500,Gf="Channel has invalid priority - ";function _u(h,_,b,w){_&&Z(_)&&_.length>0&&(_=_.sort(function(I,N){return I.priority-N.priority}),nt(_,function(I){I.priority<to&&Ut(Gf+I.identifier)}),h.push({queue:X(_),chain:_n(_,b,w)}))}function Vf(h,_){var b;function w(){return ln(null,_.config,_,null)}function I(J,we,Re,fe){var Ge=J?J.length+1:1;function _t(){Ge--,Ge===0&&(fe&&fe(),fe=null)}Ge>0&&nt(J,function(Et){if(Et&&Et.queue.length>0){var Mt=Et.chain,Nt=we.createNew(Mt);Nt.onComplete(_t),Re(Nt)}else Ge--}),_t()}function N(J,we){var Re=we||{reason:0};return I(h,J,function(fe){fe[ot](Re)},function(){J[ot](Re)}),!0}function U(J,we){var Re=we||{reason:0,isAsync:!1};return I(h,J,function(fe){fe[ot](Re)},function(){J[ot](Re),V=!1}),!0}function W(J){var we=null;return h&&h.length>0&&nt(h,function(Re){if(Re&&Re.queue.length>0&&(nt(Re.queue,function(fe){if(fe.identifier===J)return we=fe,-1}),we))return-1}),we}var V=!1,be=(b={identifier:"ChannelControllerPlugin",priority:to,initialize:function(J,we,Re,fe){V=!0,nt(h,function(Ge){Ge&&Ge.queue.length>0&&Ha(ln(Ge.chain,J,we),Re)})},isInitialized:function(){return V},processTelemetry:function(J,we){I(h,we||w(),function(Re){Re[ot](J)},function(){we[ot](J)})},update:N},b[at]=function(){I(h,w(),function(J){J.iterate(function(we){we[at]&&we[at]()})},null)},b[xt]=function(){I(h,w(),function(J){J.iterate(function(we){we[xt]&&we[xt]()})},null)},b[Y]=U,b.getChannel=W,b.flush=function(J,we,Re,fe){var Ge=1,_t=!1,Et=null;fe=fe||5e3;function Mt(){Ge--,_t&&Ge===0&&(Et&&(clearTimeout(Et),Et=null),we&&we(_t),we=null)}return I(h,w(),function(Nt){Nt.iterate(function(ur){if(ur.flush){Ge++;var lr=!1;ur.flush(J,function(){lr=!0,Mt()},Re)||lr||(J&&Et==null?Et=setTimeout(function(){Et=null,Mt()},fe):Mt())}})},function(){_t=!0,Mt()}),!0},b._setQueue=function(J){h=J},b);return be}function zf(h,_,b,w){var I=[];if(h&&nt(h,function(U){return _u(I,U,b,w)}),_){var N=[];nt(_,function(U){U.priority>to&&N.push(U)}),_u(I,N,b,w)}return I}function Ba(){var h=[];function _(w){w&&h.push(w)}function b(w,I){nt(h,function(N){try{N(w,I)}catch(U){Nn(w.diagLog(),2,73,"Unexpected error calling unload handler - "+mn(U))}}),h=[]}return{add:_,run:b}}var En="getPlugin",Eu=function(){function h(){var _=this,b,w,I,N,U;be(),z(h,_,function(J){J.initialize=function(we,Re,fe,Ge){V(we,Re,Ge),b=!0},J.teardown=function(we,Re){var fe=J.core;if(!fe||we&&fe!==we.core())return;var Ge,_t=!1,Et=we||eo(null,fe,I&&I[En]?I[En]():I),Mt=Re||{reason:0,isAsync:!1};function Nt(){_t||(_t=!0,N.run(Et,Re),nt(U,function(ur){ur.rm()}),U=[],Ge===!0&&Et.processNext(Mt),be())}return!J[ct]||J[ct](Et,Mt,Nt)!==!0?Nt():Ge=!0,Ge},J.update=function(we,Re){var fe=J.core;if(!fe||we&&fe!==we.core())return;var Ge,_t=!1,Et=we||Fa(null,fe,I&&I[En]?I[En]():I),Mt=Re||{reason:0};function Nt(){_t||(_t=!0,V(Et.getCfg(),Et.core(),Et.getNext()))}return!J._doUpdate||J._doUpdate(Et,Mt,Nt)!==!0?Nt():Ge=!0,Ge},J._addHook=function(we){we&&(Z(we)?U=U.concat(we):U.push(we))},yr(J,"_addUnloadCb",function(){return N},"add")}),_.diagLog=function(J){return W(J).diagLog()},_[q]=function(){return b},_.setInitialized=function(J){b=J},_[G]=function(J){I=J},_.processNext=function(J,we){we?we.processNext(J):I&&ut(I.processTelemetry)&&I.processTelemetry(J,null)},_._getTelCtx=W;function W(J){J===void 0&&(J=null);var we=J;if(!we){var Re=w||ln(null,{},_.core);I&&I[En]?we=Re.createNew(null,I[En]):we=Re.createNew(null,I)}return we}function V(J,we,Re){J&&Be(J,yu,[],null,ae),!Re&&we&&(Re=we.getProcessTelContext().getNext());var fe=I;I&&I[En]&&(fe=I[En]()),_.core=we,w=ln(Re,J,we,fe)}function be(){b=!1,_.core=null,w=null,I=null,U=[],N=Ba()}}return h}(),Wf=function(h){O(_,h);function _(){var b=h.call(this)||this;b.identifier="TelemetryInitializerPlugin",b.priority=199;var w,I;N(),z(_,b,function(U,W){U.addTelemetryInitializer=function(V){var be={id:w++,fn:V};I.push(be);var J={remove:function(){nt(I,function(we,Re){if(we.id===be.id)return I.splice(Re,1),-1})}};return J},U.processTelemetry=function(V,be){for(var J=!1,we=I.length,Re=0;Re<we;++Re){var fe=I[Re];if(fe)try{if(fe.fn.apply(null,[V])===!1){J=!0;break}}catch(Ge){Nn(be.diagLog(),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+dt(Ge),{exception:mn(Ge)},!0)}}J||U.processNext(V,be)},U[ct]=function(){N()}});function N(){w=0,I=[]}return b}return _}(Eu),bu="Plugins must provide initialize method",Su="_notificationManager",Tu="SDK is still unloading...",$f="SDK is not initialized",Kf={loggingLevelConsole:1};function Qf(h,_){return new bc(_)}function Xf(h,_,b){var w=[],I={};return nt(b,function(N){(ae(N)||ae(N.initialize))&&Ut(bu);var U=N.priority,W=N.identifier;N&&U&&(ae(I[U])?I[U]=W:_c(h,"Two extensions have same priority #"+U+" - "+I[U]+", "+W)),(!U||U<_)&&w.push(N)}),{all:b,core:w}}function wu(h,_){var b=!1;return nt(_,function(w){if(w===h)return b=!0,-1}),b}function Yf(){var h;return E((h={},h[ge]=function(_){},h[le]=function(_){},h[Ue]=function(_){},h[Q]=function(_,b){},h[Ee]=function(_,b){},h))}var Iu=function(){function h(){var _,b,w,I,N,U,W,V,be,J,we,Re,fe,Ge,_t,Et,Mt,Nt,ur,lr=0;z(h,this,function(qe){bi(),qe.isInitialized=function(){return _},qe.initialize=function(ke,kt,Zt,Rt){fe&&Ut(Tu),qe.isInitialized()&&Ut("Core should not be initialized more than once"),(!ke||ae(ke.instrumentationKey))&&Ut("Please provide instrumentation key"),w=Rt,qe[Su]=Rt,qe.config=ke||{},op(ke),ap(ke),ke.extensions=ae(ke.extensions)?[]:ke.extensions,sp(ke),Zt&&(qe.logger=Zt),V=[],V.push.apply(V,P(P([],kt,!1),ke.extensions)),we=(ke||{}).channels,za(ke,null),(!Re||Re.length===0)&&Ut("No channels available"),_=!0,qe.releaseQueue()},qe.getTransmissionControls=function(){var ke=[];return Re&&nt(Re,function(kt){ke.push(kt.queue)}),X(ke)},qe.track=function(ke){Be(ke,qf,qe.config.instrumentationKey,null,pt),Be(ke,"time",$t(new Date),null,pt),Be(ke,"ver","4.0",null,ae),!fe&&qe.isInitialized()?Qn().processNext(ke):b.push(ke)},qe.getProcessTelContext=Qn,qe.getNotifyMgr=function(){return w||(w=Yf(),qe[Su]=w),w},qe[ge]=function(ke){w&&w[ge](ke)},qe[le]=function(ke){w&&w[le](ke)},qe.getCookieMgr=function(){return U||(U=zn(qe.config,qe.logger)),U},qe.setCookieMgr=function(ke){U=ke},qe.getPerfMgr=function(){return!I&&!N&&qe.config&&qe.config.enablePerfMgr&&ut(qe.config.createPerfMgr)&&(N=qe.config.createPerfMgr(qe,qe.getNotifyMgr())),I||N||Sc()},qe.setPerfMgr=function(ke){I=ke},qe.eventCnt=function(){return b.length},qe.releaseQueue=function(){if(_&&b.length>0){var ke=b;b=[],nt(ke,function(kt){Qn().processNext(kt)})}},qe.pollInternalLogs=function(ke){_t=ke||null;var kt=qe.config.diagnosticLogInterval;return(!kt||!(kt>0))&&(kt=1e4),lr&&clearInterval(lr),lr=setInterval(function(){Nu()},kt),lr},qe.stopPollingInternalLogs=function(){lr&&(clearInterval(lr),lr=0,Nu())},Kr(qe,function(){return Ge},["addTelemetryInitializer"]),qe.unload=function(ke,kt,Zt){ke===void 0&&(ke=!0),_||Ut($f),fe&&Ut(Tu);var Rt={reason:50,isAsync:ke,flushComplete:!1},vr=eo(Wa(),qe);vr.onComplete(function(){bi(),kt&&kt(Rt)},qe);function Ur(dn){Rt.flushComplete=dn,fe=!0,Mt.run(vr,Rt),qe.stopPollingInternalLogs(),vr.processNext(Rt)}Mu(ke,Ur,6,Zt)||Ur(!1)},qe.getPlugin=Ru,qe.addPlugin=function(ke,kt,Zt,Rt){if(!ke){Rt&&Rt(!1),ku(bu);return}var vr=Ru(ke.identifier);if(vr&&!kt){Rt&&Rt(!1),ku("Plugin ["+ke.identifier+"] is already loaded!");return}var Ur={reason:16};function dn(io){V.push(ke),Ur.added=[ke],za(qe.config,Ur),Rt&&Rt(!0)}if(vr){var bn=[vr.plugin],Xn={reason:2,isAsync:!!Zt};xu(bn,Xn,function(io){io?(Ur.removed=bn,Ur.reason|=32,dn()):Rt&&Rt(!1)})}else dn()},qe.evtNamespace=function(){return Et},qe.flush=Mu,qe.getTraceCtx=function(ke){return ur||(ur=jf()),ur},qe.setTraceCtx=function(ke){ur=ke||null},yr(qe,"addUnloadCb",function(){return Mt},"add");function bi(){_=!1,qe.config=or(!0,{},Kf),qe.logger=new Gn(qe.config),qe._extensions=[],Ge=new Wf,b=[],w=null,I=null,N=null,U=null,W=null,be=null,V=[],J=null,we=null,Re=null,fe=!1,_t=null,Et=fi("AIBaseCore",!0),Mt=Ba(),ur=null}function Qn(){return ln(Wa(),qe.config,qe)}function za(ke,kt){var Zt=Xf(qe.logger,to,V);be=Zt.core,W=null;var Rt=Zt.all;if(Re=X(zf(we,Rt,ke,qe)),J){var vr=Dt(Rt,J);vr!==-1&&Rt.splice(vr,1),vr=Dt(be,J),vr!==-1&&be.splice(vr,1),J._setQueue(Re)}else J=Vf(Re,qe);Rt.push(J),be.push(J),qe._extensions=Ji(Rt),J.initialize(ke,qe,Rt),Ha(Qn(),Rt),qe._extensions=X(Ji(be||[])).slice(),kt&&cp(kt)}function Ru(ke){var kt=null,Zt=null;return nt(qe._extensions,function(Rt){if(Rt.identifier===ke&&Rt!==J&&Rt!==Ge)return Zt=Rt,-1}),!Zt&&J&&(Zt=J.getChannel(ke)),Zt&&(kt={plugin:Zt,setEnabled:function(Rt){kn(Zt)[De]=!Rt},isEnabled:function(){var Rt=kn(Zt);return!Rt[Y]&&!Rt[De]},remove:function(Rt,vr){Rt===void 0&&(Rt=!0);var Ur=[Zt],dn={reason:1,isAsync:Rt};xu(Ur,dn,function(bn){bn&&za(qe.config,{reason:32,removed:Ur}),vr&&vr(bn)})}}),kt}function Wa(){if(!W){var ke=(be||[]).slice();Dt(ke,Ge)===-1&&ke.push(Ge),W=_n(Ji(ke),qe.config,qe)}return W}function xu(ke,kt,Zt){if(ke&&ke.length>0){var Rt=_n(ke,qe.config,qe),vr=eo(Rt,qe);vr.onComplete(function(){var Ur=!1,dn=[];nt(V,function(Xn,io){wu(Xn,ke)?Ur=!0:dn.push(Xn)}),V=dn;var bn=[];we&&(nt(we,function(Xn,io){var Lu=[];nt(Xn,function(ju){wu(ju,ke)?Ur=!0:Lu.push(ju)}),bn.push(Lu)}),we=bn),Zt&&Zt(Ur)}),vr.processNext(kt)}else Zt(!1)}function Nu(){var ke=qe.logger?qe.logger.queue:[];ke&&(nt(ke,function(kt){var Zt={name:_t||"InternalMessageId: "+kt.messageId,iKey:qe.config.instrumentationKey,time:$t(new Date),baseType:Gi.dataType,baseData:{message:kt.message}};qe.track(Zt)}),ke.length=0)}function Mu(ke,kt,Zt,Rt){return J?J.flush(ke,kt,Zt||6,Rt):(kt&&kt(!1),!0)}function op(ke){ke.disableDbgExt===!0&&Nt&&(w[le](Nt),Nt=null),w&&!Nt&&ke.disableDbgExt!==!0&&(Nt=hc(ke),w[ge](Nt))}function ap(ke){!ke.enablePerfMgr&&N&&(N=null),ke.enablePerfMgr&&Be(qe.config,"createPerfMgr",Qf)}function sp(ke){var kt=it(ke,yu);kt.NotificationManager=w}function cp(ke){var kt=Fa(Wa(),qe);(!qe._updateHook||qe._updateHook(kt,ke)!==!0)&&kt.processNext(ke)}function ku(ke){var kt=qe.logger;kt?Nn(kt,2,73,ke):Ut(ke)}})}return h}();function ro(h,_,b,w){nt(h,function(I){if(I&&I[_])if(b)setTimeout(function(){return w(I)},0);else try{w(I)}catch{}})}var Au=function(){function h(_){this.listeners=[];var b=!!(_||{}).perfEvtsSendAll;z(h,this,function(w){w[ge]=function(I){w.listeners.push(I)},w[le]=function(I){for(var N=Dt(w.listeners,I);N>-1;)w.listeners.splice(N,1),N=Dt(w.listeners,I)},w[Ue]=function(I){ro(w.listeners,Ue,!0,function(N){N[Ue](I)})},w[Q]=function(I,N){ro(w.listeners,Q,!0,function(U){U[Q](I,N)})},w[Ee]=function(I,N){ro(w.listeners,Ee,N,function(U){U[Ee](I,N)})},w[se]=function(I){I&&(b||!I.isChildEvt())&&ro(w.listeners,se,!1,function(N){I.isAsync?setTimeout(function(){return N[se](I)},0):N[se](I)})}})}return h}(),Zf=function(h){O(_,h);function _(){var b=h.call(this)||this;return z(_,b,function(w,I){w.initialize=function(W,V,be,J){I.initialize(W,V,be||new Gn(W),J||new Au(W))},w.track=function(W){Ea(w.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){W===null&&(U(W),Ut("Invalid telemetry item")),N(W),I.track(W)},function(){return{item:W}},!W.sync)};function N(W){ae(W.name)&&(U(W),Ut("telemetry name required"))}function U(W){var V=w.getNotifyMgr();V&&V.eventsDiscarded([W],2)}}),b}return _}(Iu),Jf=xr({CRITICAL:1,WARNING:2}),ep=xr({BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103,FailedAddingCustomDefinedRequestContext:104,InMemoryStorageBufferFull:105,InstrumentationKeyDeprecation:106}),Ou="_aiHooks",Pu=["req","rsp","hkErr","fnErr"];function no(h,_){if(h)for(var b=0;b<h.length&&!_(h[b],b);b++);}function qa(h,_,b,w,I){I>=0&&I<=2&&no(h,function(N,U){var W=N.cbks,V=W[Pu[I]];if(V){_.ctx=function(){var we=w[U]=w[U]||{};return we};try{V.apply(_.inst,b)}catch(we){var be=_.err;try{var J=W[Pu[2]];J&&(_.err=we,J.apply(_.inst,b))}catch{}finally{_.err=be}}}})}function tp(h){return function(){var _=this,b=arguments,w=h.h,I={name:h.n,inst:_,ctx:null,set:V},N=[],U=W([I],b);I.evt=hr("event");function W(J,we){return no(we,function(Re){J.push(Re)}),J}function V(J,we){b=W([],b),b[J]=we,U=W([I],b)}qa(w,I,U,N,0);var be=h.f;if(be)try{I.rslt=be.apply(_,b)}catch(J){throw I.err=J,qa(w,I,U,N,3),J}return qa(w,I,U,N,1),I.rslt}}function Ga(h,_,b){var w=null;return h&&(Le(h,_)?w=h:b&&(w=Ga($e(h),_,!1))),w}function rp(h,_,b){return h?Va(h[a],_,b,!1):null}function np(h,_,b){return h?Du(h[a],_,b,!1):null}function Cu(h,_,b,w){var I=b&&b[Ou];if(!I){I={i:0,n:_,f:b,h:[]};var N=tp(I);N[Ou]=I,h[_]=N}var U={id:I.i,cbks:w,rm:function(){var W=this.id;no(I.h,function(V,be){if(V.id===W)return I.h.splice(be,1),1})}};return I.i++,I.h.push(U),U}function Va(h,_,b,w){if(w===void 0&&(w=!0),h&&_&&b){var I=Ga(h,_,w);if(I){var N=I[_];if(typeof N===t)return Cu(I,_,N,b)}}return null}function Du(h,_,b,w){w===void 0&&(w=!0);var I=null;return no(_,function(N){var U=Va(h,N,b,w);U&&(I||(I=[]),I.push(U))}),I}function ip(h,_,b,w){if(h&&_&&b){var I=Ga(h,_,w)||h;if(I)return Cu(I,_,I[_],b)}return null}e.AppInsightsCore=Zf,e.BaseCore=Iu,e.BaseTelemetryPlugin=Eu,e.CoreUtils=xa,e.DiagnosticLogger=Gn,e.EventHelper=wf,e.EventsDiscardedReason=Ar,e.InstrumentEvent=ip,e.InstrumentFunc=Va,e.InstrumentFuncs=Du,e.InstrumentProto=rp,e.InstrumentProtos=np,e.LoggingSeverity=Jf,e.MinChannelPriorty=n,e.NotificationManager=Au,e.PerfEvent=ui,e.PerfManager=bc,e.ProcessTelemetryContext=Bf,e.Undefined=Sf,e._InternalLogMessage=Gi,e._InternalMessageId=ep,e.__getRegisteredEvents=vf,e._legacyCookieMgr=Kn,e._logInternalMessage=tf,e._throwInternal=Nn,e._warnToConsole=_c,e.addEventHandler=Ra,e.addEventListeners=ou,e.addPageHideEventListener=au,e.addPageShowEventListener=su,e.addPageUnloadEventListener=yf,e.areCookiesSupported=Pa,e.arrForEach=nt,e.arrIndexOf=Dt,e.arrMap=lt,e.arrReduce=gt,e.attachEvent=Ca,e.canUseCookies=If,e.createClassFromInterface=Vr,e.createCookieMgr=zn,e.createEnumMap=Qr,e.createEnumStyle=xr,e.createProcessTelemetryContext=ln,e.createTraceParent=Df,e.createUniqueNamespace=fi,e.createUnloadHandlerContainer=Ba,e.createValueMap=Nr,e.dateNow=He,e.deepFreeze=L,e.deleteCookie=Pf,e.detachEvent=Da,e.disableCookies=lu,e.doPerf=Ea,e.dumpObj=mn,e.eventOff=yi,e.eventOn=gi,e.findMetaTag=fc,e.findNamedServerTiming=pc,e.findW3cTraceParent=Nf,e.formatTraceParent=xf,e.generateW3CId=Xi,e.getConsole=sc,e.getCookie=Af,e.getCrypto=cc,e.getDebugExt=ya,e.getDebugListener=hc,e.getDocument=vn,e.getExceptionName=dt,e.getGblPerfMgr=Sc,e.getGlobal=m,e.getGlobalInst=hr,e.getHistory=Bd,e.getIEVersion=Gd,e.getJSON=ma,e.getLocation=ac,e.getMsCrypto=uc,e.getNavigator=xn,e.getPerformance=va,e.getSetValue=it,e.getWindow=pa,e.hasDocument=ic,e.hasHistory=oc,e.hasJSON=Fi,e.hasNavigator=ha,e.hasOwnProperty=Le,e.hasWindow=fa,e.initializePlugins=Ha,e.isArray=Z,e.isBeaconsSupported=zd,e.isBoolean=bt,e.isDate=Se,e.isError=ze,e.isFetchSupported=Wd,e.isFunction=ut,e.isIE=ci,e.isNotNullOrUndefined=Ie,e.isNotTruthy=pt,e.isNotUndefined=Ye,e.isNullOrUndefined=ae,e.isNumber=mt,e.isObject=he,e.isReactNative=qd,e.isSafari=Vd,e.isSampledFlag=Rf,e.isString=pe,e.isSymbol=Ct,e.isTruthy=St,e.isTypeof=wt,e.isUndefined=Oe,e.isValidSpanId=ja,e.isValidTraceId=La,e.isValidTraceParent=hu,e.isXhrSupported=lc,e.mergeEvtNamespace=mi,e.mwcRandom32=Sa,e.mwcRandomSeed=Oc,e.newGuid=cu,e.newId=Ta,e.normalizeJsName=Bt,e.objCreate=E,e.objDefineAccessors=D,e.objExtend=or,e.objForEachKey=Ze,e.objFreeze=X,e.objKeys=C,e.objSeal=te,e.objToString=Tt,e.optimizeObject=on,e.parseTraceParent=ka,e.perfNow=uu,e.proxyAssign=pr,e.proxyFunctionAs=yr,e.proxyFunctions=Kr,e.random32=Mn,e.randomValue=ba,e.removeEventHandler=iu,e.removeEventListeners=$n,e.removePageHideEventListener=Ef,e.removePageShowEventListener=bf,e.removePageUnloadEventListener=_f,e.safeGetCookieMgr=uf,e.safeGetLogger=gc,e.setCookie=Of,e.setEnableEnvMocks=Fd,e.setGblPerfMgr=rf,e.setValue=Be,e.sortPlugins=Ji,e.strContains=je,e.strEndsWith=Kt,e.strFunction=t,e.strObject=r,e.strPrototype=a,e.strStartsWith=Ir,e.strTrim=f,e.strUndefined=s,e.throwError=Ut,e.toISOString=$t,e.uaDisallowsSameSiteNone=Gc,e.unloadComponents=Lf,e.useXDomainRequest=$d,function(h,_,b){var w=Object.defineProperty;if(w)try{return w(h,_,b)}catch{}return b&&typeof b.value!==void 0&&(h[_]=b.value),h}(e,"__esModule",{value:!0})})});var Xa=qt((Ka,Qa)=>{"use strict";(function(e,n){typeof Ka=="object"&&typeof Qa<"u"?Qa.exports=n():typeof define=="function"&&define.amd?define(n):(e=typeof globalThis<"u"?globalThis:e||self,e.Microsoft=e.Microsoft||{},e.Microsoft["DynamicProto-JS"]=n())})(Ka,function(){"use strict";var e="constructor",n="prototype",t="function",r="_dynInstFuncs",s="_isDynProxy",a="_dynClass",o="_dynCls$",i="_dynInstChk",c=i,l="_dfOpts",d="_unknown_",u="__proto__",p="_dyn"+u,v="_dynInstProto",m="useBaseInst",g="setInstFuncs",E=Object,T=E.getPrototypeOf,O=E.getOwnPropertyNames,P=0;function A(Q,Ee){return Q&&E[n].hasOwnProperty.call(Q,Ee)}function M(Q){return Q&&(Q===E[n]||Q===Array[n])}function j(Q){return M(Q)||Q===Function[n]}function G(Q){var Ee;if(Q){if(T)return T(Q);var se=Q[u]||Q[n]||(Q[e]?Q[e][n]:null);Ee=Q[p]||se,A(Q,p)||(delete Q[v],Ee=Q[p]=Q[v]||Q[p],Q[v]=se)}return Ee}function q(Q,Ee){var se=[];if(O)se=O(Q);else for(var We in Q)typeof We=="string"&&A(Q,We)&&se.push(We);if(se&&se.length>0)for(var rt=0;rt<se.length;rt++)Ee(se[rt])}function Y(Q,Ee,se){return Ee!==e&&typeof Q[Ee]===t&&(se||A(Q,Ee))}function ne(Q){throw new TypeError("DynamicProto: "+Q)}function _e(Q){var Ee={};return q(Q,function(se){!Ee[se]&&Y(Q,se,!1)&&(Ee[se]=Q[se])}),Ee}function De(Q,Ee){for(var se=Q.length-1;se>=0;se--)if(Q[se]===Ee)return!0;return!1}function ct(Q,Ee,se,We){function rt(ve,Ve,Ae){var Ne=Ve[Ae];if(Ne[s]&&We){var Xe=ve[r]||{};Xe[c]!==!1&&(Ne=(Xe[Ve[a]]||{})[Ae]||Ne)}return function(){return Ne.apply(ve,arguments)}}var $={};q(se,function(ve){$[ve]=rt(Ee,se,ve)});for(var ee=G(Q),re=[];ee&&!j(ee)&&!De(re,ee);)q(ee,function(ve){!$[ve]&&Y(ee,ve,!T)&&($[ve]=rt(Ee,ee,ve))}),re.push(ee),ee=G(ee);return $}function ot(Q,Ee,se,We){var rt=null;if(Q&&A(se,a)){var $=Q[r]||{};if(rt=($[se[a]]||{})[Ee],rt||ne("Missing ["+Ee+"] "+t),!rt[i]&&$[c]!==!1){for(var ee=!A(Q,Ee),re=G(Q),ve=[];ee&&re&&!j(re)&&!De(ve,re);){var Ve=re[Ee];if(Ve){ee=Ve===We;break}ve.push(re),re=G(re)}try{ee&&(Q[Ee]=rt),rt[i]=1}catch{$[c]=!1}}}return rt}function xt(Q,Ee,se){var We=Ee[Q];return We===se&&(We=G(Ee)[Q]),typeof We!==t&&ne("["+Q+"] is not a "+t),We}function at(Q,Ee,se,We,rt){function $(ve,Ve){var Ae=function(){var Ne=ot(this,Ve,ve,Ae)||xt(Ve,ve,Ae);return Ne.apply(this,arguments)};return Ae[s]=1,Ae}if(!M(Q)){var ee=se[r]=se[r]||{},re=ee[Ee]=ee[Ee]||{};ee[c]!==!1&&(ee[c]=!!rt),q(se,function(ve){Y(se,ve,!1)&&se[ve]!==We[ve]&&(re[ve]=se[ve],delete se[ve],(!A(Q,ve)||Q[ve]&&!Q[ve][s])&&(Q[ve]=$(Q,ve)))})}}function oe(Q,Ee){if(T){for(var se=[],We=G(Ee);We&&!j(We)&&!De(se,We);){if(We===Q)return!0;se.push(We),We=G(We)}return!1}return!0}function ge(Q,Ee){return A(Q,n)?Q.name||Ee||d:((Q||{})[e]||{}).name||Ee||d}function le(Q,Ee,se,We){A(Q,n)||ne("theClass is an invalid class definition.");var rt=Q[n];oe(rt,Ee)||ne("["+ge(Q)+"] is not in class hierarchy of ["+ge(Ee)+"]");var $=null;A(rt,a)?$=rt[a]:($=o+ge(Q,"_")+"$"+P,P++,rt[a]=$);var ee=le[l],re=!!ee[m];re&&We&&We[m]!==void 0&&(re=!!We[m]);var ve=_e(Ee),Ve=ct(rt,Ee,ve,re);se(Ee,Ve);var Ae=!!T&&!!ee[g];Ae&&We&&(Ae=!!We[g]),at(rt,$,Ee,ve,Ae!==!1)}var Ue={setInstFuncs:!0,useBaseInst:!0};return le[l]=Ue,le})});var Ya=qt((co,qu)=>{"use strict";(function(e,n){typeof co=="object"&&typeof qu<"u"?n(co,$a(),Bu(),Xa()):typeof define=="function"&&define.amd?define(["exports","@microsoft/applicationinsights-shims","@microsoft/applicationinsights-core-js","@microsoft/dynamicproto-js"],n):(e=typeof globalThis<"u"?globalThis:e||self,n(e.oneDS=e.oneDS||{},e.applicationinsightsShims,e.applicationinsightsCoreJs,e.dynamicProto))})(co,function(e,n,t,r){"use strict";function s(ie){return ie&&typeof ie=="object"&&"default"in ie?ie.default:ie}var a=s(r),o=t.createEnumStyle({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),i=t.createEnumStyle({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),c=t.createEnumStyle({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),l=t.createEnumStyle({Normal:1,Critical:2}),d=t.createEnumStyle({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),u=t.objFreeze(n.__assignFn(n.__assignFn({},t._InternalMessageId),t.createEnumStyle({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}))),p,v="3.2.3",m="1DS-Web-JS-"+v,g="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",E="withCredentials",T="timeout",O=(p={},p[0]=0,p[2]=6,p[1]=1,p[3]=7,p[4098]=6,p[4097]=1,p[4099]=7,p),P=null,A=!!t.getDocument(),M=!!t.getWindow();function j(ie){return!(ie===""||t.isNullOrUndefined(ie))}function G(ie){if(ie){var K=ie.indexOf("-");if(K>-1)return ie.substring(0,K)}return""}function q(){return P===null&&(P=!t.isUndefined(Uint8Array)&&!Ee()&&!t.isReactNative()),P}function Y(ie){return!!(ie&&t.isNumber(ie)&&ie>=1&&ie<=4)}function ne(ie,K,xe){if(!K&&!j(K)||typeof ie!="string")return null;var Te=typeof K;if(Te==="string"||Te==="number"||Te==="boolean"||t.isArray(K))K={value:K};else if(Te==="object"&&!K.hasOwnProperty("value"))K={value:xe?JSON.stringify(K):K};else if(t.isNullOrUndefined(K.value)||K.value===""||!t.isString(K.value)&&!t.isNumber(K.value)&&!t.isBoolean(K.value)&&!t.isArray(K.value))return null;if(t.isArray(K.value)&&!se(K.value))return null;if(!t.isNullOrUndefined(K.kind)){if(t.isArray(K.value)||!Ue(K.kind))return null;K.value=K.value.toString()}return K}function _e(ie,K,xe){var Te=-1;if(!t.isUndefined(ie))if(K>0&&(K===32?Te=8192:K<=13&&(Te=K<<5)),Q(xe))Te===-1&&(Te=0),Te|=xe;else{var vt=O[rt(ie)]||-1;Te!==-1&&vt!==-1?Te|=vt:vt===6&&(Te=vt)}return Te}function De(){t.safeGetCookieMgr(null).setEnabled(!1)}function ct(ie,K,xe){t.areCookiesSupported(null)&&t.safeGetCookieMgr(null).set(ie,K,xe*86400,null,"/")}function ot(ie){t.areCookiesSupported(null)&&t.safeGetCookieMgr(null).del(ie)}function xt(ie){return t.areCookiesSupported(null)?at(t.safeGetCookieMgr(null),ie):""}function at(ie,K,xe){xe===void 0&&(xe=!0);var Te;return ie&&(Te=ie.get(K),xe&&Te&&decodeURIComponent&&(Te=decodeURIComponent(Te))),Te||""}function oe(ie){ie===void 0&&(ie="D");var K=t.newGuid();return ie==="B"?K="{"+K+"}":ie==="P"?K="("+K+")":ie==="N"&&(K=K.replace(/-/g,"")),K}function ge(ie,K,xe,Te,vt){var Ke={},Fe=!1,$e=0,Tt=arguments.length,wt=Object[t.strPrototype],Oe=arguments;for(wt.toString.call(Oe[0])==="[object Boolean]"&&(Fe=Oe[0],$e++);$e<Tt;$e++){var ie=Oe[$e];t.objForEachKey(ie,function(ae,Ie){Fe&&Ie&&t.isObject(Ie)?t.isArray(Ie)?(Ke[ae]=Ke[ae]||[],t.arrForEach(Ie,function(Le,he){Le&&t.isObject(Le)?Ke[ae][he]=ge(!0,Ke[ae][he],Le):Ke[ae][he]=Le})):Ke[ae]=ge(!0,Ke[ae],Ie):Ke[ae]=Ie})}return Ke}var le=t.perfNow;function Ue(ie){return ie===0||ie>0&&ie<=13||ie===32}function Q(ie){return ie>=0&&ie<=9}function Ee(){var ie=t.getNavigator();if(!t.isUndefined(ie)&&ie.userAgent){var K=ie.userAgent.toLowerCase();if((K.indexOf("safari")>=0||K.indexOf("firefox")>=0)&&K.indexOf("chrome")<0)return!0}return!1}function se(ie){return ie.length>0}function We(ie,K){var xe=ie;xe.timings=xe.timings||{},xe.timings.processTelemetryStart=xe.timings.processTelemetryStart||{},xe.timings.processTelemetryStart[K]=le()}function rt(ie){var K=0;if(ie!=null){var xe=typeof ie;xe==="string"?K=1:xe==="number"?K=2:xe==="boolean"?K=3:xe===n.strShimObject&&(K=4,t.isArray(ie)?(K=4096,ie.length>0&&(K|=rt(ie[0]))):t.hasOwnProperty(ie,"value")&&(K=8192|rt(ie.value)))}return K}var $={Version:v,FullVersionString:m,strUndefined:t.strUndefined,strObject:t.strObject,Undefined:t.strUndefined,arrForEach:t.arrForEach,arrIndexOf:t.arrIndexOf,arrMap:t.arrMap,arrReduce:t.arrReduce,objKeys:t.objKeys,toISOString:t.toISOString,isReactNative:t.isReactNative,isString:t.isString,isNumber:t.isNumber,isBoolean:t.isBoolean,isFunction:t.isFunction,isArray:t.isArray,isObject:t.isObject,strTrim:t.strTrim,isDocumentObjectAvailable:A,isWindowObjectAvailable:M,isValueAssigned:j,getTenantId:G,isBeaconsSupported:t.isBeaconsSupported,isUint8ArrayAvailable:q,isLatency:Y,sanitizeProperty:ne,getISOString:t.toISOString,useXDomainRequest:t.useXDomainRequest,getCommonSchemaMetaData:_e,cookieAvailable:t.areCookiesSupported,disallowsSameSiteNone:t.uaDisallowsSameSiteNone,setCookie:ct,deleteCookie:ot,getCookie:xt,createGuid:oe,extend:ge,getTime:le,isValueKind:Ue,isArrayValid:se,objDefineAccessors:t.objDefineAccessors,addPageUnloadEventListener:t.addPageUnloadEventListener,setProcessTelemetryTimings:We,addEventHandler:t.addEventHandler,getFieldValueType:rt,strEndsWith:t.strEndsWith,objForEachKey:t.objForEachKey},ee={_canUseCookies:void 0,isTypeof:t.isTypeof,isUndefined:t.isUndefined,isNullOrUndefined:t.isNullOrUndefined,hasOwnProperty:t.hasOwnProperty,isFunction:t.isFunction,isObject:t.isObject,isDate:t.isDate,isArray:t.isArray,isError:t.isError,isString:t.isString,isNumber:t.isNumber,isBoolean:t.isBoolean,toISOString:t.toISOString,arrForEach:t.arrForEach,arrIndexOf:t.arrIndexOf,arrMap:t.arrMap,arrReduce:t.arrReduce,strTrim:t.strTrim,objCreate:n.objCreateFn,objKeys:t.objKeys,objDefineAccessors:t.objDefineAccessors,addEventHandler:t.addEventHandler,dateNow:t.dateNow,isIE:t.isIE,disableCookies:De,newGuid:t.newGuid,perfNow:t.perfNow,newId:t.newId,randomValue:t.randomValue,random32:t.random32,mwcRandomSeed:t.mwcRandomSeed,mwcRandom32:t.mwcRandom32,generateW3CId:t.generateW3CId};function re(){return!!t.getGlobalInst("chrome")}function ve(ie,K,xe,Te,vt,Ke){Te===void 0&&(Te=!1),vt===void 0&&(vt=!1);function Fe(Tt,wt,Oe){try{Tt[wt]=Oe}catch{}}var $e=new XMLHttpRequest;return Te&&Fe($e,g,Te),xe&&Fe($e,E,xe),$e.open(ie,K,!vt),xe&&Fe($e,E,xe),!vt&&Ke&&Fe($e,T,Ke),$e}var Ve="version",Ae="properties",Ne=function(ie){n.__extendsFn(K,ie);function K(){var xe=ie.call(this)||this;return xe.pluginVersionStringArr=[],xe.pluginVersionString="",a(K,xe,function(Te,vt){(!Te.logger||!Te.logger.queue)&&(Te.logger=new t.DiagnosticLogger({loggingLevelConsole:1})),Te.initialize=function(Ke,Fe,$e,Tt){t.doPerf(Te,function(){return"AppInsightsCore.initialize"},function(){if(Ke){Ke.endpointUrl||(Ke.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var wt=Ke.propertyStorageOverride;if(wt&&(!wt.getProperty||!wt.setProperty))throw new Error("Invalid property storage override passed.");Ke.channels&&t.arrForEach(Ke.channels,function(ae){ae&&t.arrForEach(ae,function(Ie){if(Ie.identifier&&Ie.version){var Le=Ie.identifier+"="+Ie.version;Te.pluginVersionStringArr.push(Le)}})})}Te.getWParam=function(){return typeof document<"u"?0:-1},Fe&&t.arrForEach(Fe,function(ae){if(ae&&ae.identifier&&ae.version){var Ie=ae.identifier+"="+ae.version;Te.pluginVersionStringArr.push(Ie)}}),Te.pluginVersionString=Te.pluginVersionStringArr.join(";");try{vt.initialize(Ke,Fe,$e,Tt),Te.pollInternalLogs("InternalLog")}catch(ae){var Oe=Te.logger,Ye=t.dumpObj(ae);Ye.indexOf("channels")!==-1&&(Ye+=`
 - Channels must be provided through config.channels only!`),Oe.throwInternal(1,514,"SDK Initialization Failed - no telemetry will be sent: "+Ye)}},function(){return{config:Ke,extensions:Fe,logger:$e,notificationManager:Tt}})},Te.track=function(Ke){t.doPerf(Te,function(){return"AppInsightsCore.track"},function(){var Fe=Ke;if(Fe){Fe.timings=Fe.timings||{},Fe.timings.trackStart=le(),Y(Fe.latency)||(Fe.latency=1);var $e=Fe.ext=Fe.ext||{};$e.sdk=$e.sdk||{},$e.sdk.ver=m;var Tt=Fe.baseData=Fe.baseData||{};Tt[Ae]||(Tt[Ae]={});var wt=Tt[Ae];wt[Ve]||(wt[Ve]=""),Te.pluginVersionString!==""&&(wt[Ve]=Te.pluginVersionString)}vt.track(Fe)},function(){return{item:Ke}},!Ke.sync)}}),xe}return K}(t.AppInsightsCore),Xe=function(ie){n.__extendsFn(K,ie);function K(){var xe=ie.call(this)||this;return a(K,xe,function(Te,vt){Te.initialize=function(Ke,Fe,$e,Tt){Ke&&!Ke.endpointUrl&&(Ke.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/"),Te.getWParam=function(){return A?0:-1};try{vt.initialize(Ke,Fe,$e,Tt)}catch(wt){t._throwInternal(Te.logger,1,514,"Initialization Failed: "+t.dumpObj(wt)+`
 - Note: Channels must be provided through config.channels only`)}},Te.track=function(Ke){var Fe=Ke;if(Fe){var $e=Fe.ext=Fe.ext||{};$e.sdk=$e.sdk||{},$e.sdk.ver=m}vt.track(Fe)}}),xe}return K}(t.BaseCore),Ot=t.isFunction;function Sr(ie,K,xe){return function(Te){ie[K]=Te,xe()}}var mr=function(){function ie(K){var xe=0,Te=null,vt=[];a(ie,this,function(wt){wt.then=function(Oe,Ye){return new ie(function(ae,Ie){Ke(Oe,Ye,ae,Ie)})},wt.catch=function(Oe){return wt.then(null,Oe)}});function Ke(wt,Oe,Ye,ae){vt.push(function(){var Ie;try{xe===1?Ie=Ot(wt)?wt(Te):Te:Ie=Ot(Oe)?Oe(Te):Te,Ie instanceof ie?Ie.then(Ye,ae):xe===2&&!Ot(Oe)?ae(Ie):Ye(Ie)}catch(Le){ae(Le);return}}),xe!==0&&Fe()}function Fe(){if(vt.length>0){var wt=vt.slice();vt=[],setTimeout(function(){for(var Oe=0,Ye=wt.length;Oe<Ye;++Oe)try{wt[Oe]()}catch{}},0)}}function $e(wt){xe===0&&(Te=wt,xe=1,Fe())}function Tt(wt){xe===0&&(Te=wt,xe=2,Fe())}(function(){if(!Ot(K))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{K($e,Tt)}catch(Oe){Tt(Oe)}})()}return ie.resolve=function(K){return K instanceof ie?K:K&&Ot(K.then)?new ie(function(xe,Te){try{K.then(xe,Te)}catch(vt){Te(vt)}}):new ie(function(xe){xe(K)})},ie.reject=function(K){return new ie(function(xe,Te){Te(K)})},ie.all=function(K){if(!(!K||!K.length))return new ie(function(xe,Te){try{for(var vt=[],Ke=0,Fe=0;Fe<K.length;Fe++){var $e=K[Fe];$e&&Ot($e.then)?(Ke++,$e.then(Sr(vt,Fe,function(){--Ke===0&&xe(vt)}),Te)):vt[Fe]=$e}Ke===0&&setTimeout(function(){xe(vt)},0)}catch(Tt){Te(Tt)}})},ie.race=function(K){return new ie(function(xe,Te){if(!(!K||!K.length))try{for(var vt=function(Fe){var $e=K[Fe];$e&&Ot($e.then)?$e.then(xe,Te):setTimeout(function(){xe($e)},0)},Ke=0;Ke<K.length;Ke++)vt(Ke)}catch(Fe){Te(Fe)}})},ie}(),ce=6e5,Tr=0,nr=[],Wt=[],Ft=[];function sr(){return new Date().getTime()}var ir=function(){function ie(K,xe){var Te=0,vt=(K||"<unnamed>")+"."+Tr;Tr++,a(ie,this,function($e){var Tt=null,wt=0;$e.scheduleEvent=function(Ye,ae,Ie){var Le=vt+"."+wt;wt++,ae&&(Le+="-("+ae+")");var he=Le+"{"+Te+"}";Te++;var ut={evt:null,tm:sr(),id:he,isRunning:!1,isAborted:!1};return Tt?ut.evt=je(ut,Tt):ut.evt=Me(ut),Tt=ut,Tt.evt._schId=he,ut.evt;function Bt(Se){for(var Z=sr(),et=Z-ce,ze=Se.length,pe=0;pe<ze;){var mt=Se[pe];if(mt&&mt.tm<et){var bt=null;mt.abort?(bt="Aborting ["+mt.id+"] due to Excessive runtime ("+(Z-mt.tm)+" ms)",mt.abort(bt)):bt="Removing ["+mt.id+"] due to Excessive runtime ("+(Z-mt.tm)+" ms)",Fe(bt),Se.splice(pe,1),ze--}else pe++}}function Ze(Se,Z){var et=!1,ze=Oe(nr,Se);if(ze||(ze=Oe(Ft,Se),et=!0),ze){ze.to&&(clearTimeout(ze.to),ze.to=null);var pe=sr()-ze.tm;Z?et?Fe("Timed out event ["+Se+"] finally complete -- "+pe+" ms"):Ke("Promise ["+Se+"] Complete -- "+pe+" ms"):(Ft.push(ze),Fe("Event ["+Se+"] Timed out and removed -- "+pe+" ms"))}else Ke("Failed to remove ["+Se+"] from running queue");Tt&&Tt.id===Se&&(Tt=null),Bt(nr),Bt(Wt),Bt(Ft)}function Kt(Se,Z){return function(et){return Ze(Se,!0),Z&&Z(et),et}}function gr(Se,Z,et,ze){Z.then(function(pe){return pe instanceof mr?(Ke("Event ["+Se+"] returned a promise -- waiting"),gr(Se,pe,et,ze),pe):Kt(Se,et)(pe)},Kt(Se,ze))}function Ir(Se,Z){var et=Se.id;return new mr(function(ze,pe){Ke("Event ["+et+"] Starting -- waited for "+(Se.wTm||"--")+" ms"),Se.isRunning=!0,Se.abort=function(bt){Se.abort=null,Se.isAborted=!0,Ze(et,!1),pe(new Error(bt))};var mt=Z(et);mt instanceof mr?(Ie&&(Se.to=setTimeout(function(){Ze(et,!1),pe(new Error("Timed out after ["+Ie+"] ms"))},Ie)),gr(et,mt,function(bt){Ke("Event ["+et+"] Resolving after "+(sr()-Se.tm)+" ms"),ze(bt)},pe)):(Ke("Promise ["+et+"] Auto completed as the start action did not return a promise"),ze())})}function Me(Se){var Z=sr();return Se.wTm=Z-Se.tm,Se.tm=Z,Se.isAborted?mr.reject(new Error("["+Le+"] was aborted")):(nr.push(Se),Ir(Se,Ye))}function je(Se,Z){var et=new mr(function(ze,pe){var mt=sr()-Z.tm,bt=Z.id;Ke("["+Le+"] is waiting for ["+bt+":"+mt+" ms] to complete before starting -- ["+Wt.length+"] waiting and ["+nr.length+"] running"),Se.abort=function(Ct){Se.abort=null,Oe(Wt,Le),Se.isAborted=!0,pe(new Error(Ct))},Z.evt.then(function(Ct){Oe(Wt,Le),Me(Se).then(ze,pe)},function(Ct){Oe(Wt,Le),Me(Se).then(ze,pe)})});return Wt.push(Se),et}};function Oe(Ye,ae){for(var Ie=0;Ie<Ye.length;Ie++)if(Ye[Ie].id===ae)return Ye.splice(Ie,1)[0];return null}});function Ke($e){var Tt=t.getGlobal();Tt&&Tt.QUnit&&console&&console.log("ESPromiseScheduler["+vt+"] "+$e)}function Fe($e){xe&&xe.warnToConsole("ESPromiseScheduler["+vt+"] "+$e)}}return ie.incomplete=function(){return nr},ie.waitingToStart=function(){return Wt},ie}(),wr=function(){function ie(K){var xe=this,Te={},vt=[],Ke=[];K&&Ke.push(K);function Fe(Oe,Ye){var ae,Ie=Te[Oe];if(Ie&&(ae=Ie[Ye]),!ae&&ae!==null){if(t.isString(Oe)&&t.isString(Ye))if(Ke.length>0){for(var Le=0;Le<Ke.length;Le++)if(Ke[Le].handleField(Oe,Ye)){ae={canHandle:!0,fieldHandler:Ke[Le]};break}}else vt.length===0&&(ae={canHandle:!0});if(!ae&&ae!==null){ae=null;for(var Le=0;Le<vt.length;Le++)if(vt[Le].handleField(Oe,Ye)){ae={canHandle:!0,handler:vt[Le],fieldHandler:null};break}}Ie||(Ie=Te[Oe]={}),Ie[Ye]=ae}return ae}xe.addSanitizer=function(Oe){Oe&&(vt.push(Oe),Te={})},xe.addFieldSanitizer=function(Oe){Oe&&(Ke.push(Oe),Te={})},xe.handleField=function(Oe,Ye){var ae=Fe(Oe,Ye);return ae?ae.canHandle:!1},xe.value=function(Oe,Ye,ae,Ie){var Le=Fe(Oe,Ye);if(Le&&Le.canHandle){if(!Le||!Le.canHandle)return null;if(Le.handler)return Le.handler.value(Oe,Ye,ae,Ie);if(!t.isString(Ye)||t.isNullOrUndefined(ae)||ae==="")return null;var he=null,ut=rt(ae);if((ut&8192)===8192){var Bt=ut&-8193;if(he=ae,!j(he.value)||Bt!==1&&Bt!==2&&Bt!==3&&(Bt&4096)!==4096)return null}else ut===1||ut===2||ut===3||(ut&4096)===4096?he=Tt(Oe,Ye,ae):ut===4&&(he=Tt(Oe,Ye,Ie?JSON.stringify(ae):ae));if(he)return $e(Le,Oe,Ye,ut,he,Ie)}return null},xe.property=function(Oe,Ye,ae,Ie){var Le=Fe(Oe,Ye);if(!Le||!Le.canHandle||!t.isString(Ye)||t.isNullOrUndefined(ae)||!j(ae.value))return null;var he=rt(ae.value);return he===0?null:$e(Le,Oe,Ye,he,ae,Ie)};function $e(Oe,Ye,ae,Ie,Le,he){if(Oe.handler)return Oe.handler.property(Ye,ae,Le,he);if(!t.isNullOrUndefined(Le.kind)){if((Ie&4096)===4096||!Ue(Le.kind))return null;Le.value=Le.value.toString()}return wt(Oe.fieldHandler,Ye,ae,Ie,Le)}function Tt(Oe,Ye,ae){return j(ae)?{value:ae}:null}function wt(Oe,Ye,ae,Ie,Le){if(Le&&Oe){var he=Oe.getSanitizer(Ye,ae,Ie,Le.kind,Le.propertyType);if(he)if(Ie===4){var ut={},Bt=Le.value;t.objForEachKey(Bt,function(Kt,gr){var Ir=Ye+"."+ae;if(j(gr)){var Me=Tt(Ir,Kt,gr);Me=wt(Oe,Ir,Kt,rt(gr),Me),Me&&(ut[Kt]=Me.value)}}),Le.value=ut}else{var Ze={path:Ye,name:ae,type:Ie,prop:Le,sanitizer:xe};Le=he.call(xe,Ze)}}return Le}}return ie.getFieldType=rt,ie}();e.BaseTelemetryPlugin=t.BaseTelemetryPlugin,e.DiagnosticLogger=t.DiagnosticLogger,e.EventHelper=t.EventHelper,e.EventsDiscardedReason=t.EventsDiscardedReason,e.InternalAppInsightsCore=t.AppInsightsCore,e.InternalBaseCore=t.BaseCore,e.LoggingSeverity=t.LoggingSeverity,e.MinChannelPriorty=t.MinChannelPriorty,e.NotificationManager=t.NotificationManager,e.PerfEvent=t.PerfEvent,e.PerfManager=t.PerfManager,e.ProcessTelemetryContext=t.ProcessTelemetryContext,e.Undefined=t.strUndefined,e._InternalLogMessage=t._InternalLogMessage,e._InternalMessageId=t._InternalMessageId,e.__getRegisteredEvents=t.__getRegisteredEvents,e._throwInternal=t._throwInternal,e.addEventHandler=t.addEventHandler,e.addEventListeners=t.addEventListeners,e.addPageHideEventListener=t.addPageHideEventListener,e.addPageShowEventListener=t.addPageShowEventListener,e.addPageUnloadEventListener=t.addPageUnloadEventListener,e.areCookiesSupported=t.areCookiesSupported,e.arrForEach=t.arrForEach,e.arrIndexOf=t.arrIndexOf,e.arrMap=t.arrMap,e.arrReduce=t.arrReduce,e.attachEvent=t.attachEvent,e.cookieAvailable=t.areCookiesSupported,e.createCookieMgr=t.createCookieMgr,e.createEnumStyle=t.createEnumStyle,e.createProcessTelemetryContext=t.createProcessTelemetryContext,e.createTraceParent=t.createTraceParent,e.createUniqueNamespace=t.createUniqueNamespace,e.createUnloadHandlerContainer=t.createUnloadHandlerContainer,e.dateNow=t.dateNow,e.detachEvent=t.detachEvent,e.disallowsSameSiteNone=t.uaDisallowsSameSiteNone,e.doPerf=t.doPerf,e.dumpObj=t.dumpObj,e.eventOff=t.eventOff,e.eventOn=t.eventOn,e.findW3cTraceParent=t.findW3cTraceParent,e.formatTraceParent=t.formatTraceParent,e.generateW3CId=t.generateW3CId,e.getConsole=t.getConsole,e.getCrypto=t.getCrypto,e.getDocument=t.getDocument,e.getExceptionName=t.getExceptionName,e.getGlobal=t.getGlobal,e.getGlobalInst=t.getGlobalInst,e.getHistory=t.getHistory,e.getIEVersion=t.getIEVersion,e.getISOString=t.toISOString,e.getJSON=t.getJSON,e.getLocation=t.getLocation,e.getMsCrypto=t.getMsCrypto,e.getNavigator=t.getNavigator,e.getPerformance=t.getPerformance,e.getSetValue=t.getSetValue,e.getWindow=t.getWindow,e.hasDocument=t.hasDocument,e.hasHistory=t.hasHistory,e.hasJSON=t.hasJSON,e.hasNavigator=t.hasNavigator,e.hasOwnProperty=t.hasOwnProperty,e.hasWindow=t.hasWindow,e.isArray=t.isArray,e.isBeaconsSupported=t.isBeaconsSupported,e.isBoolean=t.isBoolean,e.isDate=t.isDate,e.isError=t.isError,e.isFetchSupported=t.isFetchSupported,e.isFunction=t.isFunction,e.isIE=t.isIE,e.isNotTruthy=t.isNotTruthy,e.isNullOrUndefined=t.isNullOrUndefined,e.isNumber=t.isNumber,e.isObject=t.isObject,e.isReactNative=t.isReactNative,e.isSampledFlag=t.isSampledFlag,e.isString=t.isString,e.isTruthy=t.isTruthy,e.isTypeof=t.isTypeof,e.isUndefined=t.isUndefined,e.isValidSpanId=t.isValidSpanId,e.isValidTraceId=t.isValidTraceId,e.isValidTraceParent=t.isValidTraceParent,e.isXhrSupported=t.isXhrSupported,e.mergeEvtNamespace=t.mergeEvtNamespace,e.newGuid=t.newGuid,e.newId=t.newId,e.normalizeJsName=t.normalizeJsName,e.objCreate=t.objCreate,e.objDefineAccessors=t.objDefineAccessors,e.objForEachKey=t.objForEachKey,e.objFreeze=t.objFreeze,e.objKeys=t.objKeys,e.objSeal=t.objSeal,e.optimizeObject=t.optimizeObject,e.parseTraceParent=t.parseTraceParent,e.perfNow=t.perfNow,e.proxyAssign=t.proxyAssign,e.proxyFunctionAs=t.proxyFunctionAs,e.proxyFunctions=t.proxyFunctions,e.random32=t.random32,e.randomValue=t.randomValue,e.removeEventHandler=t.removeEventHandler,e.removeEventListeners=t.removeEventListeners,e.removePageHideEventListener=t.removePageHideEventListener,e.removePageShowEventListener=t.removePageShowEventListener,e.removePageUnloadEventListener=t.removePageUnloadEventListener,e.safeGetCookieMgr=t.safeGetCookieMgr,e.safeGetLogger=t.safeGetLogger,e.setEnableEnvMocks=t.setEnableEnvMocks,e.setValue=t.setValue,e.strContains=t.strContains,e.strEndsWith=t.strEndsWith,e.strFunction=t.strFunction,e.strObject=t.strObject,e.strPrototype=t.strPrototype,e.strStartsWith=t.strStartsWith,e.strTrim=t.strTrim,e.strUndefined=t.strUndefined,e.throwError=t.throwError,e.toISOString=t.toISOString,e.useXDomainRequest=t.useXDomainRequest,e.AppInsightsCore=Ne,e.BaseCore=Xe,e.CoreUtils=ee,e.ESPromise=mr,e.ESPromiseScheduler=ir,e.EventLatency=i,e.EventPersistence=l,e.EventPropertyType=c,e.FullVersionString=m,e.TraceLevel=d,e.Utils=$,e.ValueKind=o,e.ValueSanitizer=wr,e.Version=v,e._ExtendedInternalMessageId=u,e.createGuid=oe,e.deleteCookie=ot,e.disableCookies=De,e.extend=ge,e.getCommonSchemaMetaData=_e,e.getCookie=xt,e.getCookieValue=at,e.getFieldValueType=rt,e.getTenantId=G,e.getTime=le,e.isArrayValid=se,e.isChromium=re,e.isDocumentObjectAvailable=A,e.isLatency=Y,e.isUint8ArrayAvailable=q,e.isValueAssigned=j,e.isValueKind=Ue,e.isWindowObjectAvailable=M,e.openXhr=ve,e.sanitizeProperty=ne,e.setCookie=ct,e.setProcessTelemetryTimings=We,function(ie,K,xe){var Te=Object.defineProperty;if(Te)try{return Te(ie,K,xe)}catch{}return xe&&typeof xe.value!==void 0&&(ie[K]=xe.value),ie}(e,"__esModule",{value:!0})})});var Vu=qt((uo,Gu)=>{"use strict";(function(e,n){typeof uo=="object"&&typeof Gu<"u"?n(uo,$a(),Xa(),Ya()):typeof define=="function"&&define.amd?define(["exports","@microsoft/applicationinsights-shims","@microsoft/dynamicproto-js","@microsoft/1ds-core-js"],n):(e=typeof globalThis<"u"?globalThis:e||self,n(e.oneDS=e.oneDS||{},e.applicationinsightsShims,e.dynamicProto,e._1dsCoreJs))})(uo,function(e,n,t,r){"use strict";function s(Me){return Me&&typeof Me=="object"&&"default"in Me?Me.default:Me}var a=s(t),o="REAL_TIME",i="NEAR_REAL_TIME",c="BEST_EFFORT",l="POST",d="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",u="drop",p="send",v="requeue",m="rspFail",g="oth",E="no-cache, no-store",T="application/x-json-stream",O="cache-control",P="content-type",A="kill-tokens",M="kill-duration",j="kill-duration-seconds",G="time-delta-millis",q="client-version",Y="client-id",ne="time-delta-to-apply-millis",_e="upload-time",De="apikey",ct="AuthMsaDeviceTicket",ot="AuthXToken",xt="NoResponseBody",at="msfpc";function oe(Me){var je=(Me.ext||{}).intweb;return je&&r.isValueAssigned(je[at])?je[at]:null}function ge(Me){for(var je=null,Se=0;je===null&&Se<Me.length;Se++)je=oe(Me[Se]);return je}var le=function(){function Me(je,Se){var Z=Se?[].concat(Se):[],et=this,ze=ge(Z);et.iKey=function(){return je},et.Msfpc=function(){return ze||""},et.count=function(){return Z.length},et.events=function(){return Z},et.addEvent=function(pe){return pe?(Z.push(pe),ze||(ze=oe(pe)),!0):!1},et.split=function(pe,mt){var bt;if(pe<Z.length){var Ct=Z.length-pe;r.isNullOrUndefined(mt)||(Ct=mt<Ct?mt:Ct),bt=Z.splice(pe,Ct),ze=ge(Z)}return new Me(je,bt)}}return Me.create=function(je,Se){return new Me(je,Se)},Me}(),Ue=20,Q=3984588,Ee=65e3,se=2e6,We=Math.min(se,Ee),rt="metadata",$="f",ee=/\./,re=function(){function Me(je,Se,Z,et){var ze="data",pe="baseData",mt="ext",bt=!!et,Ct=!0,Vt=Se,$t={};a(Me,this,function(Ht){Ht.createPayload=function(lt,gt,f,y,S,C){return{apiKeys:[],payloadBlob:"",overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:lt,isTeardown:gt,isSync:f,isBeacon:y,sendType:C,sendReason:S}},Ht.appendPayload=function(lt,gt,f){var y=lt&&gt&&!lt.overflow;return y&&r.doPerf(je,function(){return"Serializer:appendPayload"},function(){for(var S=gt.events(),C=lt.payloadBlob,D=lt.numEvents,k=!1,L=[],X=[],te=lt.isBeacon,He=te?Ee:Q,dt=te?We:se,Be=0,it=0;Be<S.length;){var pt=S[Be];if(pt){if(D>=f){lt.overflow=gt.split(Be);break}var St=Ht.getEventBlob(pt);if(St&&St.length<=dt){var Ut=St.length,Gr=C.length;if(Gr+Ut>He){lt.overflow=gt.split(Be);break}C&&(C+=`
`),C+=St,it++,it>Ue&&(C.substr(0,1),it=0),k=!0,D++}else St?L.push(pt):X.push(pt),S.splice(Be,1),Be--}Be++}if(L&&L.length>0&&lt.sizeExceed.push(le.create(gt.iKey(),L)),X&&X.length>0&&lt.failedEvts.push(le.create(gt.iKey(),X)),k){lt.batches.push(gt),lt.payloadBlob=C,lt.numEvents=D;var pr=gt.iKey();r.arrIndexOf(lt.apiKeys,pr)===-1&&lt.apiKeys.push(pr)}},function(){return{payload:lt,theBatch:{iKey:gt.iKey(),evts:gt.events()},max:f}}),y},Ht.getEventBlob=function(lt){try{return r.doPerf(je,function(){return"Serializer.getEventBlob"},function(){var gt={};gt.name=lt.name,gt.time=lt.time,gt.ver=lt.ver,gt.iKey="o:"+r.getTenantId(lt.iKey);var f={},y=lt[mt];y&&(gt[mt]=f,r.objForEachKey(y,function(D,k){var L=f[D]={};Dt(k,L,"ext."+D,!0,null,null,!0)}));var S=gt[ze]={};S.baseType=lt.baseType;var C=S[pe]={};return Dt(lt.baseData,C,pe,!1,[pe],function(D,k,L){ve(f,D,k,L)},Ct),Dt(lt.data,S,ze,!1,[],function(D,k,L){ve(f,D,k,L)},Ct),JSON.stringify(gt)},function(){return{item:lt}})}catch{return null}};function nt(lt,gt){var f=$t[lt];return f===void 0&&(lt.length>=7&&(f=r.strStartsWith(lt,"ext.metadata")||r.strStartsWith(lt,"ext.web")),$t[lt]=f),f}function Dt(lt,gt,f,y,S,C,D){r.objForEachKey(lt,function(k,L){var X=null;if(L||r.isValueAssigned(L)){var te=f,He=k,dt=S,Be=gt;if(bt&&!y&&ee.test(k)){var it=k.split("."),pt=it.length;if(pt>1){dt&&(dt=dt.slice());for(var St=0;St<pt-1;St++){var Ut=it[St];Be=Be[Ut]=Be[Ut]||{},te+="."+Ut,dt&&dt.push(Ut)}He=it[pt-1]}}var Gr=y&&nt(te);if(!Gr&&Vt&&Vt.handleField(te,He)?X=Vt.value(te,He,L,Z):X=r.sanitizeProperty(He,L,Z),X){var pr=X.value;if(Be[He]=pr,C&&C(dt,He,X),D&&typeof pr=="object"&&!r.isArray(pr)){var yr=dt;yr&&(yr=yr.slice(),yr.push(He)),Dt(L,pr,te+"."+He,y,yr,C,D)}}}})}})}return Me}();function ve(Me,je,Se,Z){if(Z&&Me){var et=r.getCommonSchemaMetaData(Z.value,Z.kind,Z.propertyType);if(et>-1){var ze=Me[rt];ze||(ze=Me[rt]={f:{}});var pe=ze[$];if(pe||(pe=ze[$]={}),je)for(var mt=0;mt<je.length;mt++){var bt=je[mt];pe[bt]||(pe[bt]={f:{}});var Ct=pe[bt][$];Ct||(Ct=pe[bt][$]={}),pe=Ct}pe=pe[Se]={},r.isArray(Z.value)?pe.a={t:et}:pe.t=et}}}var Ve=.8,Ae=1.2,Ne=3e3,Xe=6e5;function Ot(Me){return!(Me>=300&&Me<500&&Me!=408&&Me!=429||Me==501||Me==505)}function Sr(Me){var je=0,Se=Ne*Ve,Z=Ne*Ae,et=Math.floor(Math.random()*(Z-Se))+Se;return je=Math.pow(2,Me)*et,Math.min(je,Xe)}var mr=1e3,ce=function(){function Me(){var je={};function Se(Z){var et=[];return Z&&r.arrForEach(Z,function(ze){et.push(r.strTrim(ze))}),et}a(Me,this,function(Z){Z.setKillSwitchTenants=function(et,ze){if(et&&ze)try{var pe=Se(et.split(","));if(ze==="this-request-only")return pe;for(var mt=parseInt(ze,10)*mr,bt=0;bt<pe.length;++bt)je[pe[bt]]=r.dateNow()+mt}catch{return[]}return[]},Z.isTenantKilled=function(et){var ze=je,pe=r.strTrim(et);return ze[pe]!==void 0&&ze[pe]>r.dateNow()?!0:(delete ze[pe],!1)}})}return Me}(),Tr=function(){function Me(){var je=!0,Se=!0,Z=!0,et="use-collector-delta",ze=!1;a(Me,this,function(pe){pe.allowRequestSending=function(){return je},pe.firstRequestSent=function(){Z&&(Z=!1,ze||(je=!1))},pe.shouldAddClockSkewHeaders=function(){return Se},pe.getClockSkewHeaderValue=function(){return et},pe.setClockSkew=function(mt){ze||(mt?(et=mt,Se=!0,ze=!0):Se=!1,je=!0)}})}return Me}(),nr,Wt="sendAttempt",Ft="&"+xt+"=true",sr=(nr={},nr[1]=v,nr[100]=v,nr[200]="sent",nr[8004]=u,nr[8003]=u,nr),ir={},wr={};function ie(Me,je,Se){ir[Me]=je,Se!==!1&&(wr[je]=Me)}ie(ct,ct,!1),ie(q,q),ie(Y,"Client-Id"),ie(De,De),ie(ne,ne),ie(_e,_e),ie(ot,ot);function K(Me){try{return Me.responseText}catch{}return""}function xe(Me,je){var Se=!1;if(Me&&je){var Z=r.objKeys(Me);if(Z&&Z.length>0)for(var et=je.toLowerCase(),ze=0;ze<Z.length;ze++){var pe=Z[ze];if(pe&&r.hasOwnProperty(je,pe)&&pe.toLowerCase()===et){Se=!0;break}}}return Se}function Te(Me,je,Se,Z){je&&Se&&Se.length>0&&(Z&&ir[je]?(Me.hdrs[ir[je]]=Se,Me.useHdrs=!0):Me.url+="&"+je+"="+Se)}var vt=function(){function Me(je,Se,Z,et,ze){this._responseHandlers=[];var pe="?cors=true&"+P.toLowerCase()+"="+T,mt=new ce,bt=!1,Ct=new Tr,Vt=!1,$t=0,Ht,nt,Dt,lt=!0,gt=[],f={},y=[],S=null,C=!1,D,k=!1,L=!1,X,te;a(Me,this,function(He){var dt=!0;He.initialize=function(F,me,ye,Pe,Qe){var It;Qe||(Qe={}),pe=F+pe,L=r.isUndefined(Qe.avoidOptions)?!0:!Qe.avoidOptions,Dt=me,D=me.getCookieMgr(),C=!Dt.config.disableEventTimings;var yt=!!Dt.config.enableCompoundKey;Ht=ye;var Pt=Qe.valueSanitizer,At=Qe.stringifyObjects;r.isUndefined(Qe.enableCompoundKey)||(yt=!!Qe.enableCompoundKey),X=Qe.xhrTimeout,te=Qe.disableXhrSync,Vt=!r.isReactNative(),S=new re(Dt,Pt,At,yt);var Je=Pe,B=Qe.alwaysUseXhrOverride?Pe:null,ue=Qe.alwaysUseXhrOverride?Pe:null;if(!Pe){lt=!1;var de=r.getLocation();de&&de.protocol&&de.protocol.toLowerCase()==="file:"&&(dt=!1);var Ce=[];r.isReactNative()?Ce=[2,1]:Ce=[1,2,3];var ft=Qe.transports;ft&&(r.isNumber(ft)?Ce=[ft].concat(Ce):r.isArray(ft)&&(Ce=ft.concat(Ce))),Pe=Be(Ce,!1),Je=Be(Ce,!0),Pe||Ht.diagLog().warnToConsole("No available transport to send events")}nt=(It={},It[0]=Pe,It[1]=Je||Be([1,2,3],!0),It[2]=B||Be([3,2],!0)||Je||Be([1],!0),It[3]=ue||Be([2,3],!0)||Je||Be([1],!0),It)};function Be(F,me){for(var ye=0,Pe=null,Qe=0;Pe==null&&Qe<F.length;)ye=F[Qe],ye===1?r.useXDomainRequest()?Pe=it:r.isXhrSupported()&&(Pe=St):ye===2&&r.isFetchSupported(me)?Pe=pt:Vt&&ye===3&&r.isBeaconsSupported()&&(Pe=Gr),Qe++;return Pe?{_transport:ye,_isSync:me,sendPOST:Pe}:null}He._getDbgPlgTargets=function(){return[nt[0],mt,S,nt]};function it(F,me,ye){var Pe=new XDomainRequest;Pe.open(l,F.urlString),F.timeout&&(Pe.timeout=F.timeout),Pe.onload=function(){var Qe=K(Pe);Ut(me,200,{},Qe),Lr(Qe)},Pe.onerror=function(){Ut(me,400,{})},Pe.ontimeout=function(){Ut(me,500,{})},Pe.onprogress=function(){},ye?Pe.send(F.data):ze.set(function(){Pe.send(F.data)},0)}function pt(F,me,ye){var Pe,Qe=F.urlString,It=!1,yt=!1,Pt=(Pe={body:F.data,method:l},Pe[d]=!0,Pe);ye&&(Pt.keepalive=!0,F._sendReason===2&&(It=!0,Qe+=Ft)),dt&&(Pt.credentials="include"),F.headers&&r.objKeys(F.headers).length>0&&(Pt.headers=F.headers),fetch(Qe,Pt).then(function(At){var Je={},B="";At.headers&&At.headers.forEach(function(ue,de){Je[de]=ue}),At.body&&At.text().then(function(ue){B=ue}),yt||(yt=!0,Ut(me,At.status,Je,B),Lr(B))}).catch(function(At){yt||(yt=!0,Ut(me,0,{}))}),It&&!yt&&(yt=!0,Ut(me,200,{})),!yt&&F.timeout>0&&ze.set(function(){yt||(yt=!0,Ut(me,500,{}))},F.timeout)}function St(F,me,ye){var Pe=F.urlString;function Qe(At,Je,B){if(!At[B]&&Je&&Je.getResponseHeader){var ue=Je.getResponseHeader(B);ue&&(At[B]=r.strTrim(ue))}return At}function It(At){var Je={};return At.getAllResponseHeaders?Je=sn(At.getAllResponseHeaders()):(Je=Qe(Je,At,G),Je=Qe(Je,At,M),Je=Qe(Je,At,j)),Je}function yt(At,Je){Ut(me,At.status,It(At),Je)}ye&&F.disableXhrSync&&(ye=!1);var Pt=r.openXhr(l,Pe,dt,!0,ye,F.timeout);r.objForEachKey(F.headers,function(At,Je){Pt.setRequestHeader(At,Je)}),Pt.onload=function(){var At=K(Pt);yt(Pt,At),Lr(At)},Pt.onerror=function(){yt(Pt)},Pt.ontimeout=function(){yt(Pt)},Pt.send(F.data)}function Ut(F,me,ye,Pe){try{F(me,ye,Pe)}catch(Qe){r._throwInternal(Ht.diagLog(),2,518,r.dumpObj(Qe))}}function Gr(F,me,ye){var Pe=F,Qe=200,It=Pe._thePayload,yt=F.urlString+Ft;try{var Pt=r.getNavigator();if(!Pt.sendBeacon(yt,F.data))if(It){var At=[];r.arrForEach(It.batches,function(Je){if(At&&Je&&Je.count()>0){for(var B=Je.events(),ue=0;ue<B.length;ue++)if(!Pt.sendBeacon(yt,S.getEventBlob(B[ue]))){At.push(Je.split(ue));break}}else At.push(Je.split(0))}),Dr(At,8003,It.sendType,!0)}else Qe=0}catch(Je){Ht.diagLog().warnToConsole("Failed to send telemetry using sendBeacon API. Ex:"+r.dumpObj(Je)),Qe=0}finally{Ut(me,Qe,{},"")}}function pr(F){return F===2||F===3}function yr(F){return k&&pr(F)&&(F=2),F}He.addQueryStringParameter=function(F,me){for(var ye=0;ye<gt.length;ye++)if(gt[ye].name===F){gt[ye].value=me;return}gt.push({name:F,value:me})},He.addHeader=function(F,me){f[F]=me},He.canSendRequest=function(){return Kr()&&Ct.allowRequestSending()},He.sendQueuedRequests=function(F,me){r.isUndefined(F)&&(F=0),k&&(F=yr(F),me=2),on(y,F,0)&&xr(Vr(),0,!1,F,me||0)},He.isCompletelyIdle=function(){return!bt&&$t===0&&y.length===0},He.setUnloading=function(F){k=F},He.addBatch=function(F){if(F&&F.count()>0){if(mt.isTenantKilled(F.iKey()))return!1;y.push(F)}return!0},He.teardown=function(){y.length>0&&xr(Vr(),0,!0,2,2)},He.pause=function(){bt=!0},He.resume=function(){bt=!1,He.sendQueuedRequests(0,4)},He.sendSynchronousBatch=function(F,me,ye){F&&F.count()>0&&(r.isNullOrUndefined(me)&&(me=1),k&&(me=yr(me),ye=2),xr([F],0,!1,me,ye||0))};function Kr(){return!bt&&$t<Se}function Vr(){var F=y;return y=[],F}function on(F,me,ye){var Pe=!1;return F&&F.length>0&&!bt&&nt[me]&&S&&(Pe=me!==0||Kr()&&(ye>0||Ct.allowRequestSending())),Pe}function or(F){var me={};return F&&r.arrForEach(F,function(ye,Pe){me[Pe]={iKey:ye.iKey(),evts:ye.events()}}),me}function xr(F,me,ye,Pe,Qe){if(!(!F||F.length===0)){if(bt){Dr(F,1,Pe);return}Pe=yr(Pe);try{var It=F,yt=Pe!==0;r.doPerf(Dt,function(){return"HttpManager:_sendBatches"},function(Pt){Pt&&(F=F.slice(0));for(var At=[],Je=null,B=r.getTime(),ue=nt[Pe]||(yt?nt[1]:nt[0]),de=(k||pr(Pe)||ue&&ue._transport===3)&&Nr();on(F,Pe,me);){var Ce=F.shift();Ce&&Ce.count()>0&&(mt.isTenantKilled(Ce.iKey())?At.push(Ce):(Je=Je||S.createPayload(me,ye,yt,de,Qe,Pe),S.appendPayload(Je,Ce,je)?Je.overflow!==null&&(F=[Je.overflow].concat(F),Je.overflow=null,Mr(Je,B,r.getTime(),Qe),B=r.getTime(),Je=null):(Mr(Je,B,r.getTime(),Qe),B=r.getTime(),F=[Ce].concat(F),Je=null)))}Je&&Mr(Je,B,r.getTime(),Qe),F.length>0&&(y=F.concat(y)),Dr(At,8004,Pe)},function(){return{batches:or(It),retryCount:me,isTeardown:ye,isSynchronous:yt,sendReason:Qe,useSendBeacon:pr(Pe),sendType:Pe}},!yt)}catch(Pt){r._throwInternal(Ht.diagLog(),2,48,"Unexpected Exception sending batch: "+r.dumpObj(Pt))}}}function Qr(F,me){var ye={url:pe,hdrs:{},useHdrs:!1};me?(ye.hdrs=r.extend(ye.hdrs,f),ye.useHdrs=r.objKeys(ye.hdrs).length>0):r.objForEachKey(f,function(Pt,At){wr[Pt]?Te(ye,wr[Pt],At,!1):(ye.hdrs[Pt]=At,ye.useHdrs=!0)}),Te(ye,Y,"NO_AUTH",me),Te(ye,q,r.FullVersionString,me);var Pe="";r.arrForEach(F.apiKeys,function(Pt){Pe.length>0&&(Pe+=","),Pe+=Pt}),Te(ye,De,Pe,me),Te(ye,_e,r.dateNow().toString(),me);var Qe=Yr(F);if(r.isValueAssigned(Qe)&&(ye.url+="&ext.intweb.msfpc="+Qe),Ct.shouldAddClockSkewHeaders()&&Te(ye,ne,Ct.getClockSkewHeaderValue(),me),Dt.getWParam){var It=Dt.getWParam();It>=0&&(ye.url+="&w="+It)}for(var yt=0;yt<gt.length;yt++)ye.url+="&"+gt[yt].name+"="+gt[yt].value;return ye}function Nr(){return!lt&&Vt&&r.isBeaconsSupported()}function Ar(F,me,ye){F[me]=F[me]||{},F[me][Ht.identifier]=ye}function Mr(F,me,ye,Pe){if(F&&F.payloadBlob&&F.payloadBlob.length>0){var Qe=!!He.sendHook,It=nt[F.sendType];!pr(F.sendType)&&F.isBeacon&&F.sendReason===2&&(It=nt[2]||nt[3]||It);var yt=L;(F.isBeacon||It._transport===3)&&(yt=!1);var Pt=Qr(F,yt);yt=yt||Pt.useHdrs;var At=r.getTime();r.doPerf(Dt,function(){return"HttpManager:_doPayloadSend"},function(){for(var Je=0;Je<F.batches.length;Je++)for(var B=F.batches[Je],ue=B.events(),de=0;de<ue.length;de++){var Ce=ue[de];if(C){var ft=Ce.timings=Ce.timings||{};Ar(ft,"sendEventStart",At),Ar(ft,"serializationStart",me),Ar(ft,"serializationCompleted",ye)}Ce[Wt]>0?Ce[Wt]++:Ce[Wt]=1}Dr(F.batches,1e3+(Pe||0),F.sendType,!0);var ht={data:F.payloadBlob,urlString:Pt.url,headers:Pt.hdrs,_thePayload:F,_sendReason:Pe,timeout:X};r.isUndefined(te)||(ht.disableXhrSync=!!te),yt&&(xe(ht.headers,O)||(ht.headers[O]=E),xe(ht.headers,P)||(ht.headers[P]=T));var Qt=null;It&&(Qt=function(er){Ct.firstRequestSent();var _r=function(hn,ai){Xr(hn,ai,F,Pe)},jr=F.isTeardown||F.isSync;try{It.sendPOST(er,_r,jr),He.sendListener&&He.sendListener(ht,er,jr,F.isBeacon)}catch(hn){Ht.diagLog().warnToConsole("Unexpected exception sending payload. Ex:"+r.dumpObj(hn)),Ut(_r,0,{})}}),r.doPerf(Dt,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Qt)if(F.sendType===0&&$t++,Qe&&!F.isBeacon&&It._transport!==3){var er={data:ht.data,urlString:ht.urlString,headers:r.extend({},ht.headers),timeout:ht.timeout,disableXhrSync:ht.disableXhrSync},_r=!1;r.doPerf(Dt,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{He.sendHook(er,function(jr){_r=!0,!lt&&!jr._thePayload&&(jr._thePayload=jr._thePayload||ht._thePayload,jr._sendReason=jr._sendReason||ht._sendReason),Qt(jr)},F.isSync||F.isTeardown)}catch{_r||Qt(ht)}})}else Qt(ht)})},function(){return{thePayload:F,serializationStart:me,serializationCompleted:ye,sendReason:Pe}},F.isSync)}F.sizeExceed&&F.sizeExceed.length>0&&Dr(F.sizeExceed,8003,F.sendType),F.failedEvts&&F.failedEvts.length>0&&Dr(F.failedEvts,8002,F.sendType)}function Or(F,me){C&&r.arrForEach(F,function(ye){var Pe=ye.timings=ye.timings||{};Ar(Pe,"sendEventCompleted",me)})}function Xr(F,me,ye,Pe){var Qe=9e3,It=null,yt=!1,Pt=!1;try{var At=!0;if(typeof F!==r.strUndefined){if(me){Ct.setClockSkew(me[G]);var Je=me[M]||me["kill-duration-seconds"];r.arrForEach(mt.setKillSwitchTenants(me[A],Je),function(ue){r.arrForEach(ye.batches,function(de){if(de.iKey()===ue){It=It||[];var Ce=de.split(0);ye.numEvents-=Ce.count(),It.push(Ce)}})})}if(F==200||F==204){Qe=200;return}(!Ot(F)||ye.numEvents<=0)&&(At=!1),Qe=9e3+F%1e3}if(At){Qe=100;var B=ye.retryCnt;ye.sendType===0&&(B<Z?(yt=!0,kr(function(){ye.sendType===0&&$t--,xr(ye.batches,B+1,ye.isTeardown,k?2:ye.sendType,5)},k,Sr(B))):(Pt=!0,k&&(Qe=8001)))}}finally{yt||(Ct.setClockSkew(),zr(ye,Qe,Pe,Pt)),Dr(It,8004,ye.sendType)}}function zr(F,me,ye,Pe){try{Pe&&Ht._backOffTransmission(),me===200&&(!Pe&&!F.isSync&&Ht._clearBackOff(),an(F.batches)),Dr(F.batches,me,F.sendType,!0)}finally{F.sendType===0&&($t--,ye!==5&&He.sendQueuedRequests(F.sendType,ye))}}function an(F){if(C){var me=r.getTime();r.arrForEach(F,function(ye){ye&&ye.count()>0&&Or(ye.events(),me)})}}function kr(F,me,ye){me?F():ze.set(F,ye)}function sn(F){var me={};if(r.isString(F)){var ye=r.strTrim(F).split(/[\r\n]+/);r.arrForEach(ye,function(Pe){if(Pe){var Qe=Pe.indexOf(": ");if(Qe!==-1){var It=r.strTrim(Pe.substring(0,Qe)).toLowerCase(),yt=r.strTrim(Pe.substring(Qe+1));me[It]=yt}else me[r.strTrim(Pe)]=1}})}return me}function Yr(F){for(var me=0;me<F.batches.length;me++){var ye=F.batches[me].Msfpc();if(ye)return encodeURIComponent(ye)}return""}function Lr(F){var me=He._responseHandlers;try{for(var ye=0;ye<me.length;ye++)try{me[ye](F)}catch(Qe){r._throwInternal(Ht.diagLog(),1,519,"Response handler failed: "+Qe)}if(F){var Pe=JSON.parse(F);r.isValueAssigned(Pe.webResult)&&r.isValueAssigned(Pe.webResult[at])&&D.set("MSFPC",Pe.webResult[at],365*86400)}}catch{}}function Dr(F,me,ye,Pe){if(F&&F.length>0&&et){var Qe=et[cn(me)];if(Qe){var It=ye!==0;r.doPerf(Dt,function(){return"HttpManager:_sendBatchesNotification"},function(){kr(function(){try{Qe.call(et,F,me,It,ye)}catch(yt){r._throwInternal(Ht.diagLog(),1,74,"send request notification failed: "+yt)}},Pe||It,0)},function(){return{batches:or(F),reason:me,isSync:It,sendSync:Pe,sendType:ye}},!It)}}}function cn(F){var me=sr[F];return r.isValueAssigned(me)||(me=g,F>=9e3&&F<=9999?me=m:F>=8e3&&F<=8999?me=u:F>=1e3&&F<=1999&&(me=p)),me}})}return Me}();function Ke(Me,je){for(var Se=[],Z=2;Z<arguments.length;Z++)Se[Z-2]=arguments[Z];return setTimeout(Me,je,Se)}function Fe(Me){clearTimeout(Me)}function $e(Me,je){return{set:Me||Ke,clear:je||Fe}}var Tt=.25,wt=500,Oe=20,Ye=6,ae=2,Ie=4,Le=2,he=1,ut="eventsDiscarded",Bt="overrideInstrumentationKey",Ze="maxEventRetryAttempts",Kt="maxUnloadEventRetryAttempts",gr="addUnloadCb",Ir=function(Me){n.__extendsFn(je,Me);function je(){var Se=Me.call(this)||this;Se.identifier="PostChannel",Se.priority=1011,Se.version="3.2.3";var Z,et=!1,ze=[],pe=null,mt=!1,bt=0,Ct=500,Vt=0,$t=1e4,Ht={},nt=o,Dt=null,lt=null,gt=0,f=0,y,S,C={},D,k,L=-1,X,te=!0,He=!1,dt=Ye,Be=ae,it,pt;return a(je,Se,function(St,Ut){xr(),St._getDbgPlgTargets=function(){return[S]},St.initialize=function(B,ue,de){r.doPerf(ue,function(){return"PostChannel:initialize"},function(){var Ce=ue;Ut.initialize(B,ue,de);try{var ft=!!ue[gr];it=r.mergeEvtNamespace(r.createUniqueNamespace(St.identifier),ue.evtNamespace&&ue.evtNamespace());var ht=St._getTelCtx();B.extensionConfig[St.identifier]=B.extensionConfig[St.identifier]||{},Z=ht.getExtCfg(St.identifier),pt=$e(Z.setTimeoutOverride,Z.clearTimeoutOverride),te=!Z.disableOptimizeObj&&r.isChromium(),Gr(Ce),Z.eventsLimitInMem>0&&($t=Z.eventsLimitInMem),Z.immediateEventLimit>0&&(Ct=Z.immediateEventLimit),Z.autoFlushEventsLimit>0&&(D=Z.autoFlushEventsLimit),r.isNumber(Z[Ze])&&(dt=Z[Ze]),r.isNumber(Z[Kt])&&(Be=Z[Kt]),Je(),Z.httpXHROverride&&Z.httpXHROverride.sendPOST&&(y=Z.httpXHROverride),r.isValueAssigned(B.anonCookieName)&&S.addQueryStringParameter("anoncknm",B.anonCookieName),S.sendHook=Z.payloadPreprocessor,S.sendListener=Z.payloadListener;var Qt=Z.overrideEndpointUrl?Z.overrideEndpointUrl:B.endpointUrl;St._notificationManager=B.extensionConfig.NotificationManager,S.initialize(Qt,St.core,St,y,Z);var er=B.disablePageUnloadEvents||[];r.addPageUnloadEventListener(pr,er,it),r.addPageHideEventListener(pr,er,it),r.addPageShowEventListener(yr,B.disablePageShowEvents,it)}catch(_r){throw St.setInitialized(!1),_r}},function(){return{coreConfig:B,core:ue,extensions:de}})},St.processTelemetry=function(B,ue){r.setProcessTelemetryTimings(B,St.identifier),ue=St._getTelCtx(ue);var de=ue.getExtCfg(St.identifier),Ce=!!Z.disableTelemetry;de&&(Ce=Ce||!!de.disableTelemetry);var ft=B;!Ce&&!et&&(Z[Bt]&&(ft.iKey=Z[Bt]),de&&de[Bt]&&(ft.iKey=de[Bt]),Kr(ft,!0),He?Ar(2,2):or()),St.processNext(ft,ue)},St._doTeardown=function(B,ue){Ar(2,2),et=!0,S.teardown(),r.removePageUnloadEventListener(null,it),r.removePageHideEventListener(null,it),r.removePageShowEventListener(null,it),xr()};function Gr(B){var ue=B.getWParam;B.getWParam=function(){var de=0;return Z.ignoreMc1Ms0CookieProcessing&&(de=de|2),de|ue()}}function pr(B){var ue=B||r.getWindow().event;ue.type!=="beforeunload"&&(He=!0,S.setUnloading(He)),Ar(2,2)}function yr(B){He=!1,S.setUnloading(He)}function Kr(B,ue){if(B.sendAttempt||(B.sendAttempt=0),B.latency||(B.latency=1),B.ext&&B.ext.trace&&delete B.ext.trace,B.ext&&B.ext.user&&B.ext.user.id&&delete B.ext.user.id,te&&(B.ext=r.optimizeObject(B.ext),B.baseData&&(B.baseData=r.optimizeObject(B.baseData)),B.data&&(B.data=r.optimizeObject(B.data))),B.sync){if(gt||mt)B.latency=3,B.sync=!1;else if(S){te&&(B=r.optimizeObject(B)),S.sendSynchronousBatch(le.create(B.iKey,[B]),B.sync===!0?1:B.sync,3);return}}var de=B.latency,Ce=Vt,ft=$t;de===4&&(Ce=bt,ft=Ct);var ht=!1;if(Ce<ft)ht=!zr(B,ue);else{var Qt=1,er=Oe;de===4&&(Qt=4,er=1),ht=!0,an(B.iKey,B.latency,Qt,er)&&(ht=!zr(B,ue))}ht&&ye(ut,[B],r.EventsDiscardedReason.QueueFull)}St.setEventQueueLimits=function(B,ue){$t=B>0?B:1e4,D=ue>0?ue:0,Je();var de=Vt>B;if(!de&&k>0)for(var Ce=1;!de&&Ce<=3;Ce++){var ft=C[Ce];ft&&ft.batches&&r.arrForEach(ft.batches,function(ht){ht&&ht.count()>=k&&(de=!0)})}Xr(!0,de)},St.pause=function(){Nr(),mt=!0,S.pause()},St.resume=function(){mt=!1,S.resume(),or()},St.addResponseHandler=function(B){S._responseHandlers.push(B)},St._loadTransmitProfiles=function(B){Dr(),r.objForEachKey(B,function(ue,de){var Ce=de.length;if(Ce>=2){var ft=Ce>2?de[2]:0;if(de.splice(0,Ce-2),de[1]<0&&(de[0]=-1),de[1]>0&&de[0]>0){var ht=de[0]/de[1];de[0]=Math.ceil(ht)*de[1]}ft>=0&&de[1]>=0&&ft>de[1]&&(ft=de[1]),de.push(ft),Ht[ue]=de}})},St.flush=function(B,ue,de){if(B===void 0&&(B=!0),!mt)if(de=de||1,B)pe==null?(Nr(),sn(1,0,de),pe=Qr(function(){pe=null,Yr(ue,de)},0)):ze.push(ue);else{var Ce=Nr();Vr(1,1,de),ue?.(),Ce&&or()}},St.setMsaAuthTicket=function(B){S.addHeader(ct,B)},St.hasEvents=on,St._setTransmitProfile=function(B){nt!==B&&Ht[B]!==void 0&&(Nr(),nt=B,or())};function Vr(B,ue,de){var Ce=sn(B,ue,de);return S.sendQueuedRequests(ue,de),Ce}function on(){return Vt>0}function or(){if(L>=0&&sn(L,0,X)&&S.sendQueuedRequests(0,X),bt>0&&!lt&&!mt){var B=Ht[nt][2];B>=0&&(lt=Qr(function(){lt=null,Vr(4,0,1),or()},B))}var ue=Ht[nt][1];!Dt&&!pe&&ue>=0&&!mt&&(on()?Dt=Qr(function(){Dt=null,Vr(f===0?3:1,0,1),f++,f%=2,or()},ue):f=0)}St._backOffTransmission=function(){gt<Ie&&(gt++,Nr(),or())},St._clearBackOff=function(){gt&&(gt=0,Nr(),or())};function xr(){Z=null,et=!1,ze=[],pe=null,mt=!1,bt=0,Ct=500,Vt=0,$t=1e4,Ht={},nt=o,Dt=null,lt=null,gt=0,f=0,y=null,C={},D=void 0,k=0,L=-1,X=null,te=!0,He=!1,dt=Ye,Be=ae,it=null,pt=$e(),S=new vt(wt,Le,he,{requeue:F,send:Qe,sent:It,drop:yt,rspFail:Pt,oth:At},pt),cn(),Mr(),Je()}function Qr(B,ue){ue===0&&gt&&(ue=1);var de=1e3;return gt&&(de=Sr(gt-1)),pt.set(B,ue*de)}function Nr(){return Dt!==null?(pt.clear(Dt),Dt=null,f=0,!0):!1}function Ar(B,ue){Nr(),pe&&(pt.clear(pe),pe=null),mt||Vr(1,B,ue)}function Mr(){C[4]={batches:[],iKeyMap:{}},C[3]={batches:[],iKeyMap:{}},C[2]={batches:[],iKeyMap:{}},C[1]={batches:[],iKeyMap:{}}}function Or(B,ue,de){var Ce=C[ue];Ce||(ue=1,Ce=C[ue]);var ft=Ce.iKeyMap[B];return!ft&&de&&(ft=le.create(B),Ce.batches.push(ft),Ce.iKeyMap[B]=ft),ft}function Xr(B,ue){S.canSendRequest()&&!gt&&(D>0&&Vt>D&&(ue=!0),ue&&pe==null&&St.flush(B,null,20))}function zr(B,ue){te&&(B=r.optimizeObject(B));var de=B.latency,Ce=Or(B.iKey,de,!0);return Ce.addEvent(B)?(de!==4?(Vt++,ue&&B.sendAttempt===0&&Xr(!B.sync,k>0&&Ce.count()>=k)):bt++,!0):!1}function an(B,ue,de,Ce){for(;de<=ue;){var ft=Or(B,ue,!0);if(ft&&ft.count()>0){var ht=ft.split(0,Ce),Qt=ht.count();if(Qt>0)return de===4?bt-=Qt:Vt-=Qt,Pe(ut,[ht],r.EventsDiscardedReason.QueueFull),!0}de++}return kr(),!1}function kr(){for(var B=0,ue=0,de=function(ft){var ht=C[ft];ht&&ht.batches&&r.arrForEach(ht.batches,function(Qt){ft===4?B+=Qt.count():ue+=Qt.count()})},Ce=1;Ce<=4;Ce++)de(Ce);Vt=ue,bt=B}function sn(B,ue,de){var Ce=!1,ft=ue===0;return!ft||S.canSendRequest()?r.doPerf(St.core,function(){return"PostChannel._queueBatches"},function(){for(var ht=[],Qt=4;Qt>=B;){var er=C[Qt];er&&er.batches&&er.batches.length>0&&(r.arrForEach(er.batches,function(_r){S.addBatch(_r)?Ce=Ce||_r&&_r.count()>0:ht=ht.concat(_r.events()),Qt===4?bt-=_r.count():Vt-=_r.count()}),er.batches=[],er.iKeyMap={}),Qt--}ht.length>0&&ye(ut,ht,r.EventsDiscardedReason.KillSwitch),Ce&&L>=B&&(L=-1,X=0)},function(){return{latency:B,sendType:ue,sendReason:de}},!ft):(L=L>=0?Math.min(L,B):B,X=Math.max(X,de)),Ce}function Yr(B,ue){Vr(1,0,ue),kr(),Lr(function(){B&&B(),ze.length>0?pe=Qr(function(){pe=null,Yr(ze.shift(),ue)},0):(pe=null,or())})}function Lr(B){S.isCompletelyIdle()?B():pe=Qr(function(){pe=null,Lr(B)},Tt)}function Dr(){Nr(),cn(),nt=o,or()}function cn(){Ht={},Ht[o]=[2,1,0],Ht[i]=[6,3,0],Ht[c]=[18,9,0]}function F(B,ue){var de=[],Ce=dt;He&&(Ce=Be),r.arrForEach(B,function(ft){ft&&ft.count()>0&&r.arrForEach(ft.events(),function(ht){ht&&(ht.sync&&(ht.latency=4,ht.sync=!1),ht.sendAttempt<Ce?(r.setProcessTelemetryTimings(ht,St.identifier),Kr(ht,!1)):de.push(ht))})}),de.length>0&&ye(ut,de,r.EventsDiscardedReason.NonRetryableStatus),He&&Ar(2,2)}function me(B,ue){var de=St._notificationManager||{},Ce=de[B];if(Ce)try{Ce.apply(de,ue)}catch(ft){r._throwInternal(St.diagLog(),1,74,B+" notification failed: "+ft)}}function ye(B,ue){for(var de=[],Ce=2;Ce<arguments.length;Ce++)de[Ce-2]=arguments[Ce];ue&&ue.length>0&&me(B,[ue].concat(de))}function Pe(B,ue){for(var de=[],Ce=2;Ce<arguments.length;Ce++)de[Ce-2]=arguments[Ce];ue&&ue.length>0&&r.arrForEach(ue,function(ft){ft&&ft.count()>0&&me(B,[ft.events()].concat(de))})}function Qe(B,ue,de){B&&B.length>0&&me("eventsSendRequest",[ue>=1e3&&ue<=1999?ue-1e3:0,de!==!0])}function It(B,ue){Pe("eventsSent",B,ue),or()}function yt(B,ue){Pe(ut,B,ue>=8e3&&ue<=8999?ue-8e3:r.EventsDiscardedReason.Unknown)}function Pt(B){Pe(ut,B,r.EventsDiscardedReason.NonRetryableStatus),or()}function At(B,ue){Pe(ut,B,r.EventsDiscardedReason.Unknown),or()}function Je(){!Z||!Z.disableAutoBatchFlushLimit?k=Math.max(wt*(Le+1),$t/6):k=0}r.objDefineAccessors(St,"_setTimeoutOverride",function(){return pt.set},function(B){pt=$e(B,pt.clear)}),r.objDefineAccessors(St,"_clearTimeoutOverride",function(){return pt.clear},function(B){pt=$e(pt.set,B)})}),Se}return je}(r.BaseTelemetryPlugin);e.BE_PROFILE=c,e.NRT_PROFILE=i,e.PostChannel=Ir,e.RT_PROFILE=o,function(Me,je,Se){var Z=Object.defineProperty;if(Z)try{return Z(Me,je,Se)}catch{}return Se&&typeof Se.value!==void 0&&(Me[je]=Se.value),Me}(e,"__esModule",{value:!0})})});var Hl=qt(($y,jl)=>{"use strict";var mp=Object.create,Si=Object.defineProperty,gp=Object.defineProperties,yp=Object.getOwnPropertyDescriptor,_p=Object.getOwnPropertyDescriptors,Ep=Object.getOwnPropertyNames,zu=Object.getOwnPropertySymbols,bp=Object.getPrototypeOf,Ku=Object.prototype.hasOwnProperty,Sp=Object.prototype.propertyIsEnumerable,Wu=(e,n,t)=>n in e?Si(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Ln=(e,n)=>{for(var t in n||(n={}))Ku.call(n,t)&&Wu(e,t,n[t]);if(zu)for(var t of zu(n))Sp.call(n,t)&&Wu(e,t,n[t]);return e},Tp=(e,n)=>gp(e,_p(n)),x=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),wp=(e,n)=>{for(var t in n)Si(e,t,{get:n[t],enumerable:!0})},Qu=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let s of Ep(n))!Ku.call(e,s)&&s!==t&&Si(e,s,{get:()=>n[s],enumerable:!(r=yp(n,s))||r.enumerable});return e},lo=(e,n,t)=>(t=e!=null?mp(bp(e)):{},Qu(n||!e||!e.__esModule?Si(t,"default",{value:e,enumerable:!0}):t,e)),Ip=e=>Qu(Si({},"__esModule",{value:!0}),e),br=x((e,n)=>{"use strict";var t=function(){function r(){}return r.info=function(s){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];r.enableDebug&&console.info(r.TAG+s,a)},r.warn=function(s){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];r.disableWarnings||console.warn(r.TAG+s,a)},r.enableDebug=!1,r.disableWarnings=!1,r.disableErrors=!1,r.TAG="ApplicationInsights:",r}();n.exports=t}),Xu=x(e=>{"use strict";var n=e&&e.__assign||function(){return n=Object.assign||function(a){for(var o,i=1,c=arguments.length;i<c;i++){o=arguments[i];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScopeManager=e.OpenTelemetryScopeManagerWrapper=void 0;var t=Zn(),r=require("events"),s=function(){function a(){}return a.prototype.active=function(){var o=this,i=t.CorrelationContextManager.getCurrentContext();return n(n({},i),{getValue:function(c){return o._activeSymbol?c===o._activeSymbol?i:!1:(o._activeSymbol=c,i)},setValue:function(){}})},a.prototype.with=function(o,i){var c=o.parentSpanId,l=o.name,d=a._spanToContext(o,c,l);return t.CorrelationContextManager.runWithContext(d,i)()},a.prototype.bind=function(o){return typeof o=="function"?t.CorrelationContextManager.wrapCallback(o):(o instanceof r.EventEmitter&&t.CorrelationContextManager.wrapEmitter(o),o)},a.prototype.enable=function(){return t.CorrelationContextManager.enable(),this},a.prototype.disable=function(){return t.CorrelationContextManager.disable(),this},a._spanToContext=function(o,i,c){var l=i?"|"+o.spanContext().traceId+"."+i+".":o.spanContext().traceId,d=n(n({},o.spanContext()),{traceFlags:o.spanContext().traceFlags}),u=t.CorrelationContextManager.spanToContextObject(d,l,c);return u},a}();e.OpenTelemetryScopeManagerWrapper=s,e.AsyncScopeManager=new s}),Ap=x((e,n)=>{e=n.exports=ce;var t;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?t=function(){var f=Array.prototype.slice.call(arguments,0);f.unshift("SEMVER"),console.log.apply(console,f)}:t=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var r=256,s=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,o=e.re=[],i=e.src=[],c=0,l=c++;i[l]="0|[1-9]\\d*";var d=c++;i[d]="[0-9]+";var u=c++;i[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=c++;i[p]="("+i[l]+")\\.("+i[l]+")\\.("+i[l]+")";var v=c++;i[v]="("+i[d]+")\\.("+i[d]+")\\.("+i[d]+")";var m=c++;i[m]="(?:"+i[l]+"|"+i[u]+")";var g=c++;i[g]="(?:"+i[d]+"|"+i[u]+")";var E=c++;i[E]="(?:-("+i[m]+"(?:\\."+i[m]+")*))";var T=c++;i[T]="(?:-?("+i[g]+"(?:\\."+i[g]+")*))";var O=c++;i[O]="[0-9A-Za-z-]+";var P=c++;i[P]="(?:\\+("+i[O]+"(?:\\."+i[O]+")*))";var A=c++,M="v?"+i[p]+i[E]+"?"+i[P]+"?";i[A]="^"+M+"$";var j="[v=\\s]*"+i[v]+i[T]+"?"+i[P]+"?",G=c++;i[G]="^"+j+"$";var q=c++;i[q]="((?:<|>)?=?)";var Y=c++;i[Y]=i[d]+"|x|X|\\*";var ne=c++;i[ne]=i[l]+"|x|X|\\*";var _e=c++;i[_e]="[v=\\s]*("+i[ne]+")(?:\\.("+i[ne]+")(?:\\.("+i[ne]+")(?:"+i[E]+")?"+i[P]+"?)?)?";var De=c++;i[De]="[v=\\s]*("+i[Y]+")(?:\\.("+i[Y]+")(?:\\.("+i[Y]+")(?:"+i[T]+")?"+i[P]+"?)?)?";var ct=c++;i[ct]="^"+i[q]+"\\s*"+i[_e]+"$";var ot=c++;i[ot]="^"+i[q]+"\\s*"+i[De]+"$";var xt=c++;i[xt]="(?:^|[^\\d])(\\d{1,"+a+"})(?:\\.(\\d{1,"+a+"}))?(?:\\.(\\d{1,"+a+"}))?(?:$|[^\\d])";var at=c++;i[at]="(?:~>?)";var oe=c++;i[oe]="(\\s*)"+i[at]+"\\s+",o[oe]=new RegExp(i[oe],"g");var ge="$1~",le=c++;i[le]="^"+i[at]+i[_e]+"$";var Ue=c++;i[Ue]="^"+i[at]+i[De]+"$";var Q=c++;i[Q]="(?:\\^)";var Ee=c++;i[Ee]="(\\s*)"+i[Q]+"\\s+",o[Ee]=new RegExp(i[Ee],"g");var se="$1^",We=c++;i[We]="^"+i[Q]+i[_e]+"$";var rt=c++;i[rt]="^"+i[Q]+i[De]+"$";var $=c++;i[$]="^"+i[q]+"\\s*("+j+")$|^$";var ee=c++;i[ee]="^"+i[q]+"\\s*("+M+")$|^$";var re=c++;i[re]="(\\s*)"+i[q]+"\\s*("+j+"|"+i[_e]+")",o[re]=new RegExp(i[re],"g");var ve="$1$2$3",Ve=c++;i[Ve]="^\\s*("+i[_e]+")\\s+-\\s+("+i[_e]+")\\s*$";var Ae=c++;i[Ae]="^\\s*("+i[De]+")\\s+-\\s+("+i[De]+")\\s*$";var Ne=c++;for(i[Ne]="(<|>)?=?\\s*\\*",Xe=0;Xe<c;Xe++)t(Xe,i[Xe]),o[Xe]||(o[Xe]=new RegExp(i[Xe]));var Xe;e.parse=Ot;function Ot(f,y){if((!y||typeof y!="object")&&(y={loose:!!y,includePrerelease:!1}),f instanceof ce)return f;if(typeof f!="string"||f.length>r)return null;var S=y.loose?o[G]:o[A];if(!S.test(f))return null;try{return new ce(f,y)}catch{return null}}e.valid=Sr;function Sr(f,y){var S=Ot(f,y);return S?S.version:null}e.clean=mr;function mr(f,y){var S=Ot(f.trim().replace(/^[=v]+/,""),y);return S?S.version:null}e.SemVer=ce;function ce(f,y){if((!y||typeof y!="object")&&(y={loose:!!y,includePrerelease:!1}),f instanceof ce){if(f.loose===y.loose)return f;f=f.version}else if(typeof f!="string")throw new TypeError("Invalid Version: "+f);if(f.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof ce))return new ce(f,y);t("SemVer",f,y),this.options=y,this.loose=!!y.loose;var S=f.trim().match(y.loose?o[G]:o[A]);if(!S)throw new TypeError("Invalid Version: "+f);if(this.raw=f,this.major=+S[1],this.minor=+S[2],this.patch=+S[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");S[4]?this.prerelease=S[4].split(".").map(function(C){if(/^[0-9]+$/.test(C)){var D=+C;if(D>=0&&D<s)return D}return C}):this.prerelease=[],this.build=S[5]?S[5].split("."):[],this.format()}ce.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},ce.prototype.toString=function(){return this.version},ce.prototype.compare=function(f){return t("SemVer.compare",this.version,this.options,f),f instanceof ce||(f=new ce(f,this.options)),this.compareMain(f)||this.comparePre(f)},ce.prototype.compareMain=function(f){return f instanceof ce||(f=new ce(f,this.options)),Ft(this.major,f.major)||Ft(this.minor,f.minor)||Ft(this.patch,f.patch)},ce.prototype.comparePre=function(f){if(f instanceof ce||(f=new ce(f,this.options)),this.prerelease.length&&!f.prerelease.length)return-1;if(!this.prerelease.length&&f.prerelease.length)return 1;if(!this.prerelease.length&&!f.prerelease.length)return 0;var y=0;do{var S=this.prerelease[y],C=f.prerelease[y];if(t("prerelease compare",y,S,C),S===void 0&&C===void 0)return 0;if(C===void 0)return 1;if(S===void 0)return-1;if(S!==C)return Ft(S,C)}while(++y)},ce.prototype.inc=function(f,y){switch(f){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",y);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",y);break;case"prepatch":this.prerelease.length=0,this.inc("patch",y),this.inc("pre",y);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",y),this.inc("pre",y);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var S=this.prerelease.length;--S>=0;)typeof this.prerelease[S]=="number"&&(this.prerelease[S]++,S=-2);S===-1&&this.prerelease.push(0)}y&&(this.prerelease[0]===y?isNaN(this.prerelease[1])&&(this.prerelease=[y,0]):this.prerelease=[y,0]);break;default:throw new Error("invalid increment argument: "+f)}return this.format(),this.raw=this.version,this},e.inc=Tr;function Tr(f,y,S,C){typeof S=="string"&&(C=S,S=void 0);try{return new ce(f,S).inc(y,C).version}catch{return null}}e.diff=nr;function nr(f,y){if(Tt(f,y))return null;var S=Ot(f),C=Ot(y),D="";if(S.prerelease.length||C.prerelease.length){D="pre";var k="prerelease"}for(var L in S)if((L==="major"||L==="minor"||L==="patch")&&S[L]!==C[L])return D+L;return k}e.compareIdentifiers=Ft;var Wt=/^[0-9]+$/;function Ft(f,y){var S=Wt.test(f),C=Wt.test(y);return S&&C&&(f=+f,y=+y),f===y?0:S&&!C?-1:C&&!S?1:f<y?-1:1}e.rcompareIdentifiers=sr;function sr(f,y){return Ft(y,f)}e.major=ir;function ir(f,y){return new ce(f,y).major}e.minor=wr;function wr(f,y){return new ce(f,y).minor}e.patch=ie;function ie(f,y){return new ce(f,y).patch}e.compare=K;function K(f,y,S){return new ce(f,S).compare(new ce(y,S))}e.compareLoose=xe;function xe(f,y){return K(f,y,!0)}e.rcompare=Te;function Te(f,y,S){return K(y,f,S)}e.sort=vt;function vt(f,y){return f.sort(function(S,C){return e.compare(S,C,y)})}e.rsort=Ke;function Ke(f,y){return f.sort(function(S,C){return e.rcompare(S,C,y)})}e.gt=Fe;function Fe(f,y,S){return K(f,y,S)>0}e.lt=$e;function $e(f,y,S){return K(f,y,S)<0}e.eq=Tt;function Tt(f,y,S){return K(f,y,S)===0}e.neq=wt;function wt(f,y,S){return K(f,y,S)!==0}e.gte=Oe;function Oe(f,y,S){return K(f,y,S)>=0}e.lte=Ye;function Ye(f,y,S){return K(f,y,S)<=0}e.cmp=ae;function ae(f,y,S,C){switch(y){case"===":return typeof f=="object"&&(f=f.version),typeof S=="object"&&(S=S.version),f===S;case"!==":return typeof f=="object"&&(f=f.version),typeof S=="object"&&(S=S.version),f!==S;case"":case"=":case"==":return Tt(f,S,C);case"!=":return wt(f,S,C);case">":return Fe(f,S,C);case">=":return Oe(f,S,C);case"<":return $e(f,S,C);case"<=":return Ye(f,S,C);default:throw new TypeError("Invalid operator: "+y)}}e.Comparator=Ie;function Ie(f,y){if((!y||typeof y!="object")&&(y={loose:!!y,includePrerelease:!1}),f instanceof Ie){if(f.loose===!!y.loose)return f;f=f.value}if(!(this instanceof Ie))return new Ie(f,y);t("comparator",f,y),this.options=y,this.loose=!!y.loose,this.parse(f),this.semver===Le?this.value="":this.value=this.operator+this.semver.version,t("comp",this)}var Le={};Ie.prototype.parse=function(f){var y=this.options.loose?o[$]:o[ee],S=f.match(y);if(!S)throw new TypeError("Invalid comparator: "+f);this.operator=S[1],this.operator==="="&&(this.operator=""),S[2]?this.semver=new ce(S[2],this.options.loose):this.semver=Le},Ie.prototype.toString=function(){return this.value},Ie.prototype.test=function(f){return t("Comparator.test",f,this.options.loose),this.semver===Le?!0:(typeof f=="string"&&(f=new ce(f,this.options)),ae(f,this.operator,this.semver,this.options))},Ie.prototype.intersects=function(f,y){if(!(f instanceof Ie))throw new TypeError("a Comparator is required");(!y||typeof y!="object")&&(y={loose:!!y,includePrerelease:!1});var S;if(this.operator==="")return S=new he(f.value,y),pe(this.value,S,y);if(f.operator==="")return S=new he(this.value,y),pe(f.semver,S,y);var C=(this.operator===">="||this.operator===">")&&(f.operator===">="||f.operator===">"),D=(this.operator==="<="||this.operator==="<")&&(f.operator==="<="||f.operator==="<"),k=this.semver.version===f.semver.version,L=(this.operator===">="||this.operator==="<=")&&(f.operator===">="||f.operator==="<="),X=ae(this.semver,"<",f.semver,y)&&(this.operator===">="||this.operator===">")&&(f.operator==="<="||f.operator==="<"),te=ae(this.semver,">",f.semver,y)&&(this.operator==="<="||this.operator==="<")&&(f.operator===">="||f.operator===">");return C||D||k&&L||X||te},e.Range=he;function he(f,y){if((!y||typeof y!="object")&&(y={loose:!!y,includePrerelease:!1}),f instanceof he)return f.loose===!!y.loose&&f.includePrerelease===!!y.includePrerelease?f:new he(f.raw,y);if(f instanceof Ie)return new he(f.value,y);if(!(this instanceof he))return new he(f,y);if(this.options=y,this.loose=!!y.loose,this.includePrerelease=!!y.includePrerelease,this.raw=f,this.set=f.split(/\s*\|\|\s*/).map(function(S){return this.parseRange(S.trim())},this).filter(function(S){return S.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+f);this.format()}he.prototype.format=function(){return this.range=this.set.map(function(f){return f.join(" ").trim()}).join("||").trim(),this.range},he.prototype.toString=function(){return this.range},he.prototype.parseRange=function(f){var y=this.options.loose;f=f.trim();var S=y?o[Ae]:o[Ve];f=f.replace(S,et),t("hyphen replace",f),f=f.replace(o[re],ve),t("comparator trim",f,o[re]),f=f.replace(o[oe],ge),f=f.replace(o[Ee],se),f=f.split(/\s+/).join(" ");var C=y?o[$]:o[ee],D=f.split(" ").map(function(k){return Bt(k,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(D=D.filter(function(k){return!!k.match(C)})),D=D.map(function(k){return new Ie(k,this.options)},this),D},he.prototype.intersects=function(f,y){if(!(f instanceof he))throw new TypeError("a Range is required");return this.set.some(function(S){return S.every(function(C){return f.set.some(function(D){return D.every(function(k){return C.intersects(k,y)})})})})},e.toComparators=ut;function ut(f,y){return new he(f,y).set.map(function(S){return S.map(function(C){return C.value}).join(" ").trim().split(" ")})}function Bt(f,y){return t("comp",f,y),f=Ir(f,y),t("caret",f),f=Kt(f,y),t("tildes",f),f=je(f,y),t("xrange",f),f=Z(f,y),t("stars",f),f}function Ze(f){return!f||f.toLowerCase()==="x"||f==="*"}function Kt(f,y){return f.trim().split(/\s+/).map(function(S){return gr(S,y)}).join(" ")}function gr(f,y){var S=y.loose?o[Ue]:o[le];return f.replace(S,function(C,D,k,L,X){t("tilde",f,C,D,k,L,X);var te;return Ze(D)?te="":Ze(k)?te=">="+D+".0.0 <"+(+D+1)+".0.0":Ze(L)?te=">="+D+"."+k+".0 <"+D+"."+(+k+1)+".0":X?(t("replaceTilde pr",X),te=">="+D+"."+k+"."+L+"-"+X+" <"+D+"."+(+k+1)+".0"):te=">="+D+"."+k+"."+L+" <"+D+"."+(+k+1)+".0",t("tilde return",te),te})}function Ir(f,y){return f.trim().split(/\s+/).map(function(S){return Me(S,y)}).join(" ")}function Me(f,y){t("caret",f,y);var S=y.loose?o[rt]:o[We];return f.replace(S,function(C,D,k,L,X){t("caret",f,C,D,k,L,X);var te;return Ze(D)?te="":Ze(k)?te=">="+D+".0.0 <"+(+D+1)+".0.0":Ze(L)?D==="0"?te=">="+D+"."+k+".0 <"+D+"."+(+k+1)+".0":te=">="+D+"."+k+".0 <"+(+D+1)+".0.0":X?(t("replaceCaret pr",X),D==="0"?k==="0"?te=">="+D+"."+k+"."+L+"-"+X+" <"+D+"."+k+"."+(+L+1):te=">="+D+"."+k+"."+L+"-"+X+" <"+D+"."+(+k+1)+".0":te=">="+D+"."+k+"."+L+"-"+X+" <"+(+D+1)+".0.0"):(t("no pr"),D==="0"?k==="0"?te=">="+D+"."+k+"."+L+" <"+D+"."+k+"."+(+L+1):te=">="+D+"."+k+"."+L+" <"+D+"."+(+k+1)+".0":te=">="+D+"."+k+"."+L+" <"+(+D+1)+".0.0"),t("caret return",te),te})}function je(f,y){return t("replaceXRanges",f,y),f.split(/\s+/).map(function(S){return Se(S,y)}).join(" ")}function Se(f,y){f=f.trim();var S=y.loose?o[ot]:o[ct];return f.replace(S,function(C,D,k,L,X,te){t("xRange",f,C,D,k,L,X,te);var He=Ze(k),dt=He||Ze(L),Be=dt||Ze(X),it=Be;return D==="="&&it&&(D=""),He?D===">"||D==="<"?C="<0.0.0":C="*":D&&it?(dt&&(L=0),X=0,D===">"?(D=">=",dt?(k=+k+1,L=0,X=0):(L=+L+1,X=0)):D==="<="&&(D="<",dt?k=+k+1:L=+L+1),C=D+k+"."+L+"."+X):dt?C=">="+k+".0.0 <"+(+k+1)+".0.0":Be&&(C=">="+k+"."+L+".0 <"+k+"."+(+L+1)+".0"),t("xRange return",C),C})}function Z(f,y){return t("replaceStars",f,y),f.trim().replace(o[Ne],"")}function et(f,y,S,C,D,k,L,X,te,He,dt,Be,it){return Ze(S)?y="":Ze(C)?y=">="+S+".0.0":Ze(D)?y=">="+S+"."+C+".0":y=">="+y,Ze(te)?X="":Ze(He)?X="<"+(+te+1)+".0.0":Ze(dt)?X="<"+te+"."+(+He+1)+".0":Be?X="<="+te+"."+He+"."+dt+"-"+Be:X="<="+X,(y+" "+X).trim()}he.prototype.test=function(f){if(!f)return!1;typeof f=="string"&&(f=new ce(f,this.options));for(var y=0;y<this.set.length;y++)if(ze(this.set[y],f,this.options))return!0;return!1};function ze(f,y,S){for(var C=0;C<f.length;C++)if(!f[C].test(y))return!1;if(y.prerelease.length&&!S.includePrerelease){for(C=0;C<f.length;C++)if(t(f[C].semver),f[C].semver!==Le&&f[C].semver.prerelease.length>0){var D=f[C].semver;if(D.major===y.major&&D.minor===y.minor&&D.patch===y.patch)return!0}return!1}return!0}e.satisfies=pe;function pe(f,y,S){try{y=new he(y,S)}catch{return!1}return y.test(f)}e.maxSatisfying=mt;function mt(f,y,S){var C=null,D=null;try{var k=new he(y,S)}catch{return null}return f.forEach(function(L){k.test(L)&&(!C||D.compare(L)===-1)&&(C=L,D=new ce(C,S))}),C}e.minSatisfying=bt;function bt(f,y,S){var C=null,D=null;try{var k=new he(y,S)}catch{return null}return f.forEach(function(L){k.test(L)&&(!C||D.compare(L)===1)&&(C=L,D=new ce(C,S))}),C}e.minVersion=Ct;function Ct(f,y){f=new he(f,y);var S=new ce("0.0.0");if(f.test(S)||(S=new ce("0.0.0-0"),f.test(S)))return S;S=null;for(var C=0;C<f.set.length;++C){var D=f.set[C];D.forEach(function(k){var L=new ce(k.semver.version);switch(k.operator){case">":L.prerelease.length===0?L.patch++:L.prerelease.push(0),L.raw=L.format();case"":case">=":(!S||Fe(S,L))&&(S=L);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+k.operator)}})}return S&&f.test(S)?S:null}e.validRange=Vt;function Vt(f,y){try{return new he(f,y).range||"*"}catch{return null}}e.ltr=$t;function $t(f,y,S){return nt(f,y,"<",S)}e.gtr=Ht;function Ht(f,y,S){return nt(f,y,">",S)}e.outside=nt;function nt(f,y,S,C){f=new ce(f,C),y=new he(y,C);var D,k,L,X,te;switch(S){case">":D=Fe,k=Ye,L=$e,X=">",te=">=";break;case"<":D=$e,k=Oe,L=Fe,X="<",te="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(pe(f,y,C))return!1;for(var He=0;He<y.set.length;++He){var dt=y.set[He],Be=null,it=null;if(dt.forEach(function(pt){pt.semver===Le&&(pt=new Ie(">=0.0.0")),Be=Be||pt,it=it||pt,D(pt.semver,Be.semver,C)?Be=pt:L(pt.semver,it.semver,C)&&(it=pt)}),Be.operator===X||Be.operator===te||(!it.operator||it.operator===X)&&k(f,it.semver)||it.operator===te&&L(f,it.semver))return!1}return!0}e.prerelease=Dt;function Dt(f,y){var S=Ot(f,y);return S&&S.prerelease.length?S.prerelease:null}e.intersects=lt;function lt(f,y,S){return f=new he(f,S),y=new he(y,S),f.intersects(y)}e.coerce=gt;function gt(f){if(f instanceof ce)return f;if(typeof f!="string")return null;var y=f.match(o[xt]);return y==null?null:Ot(y[1]+"."+(y[2]||"0")+"."+(y[3]||"0"))}}),$u=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makePatchingRequire=void 0;var n=require("path"),t=Ap(),r=require("module"),s=Object.keys(process.binding("natives")),a=r.prototype.require;function o(i){var c={};return function(l){var d=a.apply(this,arguments);if(i[l]){var u=r._resolveFilename(l,this);if(c.hasOwnProperty(u))return c[u];var p=void 0;if(s.indexOf(l)<0)try{p=a.call(this,n.join(l,"package.json")).version}catch{return d}else p=process.version.substring(1);var v=p.indexOf("-");v>=0&&(p=p.substring(0,v));for(var m=d,g=0,E=i[l];g<E.length;g++){var T=E[g];t.satisfies(p,T.versionSpecifier)&&(m=T.patch(m,u))}return c[u]=m}return d}}e.makePatchingRequire=o}),Op=x((e,n)=>{n.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}}),dr=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.channel=e.makePatchingRequire=void 0;var n=$u(),t=$u();Object.defineProperty(e,"makePatchingRequire",{enumerable:!0,get:function(){return t.makePatchingRequire}});var r=function(o){return!0},s=function(){function o(){this.version=Op().version,this.subscribers={},this.contextPreservationFunction=function(i){return i},this.knownPatches={},this.currentlyPublishing=!1}return o.prototype.shouldPublish=function(i){var c=this.subscribers[i];return c?c.some(function(l){var d=l.filter;return!d||d(!1)}):!1},o.prototype.publish=function(i,c){if(!this.currentlyPublishing){var l=this.subscribers[i];if(l){var d={timestamp:Date.now(),data:c};this.currentlyPublishing=!0,l.forEach(function(u){var p=u.listener,v=u.filter;try{v&&v(!0)&&p(d)}catch{}}),this.currentlyPublishing=!1}}},o.prototype.subscribe=function(i,c,l){l===void 0&&(l=r),this.subscribers[i]||(this.subscribers[i]=[]),this.subscribers[i].push({listener:c,filter:l})},o.prototype.unsubscribe=function(i,c,l){l===void 0&&(l=r);var d=this.subscribers[i];if(d){for(var u=0;u<d.length;++u)if(d[u].listener===c&&d[u].filter===l)return d.splice(u,1),!0}return!1},o.prototype.reset=function(){var i=this;this.subscribers={},this.contextPreservationFunction=function(c){return c},Object.getOwnPropertyNames(this.knownPatches).forEach(function(c){return delete i.knownPatches[c]})},o.prototype.bindToContext=function(i){return this.contextPreservationFunction(i)},o.prototype.addContextPreservation=function(i){var c=this.contextPreservationFunction;this.contextPreservationFunction=function(l){return i(c(l))}},o.prototype.registerMonkeyPatch=function(i,c){this.knownPatches[i]||(this.knownPatches[i]=[]),this.knownPatches[i].push(c)},o.prototype.getPatchesObject=function(){return this.knownPatches},o}();global.diagnosticsSource||(global.diagnosticsSource=new s,a=require("module"),a.prototype.require=n.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var a;e.channel=global.diagnosticsSource}),Pp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Cp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._globalThis=void 0,e._globalThis=typeof globalThis=="object"?globalThis:global}),Dp=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Cp(),e)}),Rp=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Dp(),e)}),Yu=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="1.0.3"}),xp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCompatible=e._makeCompatibilityCheck=void 0;var n=Yu(),t=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function r(s){var a=new Set([s]),o=new Set,i=s.match(t);if(!i)return function(){return!1};var c={major:+i[1],minor:+i[2],patch:+i[3],prerelease:i[4]};if(c.prerelease!=null)return function(u){return u===s};function l(u){return o.add(u),!1}function d(u){return a.add(u),!0}return function(u){if(a.has(u))return!0;if(o.has(u))return!1;var p=u.match(t);if(!p)return l(u);var v={major:+p[1],minor:+p[2],patch:+p[3],prerelease:p[4]};return v.prerelease!=null||c.major!==v.major?l(u):c.major===0?c.minor===v.minor&&c.patch<=v.patch?d(u):l(u):c.minor<=v.minor?d(u):l(u)}}e._makeCompatibilityCheck=r,e.isCompatible=r(n.VERSION)}),Ti=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterGlobal=e.getGlobal=e.registerGlobal=void 0;var n=Rp(),t=Yu(),r=xp(),s=t.VERSION.split(".")[0],a=Symbol.for("opentelemetry.js.api."+s),o=n._globalThis;function i(d,u,p,v){var m;v===void 0&&(v=!1);var g=o[a]=(m=o[a])!==null&&m!==void 0?m:{version:t.VERSION};if(!v&&g[d]){var E=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+d);return p.error(E.stack||E.message),!1}if(g.version!==t.VERSION){var E=new Error("@opentelemetry/api: All API registration versions must match");return p.error(E.stack||E.message),!1}return g[d]=u,p.debug("@opentelemetry/api: Registered a global for "+d+" v"+t.VERSION+"."),!0}e.registerGlobal=i;function c(d){var u,p,v=(u=o[a])===null||u===void 0?void 0:u.version;if(!(!v||!r.isCompatible(v)))return(p=o[a])===null||p===void 0?void 0:p[d]}e.getGlobal=c;function l(d,u){u.debug("@opentelemetry/api: Unregistering a global for "+d+" v"+t.VERSION+".");var p=o[a];p&&delete p[d]}e.unregisterGlobal=l}),Np=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagComponentLogger=void 0;var n=Ti(),t=function(){function s(a){this._namespace=a.namespace||"DiagComponentLogger"}return s.prototype.debug=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return r("debug",this._namespace,a)},s.prototype.error=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return r("error",this._namespace,a)},s.prototype.info=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return r("info",this._namespace,a)},s.prototype.warn=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return r("warn",this._namespace,a)},s.prototype.verbose=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return r("verbose",this._namespace,a)},s}();e.DiagComponentLogger=t;function r(s,a,o){var i=n.getGlobal("diag");if(i)return o.unshift(a),i[s].apply(i,o)}}),es=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagLogLevel=void 0;var n;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(n=e.DiagLogLevel||(e.DiagLogLevel={}))}),Mp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLogLevelDiagLogger=void 0;var n=es();function t(r,s){r<n.DiagLogLevel.NONE?r=n.DiagLogLevel.NONE:r>n.DiagLogLevel.ALL&&(r=n.DiagLogLevel.ALL),s=s||{};function a(o,i){var c=s[o];return typeof c=="function"&&r>=i?c.bind(s):function(){}}return{error:a("error",n.DiagLogLevel.ERROR),warn:a("warn",n.DiagLogLevel.WARN),info:a("info",n.DiagLogLevel.INFO),debug:a("debug",n.DiagLogLevel.DEBUG),verbose:a("verbose",n.DiagLogLevel.VERBOSE)}}e.createLogLevelDiagLogger=t}),wi=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagAPI=void 0;var n=Np(),t=Mp(),r=es(),s=Ti(),a="diag",o=function(){function i(){function c(d){return function(){var u=s.getGlobal("diag");if(u)return u[d].apply(u,arguments)}}var l=this;l.setLogger=function(d,u){var p,v;if(u===void 0&&(u=r.DiagLogLevel.INFO),d===l){var m=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return l.error((p=m.stack)!==null&&p!==void 0?p:m.message),!1}var g=s.getGlobal("diag"),E=t.createLogLevelDiagLogger(u,d);if(g){var T=(v=new Error().stack)!==null&&v!==void 0?v:"<failed to generate stacktrace>";g.warn("Current logger will be overwritten from "+T),E.warn("Current logger will overwrite one already registered from "+T)}return s.registerGlobal("diag",E,l,!0)},l.disable=function(){s.unregisterGlobal(a,l)},l.createComponentLogger=function(d){return new n.DiagComponentLogger(d)},l.verbose=c("verbose"),l.debug=c("debug"),l.info=c("info"),l.warn=c("warn"),l.error=c("error")}return i.instance=function(){return this._instance||(this._instance=new i),this._instance},i}();e.DiagAPI=o}),kp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaggageImpl=void 0;var n=function(){function t(r){this._entries=r?new Map(r):new Map}return t.prototype.getEntry=function(r){var s=this._entries.get(r);if(s)return Object.assign({},s)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(r){var s=r[0],a=r[1];return[s,a]})},t.prototype.setEntry=function(r,s){var a=new t(this._entries);return a._entries.set(r,s),a},t.prototype.removeEntry=function(r){var s=new t(this._entries);return s._entries.delete(r),s},t.prototype.removeEntries=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];for(var a=new t(this._entries),o=0,i=r;o<i.length;o++){var c=i[o];a._entries.delete(c)}return a},t.prototype.clear=function(){return new t},t}();e.BaggageImpl=n}),Lp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataSymbol=void 0,e.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),Zu=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataFromString=e.createBaggage=void 0;var n=wi(),t=kp(),r=Lp(),s=n.DiagAPI.instance();function a(i){return i===void 0&&(i={}),new t.BaggageImpl(new Map(Object.entries(i)))}e.createBaggage=a;function o(i){return typeof i!="string"&&(s.error("Cannot create baggage metadata from unknown type: "+typeof i),i=""),{__TYPE__:r.baggageEntryMetadataSymbol,toString:function(){return i}}}e.baggageEntryMetadataFromString=o}),jp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Hp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Up=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagConsoleLogger=void 0;var n=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],t=function(){function r(){function s(o){return function(){var i=arguments;if(console){var c=console[o];if(typeof c!="function"&&(c=console.log),typeof c=="function")return c.apply(console,i)}}}for(var a=0;a<n.length;a++)this[n[a].n]=s(n[a].c)}return r}();e.DiagConsoleLogger=t}),Fp=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Up(),e),t(es(),e)}),Ju=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTextMapSetter=e.defaultTextMapGetter=void 0,e.defaultTextMapGetter={get:function(n,t){if(n!=null)return n[t]},keys:function(n){return n==null?[]:Object.keys(n)}},e.defaultTextMapSetter={set:function(n,t,r){n!=null&&(n[t]=r)}}}),Bp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),qp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),fo=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROOT_CONTEXT=e.createContextKey=void 0;function n(r){return Symbol.for(r)}e.createContextKey=n;var t=function(){function r(s){var a=this;a._currentContext=s?new Map(s):new Map,a.getValue=function(o){return a._currentContext.get(o)},a.setValue=function(o,i){var c=new r(a._currentContext);return c._currentContext.set(o,i),c},a.deleteValue=function(o){var i=new r(a._currentContext);return i._currentContext.delete(o),i}}return r}();e.ROOT_CONTEXT=new t}),Gp=x(e=>{"use strict";var n=e&&e.__spreadArray||function(s,a){for(var o=0,i=a.length,c=s.length;o<i;o++,c++)s[c]=a[o];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.NoopContextManager=void 0;var t=fo(),r=function(){function s(){}return s.prototype.active=function(){return t.ROOT_CONTEXT},s.prototype.with=function(a,o,i){for(var c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];return o.call.apply(o,n([i],c))},s.prototype.bind=function(a,o){return o},s.prototype.enable=function(){return this},s.prototype.disable=function(){return this},s}();e.NoopContextManager=r}),el=x(e=>{"use strict";var n=e&&e.__spreadArray||function(c,l){for(var d=0,u=l.length,p=c.length;d<u;d++,p++)c[p]=l[d];return c};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextAPI=void 0;var t=Gp(),r=Ti(),s=wi(),a="context",o=new t.NoopContextManager,i=function(){function c(){}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalContextManager=function(l){return r.registerGlobal(a,l,s.DiagAPI.instance())},c.prototype.active=function(){return this._getContextManager().active()},c.prototype.with=function(l,d,u){for(var p,v=[],m=3;m<arguments.length;m++)v[m-3]=arguments[m];return(p=this._getContextManager()).with.apply(p,n([l,d,u],v))},c.prototype.bind=function(l,d){return this._getContextManager().bind(l,d)},c.prototype._getContextManager=function(){return r.getGlobal(a)||o},c.prototype.disable=function(){this._getContextManager().disable(),r.unregisterGlobal(a,s.DiagAPI.instance())},c}();e.ContextAPI=i}),tl=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFlags=void 0;var n;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(n=e.TraceFlags||(e.TraceFlags={}))}),ts=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=void 0;var n=tl();e.INVALID_SPANID="0000000000000000",e.INVALID_TRACEID="00000000000000000000000000000000",e.INVALID_SPAN_CONTEXT={traceId:e.INVALID_TRACEID,spanId:e.INVALID_SPANID,traceFlags:n.TraceFlags.NONE}}),rs=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonRecordingSpan=void 0;var n=ts(),t=function(){function r(s){s===void 0&&(s=n.INVALID_SPAN_CONTEXT),this._spanContext=s}return r.prototype.spanContext=function(){return this._spanContext},r.prototype.setAttribute=function(s,a){return this},r.prototype.setAttributes=function(s){return this},r.prototype.addEvent=function(s,a){return this},r.prototype.setStatus=function(s){return this},r.prototype.updateName=function(s){return this},r.prototype.end=function(s){},r.prototype.isRecording=function(){return!1},r.prototype.recordException=function(s,a){},r}();e.NonRecordingSpan=t}),rl=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSpanContext=e.setSpanContext=e.deleteSpan=e.setSpan=e.getSpan=void 0;var n=fo(),t=rs(),r=n.createContextKey("OpenTelemetry Context Key SPAN");function s(l){return l.getValue(r)||void 0}e.getSpan=s;function a(l,d){return l.setValue(r,d)}e.setSpan=a;function o(l){return l.deleteValue(r)}e.deleteSpan=o;function i(l,d){return a(l,new t.NonRecordingSpan(d))}e.setSpanContext=i;function c(l){var d;return(d=s(l))===null||d===void 0?void 0:d.spanContext()}e.getSpanContext=c}),ns=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapSpanContext=e.isSpanContextValid=e.isValidSpanId=e.isValidTraceId=void 0;var n=ts(),t=rs(),r=/^([0-9a-f]{32})$/i,s=/^[0-9a-f]{16}$/i;function a(l){return r.test(l)&&l!==n.INVALID_TRACEID}e.isValidTraceId=a;function o(l){return s.test(l)&&l!==n.INVALID_SPANID}e.isValidSpanId=o;function i(l){return a(l.traceId)&&o(l.spanId)}e.isSpanContextValid=i;function c(l){return new t.NonRecordingSpan(l)}e.wrapSpanContext=c}),nl=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracer=void 0;var n=el(),t=rl(),r=rs(),s=ns(),a=n.ContextAPI.getInstance(),o=function(){function c(){}return c.prototype.startSpan=function(l,d,u){var p=!!d?.root;if(p)return new r.NonRecordingSpan;var v=u&&t.getSpanContext(u);return i(v)&&s.isSpanContextValid(v)?new r.NonRecordingSpan(v):new r.NonRecordingSpan},c.prototype.startActiveSpan=function(l,d,u,p){var v,m,g;if(!(arguments.length<2)){arguments.length===2?g=d:arguments.length===3?(v=d,g=u):(v=d,m=u,g=p);var E=m??a.active(),T=this.startSpan(l,v,E),O=t.setSpan(E,T);return a.with(O,g,void 0,T)}},c}();e.NoopTracer=o;function i(c){return typeof c=="object"&&typeof c.spanId=="string"&&typeof c.traceId=="string"&&typeof c.traceFlags=="number"}}),il=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracer=void 0;var n=nl(),t=new n.NoopTracer,r=function(){function s(a,o,i){this._provider=a,this.name=o,this.version=i}return s.prototype.startSpan=function(a,o,i){return this._getTracer().startSpan(a,o,i)},s.prototype.startActiveSpan=function(a,o,i,c){var l=this._getTracer();return Reflect.apply(l.startActiveSpan,l,arguments)},s.prototype._getTracer=function(){if(this._delegate)return this._delegate;var a=this._provider.getDelegateTracer(this.name,this.version);return a?(this._delegate=a,this._delegate):t},s}();e.ProxyTracer=r}),Vp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracerProvider=void 0;var n=nl(),t=function(){function r(){}return r.prototype.getTracer=function(s,a){return new n.NoopTracer},r}();e.NoopTracerProvider=t}),ol=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracerProvider=void 0;var n=il(),t=Vp(),r=new t.NoopTracerProvider,s=function(){function a(){}return a.prototype.getTracer=function(o,i){var c;return(c=this.getDelegateTracer(o,i))!==null&&c!==void 0?c:new n.ProxyTracer(this,o,i)},a.prototype.getDelegate=function(){var o;return(o=this._delegate)!==null&&o!==void 0?o:r},a.prototype.setDelegate=function(o){this._delegate=o},a.prototype.getDelegateTracer=function(o,i){var c;return(c=this._delegate)===null||c===void 0?void 0:c.getTracer(o,i)},a}();e.ProxyTracerProvider=s}),zp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Wp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SamplingDecision=void 0;var n;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(n=e.SamplingDecision||(e.SamplingDecision={}))}),$p=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Kp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanKind=void 0;var n;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(n=e.SpanKind||(e.SpanKind={}))}),Qp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Xp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Yp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanStatusCode=void 0;var n;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(n=e.SpanStatusCode||(e.SpanStatusCode={}))}),Zp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Jp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),eh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),th=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),rh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceAPI=void 0;var n=Ti(),t=ol(),r=ns(),s=rl(),a=wi(),o="trace",i=function(){function c(){this._proxyTracerProvider=new t.ProxyTracerProvider,this.wrapSpanContext=r.wrapSpanContext,this.isSpanContextValid=r.isSpanContextValid,this.deleteSpan=s.deleteSpan,this.getSpan=s.getSpan,this.getSpanContext=s.getSpanContext,this.setSpan=s.setSpan,this.setSpanContext=s.setSpanContext}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalTracerProvider=function(l){var d=n.registerGlobal(o,this._proxyTracerProvider,a.DiagAPI.instance());return d&&this._proxyTracerProvider.setDelegate(l),d},c.prototype.getTracerProvider=function(){return n.getGlobal(o)||this._proxyTracerProvider},c.prototype.getTracer=function(l,d){return this.getTracerProvider().getTracer(l,d)},c.prototype.disable=function(){n.unregisterGlobal(o,a.DiagAPI.instance()),this._proxyTracerProvider=new t.ProxyTracerProvider},c}();e.TraceAPI=i}),nh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTextMapPropagator=void 0;var n=function(){function t(){}return t.prototype.inject=function(r,s){},t.prototype.extract=function(r,s){return r},t.prototype.fields=function(){return[]},t}();e.NoopTextMapPropagator=n}),ih=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteBaggage=e.setBaggage=e.getBaggage=void 0;var n=fo(),t=n.createContextKey("OpenTelemetry Baggage Key");function r(o){return o.getValue(t)||void 0}e.getBaggage=r;function s(o,i){return o.setValue(t,i)}e.setBaggage=s;function a(o){return o.deleteValue(t)}e.deleteBaggage=a}),oh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropagationAPI=void 0;var n=Ti(),t=nh(),r=Ju(),s=ih(),a=Zu(),o=wi(),i="propagation",c=new t.NoopTextMapPropagator,l=function(){function d(){this.createBaggage=a.createBaggage,this.getBaggage=s.getBaggage,this.setBaggage=s.setBaggage,this.deleteBaggage=s.deleteBaggage}return d.getInstance=function(){return this._instance||(this._instance=new d),this._instance},d.prototype.setGlobalPropagator=function(u){return n.registerGlobal(i,u,o.DiagAPI.instance())},d.prototype.inject=function(u,p,v){return v===void 0&&(v=r.defaultTextMapSetter),this._getGlobalPropagator().inject(u,p,v)},d.prototype.extract=function(u,p,v){return v===void 0&&(v=r.defaultTextMapGetter),this._getGlobalPropagator().extract(u,p,v)},d.prototype.fields=function(){return this._getGlobalPropagator().fields()},d.prototype.disable=function(){n.unregisterGlobal(i,o.DiagAPI.instance())},d.prototype._getGlobalPropagator=function(){return n.getGlobal(i)||c},d}();e.PropagationAPI=l}),tr=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(d,u,p,v){v===void 0&&(v=p),Object.defineProperty(d,v,{enumerable:!0,get:function(){return u[p]}})}:function(d,u,p,v){v===void 0&&(v=p),d[v]=u[p]}),t=e&&e.__exportStar||function(d,u){for(var p in d)p!=="default"&&!Object.prototype.hasOwnProperty.call(u,p)&&n(u,d,p)};Object.defineProperty(e,"__esModule",{value:!0}),e.diag=e.propagation=e.trace=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.baggageEntryMetadataFromString=void 0,t(Pp(),e);var r=Zu();Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return r.baggageEntryMetadataFromString}}),t(jp(),e),t(Hp(),e),t(Fp(),e),t(Ju(),e),t(Bp(),e),t(qp(),e),t(il(),e),t(ol(),e),t(zp(),e),t(Wp(),e),t($p(),e),t(Kp(),e),t(Qp(),e),t(Xp(),e),t(Yp(),e),t(tl(),e),t(Zp(),e),t(Jp(),e),t(eh(),e);var s=ns();Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return s.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return s.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return s.isValidSpanId}});var a=ts();Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return a.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return a.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return a.INVALID_SPAN_CONTEXT}}),t(fo(),e),t(th(),e);var o=el();e.context=o.ContextAPI.getInstance();var i=rh();e.trace=i.TraceAPI.getInstance();var c=oh();e.propagation=c.PropagationAPI.getInstance();var l=wi();e.diag=l.DiagAPI.instance(),e.default={trace:e.trace,context:e.context,propagation:e.propagation,diag:e.diag}}),is=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTracingSuppressed=e.unsuppressTracing=e.suppressTracing=void 0;var n=tr(),t=n.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function r(o){return o.setValue(t,!0)}e.suppressTracing=r;function s(o){return o.deleteValue(t)}e.unsuppressTracing=s;function a(o){return o.getValue(t)===!0}e.isTracingSuppressed=a}),al=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BAGGAGE_MAX_TOTAL_LENGTH=e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=e.BAGGAGE_MAX_NAME_VALUE_PAIRS=e.BAGGAGE_HEADER=e.BAGGAGE_ITEMS_SEPARATOR=e.BAGGAGE_PROPERTIES_SEPARATOR=e.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,e.BAGGAGE_KEY_PAIR_SEPARATOR="=",e.BAGGAGE_PROPERTIES_SEPARATOR=";",e.BAGGAGE_ITEMS_SEPARATOR=",",e.BAGGAGE_HEADER="baggage",e.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,e.BAGGAGE_MAX_TOTAL_LENGTH=8192}),sl=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseKeyPairsIntoRecord=e.parsePairKeyValue=e.getKeyPairs=e.serializeKeyPairs=void 0;var n=tr(),t=al(),r=i=>i.reduce((c,l)=>{let d=`${c}${c!==""?t.BAGGAGE_ITEMS_SEPARATOR:""}${l}`;return d.length>t.BAGGAGE_MAX_TOTAL_LENGTH?c:d},"");e.serializeKeyPairs=r;var s=i=>i.getAllEntries().map(([c,l])=>`${encodeURIComponent(c)}=${encodeURIComponent(l.value)}`);e.getKeyPairs=s;var a=i=>{let c=i.split(t.BAGGAGE_PROPERTIES_SEPARATOR);if(c.length<=0)return;let l=c.shift();if(!l)return;let d=l.split(t.BAGGAGE_KEY_PAIR_SEPARATOR);if(d.length!==2)return;let u=decodeURIComponent(d[0].trim()),p=decodeURIComponent(d[1].trim()),v;return c.length>0&&(v=n.baggageEntryMetadataFromString(c.join(t.BAGGAGE_PROPERTIES_SEPARATOR))),{key:u,value:p,metadata:v}};e.parsePairKeyValue=a;var o=i=>typeof i!="string"||i.length===0?{}:i.split(t.BAGGAGE_ITEMS_SEPARATOR).map(c=>e.parsePairKeyValue(c)).filter(c=>c!==void 0&&c.value.length>0).reduce((c,l)=>(c[l.key]=l.value,c),{});e.parseKeyPairsIntoRecord=o}),ah=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpBaggagePropagator=void 0;var n=tr(),t=is(),r=al(),s=sl(),a=class{inject(o,i,c){let l=n.propagation.getBaggage(o);if(!l||t.isTracingSuppressed(o))return;let d=s.getKeyPairs(l).filter(p=>p.length<=r.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,r.BAGGAGE_MAX_NAME_VALUE_PAIRS),u=s.serializeKeyPairs(d);u.length>0&&c.set(i,r.BAGGAGE_HEADER,u)}extract(o,i,c){let l=c.get(i,r.BAGGAGE_HEADER);if(!l)return o;let d={};return l.length===0||(l.split(r.BAGGAGE_ITEMS_SEPARATOR).forEach(u=>{let p=s.parsePairKeyValue(u);if(p){let v={value:p.value};p.metadata&&(v.metadata=p.metadata),d[p.key]=v}}),Object.entries(d).length===0)?o:n.propagation.setBaggage(o,n.propagation.createBaggage(d))}fields(){return[r.BAGGAGE_HEADER]}};e.HttpBaggagePropagator=a}),sh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAttributeValue=e.sanitizeAttributes=void 0;function n(a){let o={};if(a==null||typeof a!="object")return o;for(let[i,c]of Object.entries(a))t(c)&&(Array.isArray(c)?o[i]=c.slice():o[i]=c);return o}e.sanitizeAttributes=n;function t(a){return a==null?!0:Array.isArray(a)?r(a):s(a)}e.isAttributeValue=t;function r(a){let o;for(let i of a)if(i!=null){if(!o){if(s(i)){o=typeof i;continue}return!1}if(typeof i!==o)return!1}return!0}function s(a){switch(typeof a){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),cl=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loggingErrorHandler=void 0;var n=tr();function t(){return a=>{n.diag.error(r(a))}}e.loggingErrorHandler=t;function r(a){return typeof a=="string"?a:JSON.stringify(s(a))}function s(a){let o={},i=a;for(;i!==null;)Object.getOwnPropertyNames(i).forEach(c=>{if(o[c])return;let l=i[c];l&&(o[c]=String(l))}),i=Object.getPrototypeOf(i);return o}}),ul=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalErrorHandler=e.setGlobalErrorHandler=void 0;var n=cl(),t=n.loggingErrorHandler();function r(a){t=a}e.setGlobalErrorHandler=r;var s=a=>{try{t(a)}catch{}};e.globalErrorHandler=s}),ll=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TracesSamplerValues=void 0;var n;(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(n=e.TracesSamplerValues||(e.TracesSamplerValues={}))}),dl=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseEnvironment=e.DEFAULT_ENVIRONMENT=void 0;var n=tr(),t=ll(),r=",",s=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function a(v){return s.indexOf(v)>-1}var o=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function i(v){return o.indexOf(v)>-1}e.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:n.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:t.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function c(v,m,g,E=-1/0,T=1/0){if(typeof g[v]<"u"){let O=Number(g[v]);isNaN(O)||(O<E?m[v]=E:O>T?m[v]=T:m[v]=O)}}function l(v,m,g,E=r){let T=g[v];typeof T=="string"&&(m[v]=T.split(E).map(O=>O.trim()))}var d={ALL:n.DiagLogLevel.ALL,VERBOSE:n.DiagLogLevel.VERBOSE,DEBUG:n.DiagLogLevel.DEBUG,INFO:n.DiagLogLevel.INFO,WARN:n.DiagLogLevel.WARN,ERROR:n.DiagLogLevel.ERROR,NONE:n.DiagLogLevel.NONE};function u(v,m,g){let E=g[v];if(typeof E=="string"){let T=d[E.toUpperCase()];T!=null&&(m[v]=T)}}function p(v){let m={};for(let g in e.DEFAULT_ENVIRONMENT){let E=g;switch(E){case"OTEL_LOG_LEVEL":u(E,m,v);break;default:if(a(E))c(E,m,v);else if(i(E))l(E,m,v);else{let T=v[E];typeof T<"u"&&T!==null&&(m[E]=String(T))}}}return m}e.parseEnvironment=p}),ch=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnv=void 0;var n=require("os"),t=dl();function r(){let s=t.parseEnvironment(process.env);return Object.assign({HOSTNAME:n.hostname()},t.DEFAULT_ENVIRONMENT,s)}e.getEnv=r}),uh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexToBase64=void 0;function n(t){let r=t.length,s="";for(let a=0;a<r;a+=2){let o=t.substring(a,a+2),i=parseInt(o,16);s+=String.fromCharCode(i)}return Buffer.from(s,"ascii").toString("base64")}e.hexToBase64=n}),lh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomIdGenerator=void 0;var n=8,t=16,r=class{constructor(){this.generateTraceId=a(t),this.generateSpanId=a(n)}};e.RandomIdGenerator=r;var s=Buffer.allocUnsafe(t);function a(o){return function(){for(let i=0;i<o/4;i++)s.writeUInt32BE(Math.random()*2**32>>>0,i*4);for(let i=0;i<o&&!(s[i]>0);i++)i===o-1&&(s[o-1]=1);return s.toString("hex",0,o)}}}),dh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.otperformance=void 0;var n=require("perf_hooks");e.otperformance=n.performance}),Ja=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="0.23.0"}),fh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RpcGrpcStatusCodeValues=e.MessagingOperationValues=e.MessagingDestinationKindValues=e.HttpFlavorValues=e.NetTransportValues=e.FaasInvokedProviderValues=e.FaasDocumentOperationValues=e.FaasTriggerValues=e.DbCassandraConsistencyLevelValues=e.DbSystemValues=e.SemanticAttributes=void 0,e.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var n;(function(u){u.OTHER_SQL="other_sql",u.MSSQL="mssql",u.MYSQL="mysql",u.ORACLE="oracle",u.DB2="db2",u.POSTGRESQL="postgresql",u.REDSHIFT="redshift",u.HIVE="hive",u.CLOUDSCAPE="cloudscape",u.HSQLDB="hsqldb",u.PROGRESS="progress",u.MAXDB="maxdb",u.HANADB="hanadb",u.INGRES="ingres",u.FIRSTSQL="firstsql",u.EDB="edb",u.CACHE="cache",u.ADABAS="adabas",u.FIREBIRD="firebird",u.DERBY="derby",u.FILEMAKER="filemaker",u.INFORMIX="informix",u.INSTANTDB="instantdb",u.INTERBASE="interbase",u.MARIADB="mariadb",u.NETEZZA="netezza",u.PERVASIVE="pervasive",u.POINTBASE="pointbase",u.SQLITE="sqlite",u.SYBASE="sybase",u.TERADATA="teradata",u.VERTICA="vertica",u.H2="h2",u.COLDFUSION="coldfusion",u.CASSANDRA="cassandra",u.HBASE="hbase",u.MONGODB="mongodb",u.REDIS="redis",u.COUCHBASE="couchbase",u.COUCHDB="couchdb",u.COSMOSDB="cosmosdb",u.DYNAMODB="dynamodb",u.NEO4J="neo4j",u.GEODE="geode",u.ELASTICSEARCH="elasticsearch",u.MEMCACHED="memcached",u.COCKROACHDB="cockroachdb"})(n=e.DbSystemValues||(e.DbSystemValues={}));var t;(function(u){u.ALL="all",u.EACH_QUORUM="each_quorum",u.QUORUM="quorum",u.LOCAL_QUORUM="local_quorum",u.ONE="one",u.TWO="two",u.THREE="three",u.LOCAL_ONE="local_one",u.ANY="any",u.SERIAL="serial",u.LOCAL_SERIAL="local_serial"})(t=e.DbCassandraConsistencyLevelValues||(e.DbCassandraConsistencyLevelValues={}));var r;(function(u){u.DATASOURCE="datasource",u.HTTP="http",u.PUBSUB="pubsub",u.TIMER="timer",u.OTHER="other"})(r=e.FaasTriggerValues||(e.FaasTriggerValues={}));var s;(function(u){u.INSERT="insert",u.EDIT="edit",u.DELETE="delete"})(s=e.FaasDocumentOperationValues||(e.FaasDocumentOperationValues={}));var a;(function(u){u.AWS="aws",u.AZURE="azure",u.GCP="gcp"})(a=e.FaasInvokedProviderValues||(e.FaasInvokedProviderValues={}));var o;(function(u){u.IP_TCP="ip_tcp",u.IP_UDP="ip_udp",u.IP="ip",u.UNIX="unix",u.PIPE="pipe",u.INPROC="inproc",u.OTHER="other"})(o=e.NetTransportValues||(e.NetTransportValues={}));var i;(function(u){u.HTTP_1_0="1.0",u.HTTP_1_1="1.1",u.HTTP_2_0="2.0",u.SPDY="SPDY",u.QUIC="QUIC"})(i=e.HttpFlavorValues||(e.HttpFlavorValues={}));var c;(function(u){u.QUEUE="queue",u.TOPIC="topic"})(c=e.MessagingDestinationKindValues||(e.MessagingDestinationKindValues={}));var l;(function(u){u.RECEIVE="receive",u.PROCESS="process"})(l=e.MessagingOperationValues||(e.MessagingOperationValues={}));var d;(function(u){u[u.OK=0]="OK",u[u.CANCELLED=1]="CANCELLED",u[u.UNKNOWN=2]="UNKNOWN",u[u.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",u[u.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",u[u.NOT_FOUND=5]="NOT_FOUND",u[u.ALREADY_EXISTS=6]="ALREADY_EXISTS",u[u.PERMISSION_DENIED=7]="PERMISSION_DENIED",u[u.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",u[u.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",u[u.ABORTED=10]="ABORTED",u[u.OUT_OF_RANGE=11]="OUT_OF_RANGE",u[u.UNIMPLEMENTED=12]="UNIMPLEMENTED",u[u.INTERNAL=13]="INTERNAL",u[u.UNAVAILABLE=14]="UNAVAILABLE",u[u.DATA_LOSS=15]="DATA_LOSS",u[u.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(d=e.RpcGrpcStatusCodeValues||(e.RpcGrpcStatusCodeValues={}))}),ph=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(fh(),e)}),hh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetrySdkLanguageValues=e.OsTypeValues=e.HostArchValues=e.AwsEcsLaunchtypeValues=e.CloudPlatformValues=e.CloudProviderValues=e.ResourceAttributes=void 0,e.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var n;(function(i){i.AWS="aws",i.AZURE="azure",i.GCP="gcp"})(n=e.CloudProviderValues||(e.CloudProviderValues={}));var t;(function(i){i.AWS_EC2="aws_ec2",i.AWS_ECS="aws_ecs",i.AWS_EKS="aws_eks",i.AWS_LAMBDA="aws_lambda",i.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",i.AZURE_VM="azure_vm",i.AZURE_CONTAINER_INSTANCES="azure_container_instances",i.AZURE_AKS="azure_aks",i.AZURE_FUNCTIONS="azure_functions",i.AZURE_APP_SERVICE="azure_app_service",i.GCP_COMPUTE_ENGINE="gcp_compute_engine",i.GCP_CLOUD_RUN="gcp_cloud_run",i.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",i.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",i.GCP_APP_ENGINE="gcp_app_engine"})(t=e.CloudPlatformValues||(e.CloudPlatformValues={}));var r;(function(i){i.EC2="ec2",i.FARGATE="fargate"})(r=e.AwsEcsLaunchtypeValues||(e.AwsEcsLaunchtypeValues={}));var s;(function(i){i.AMD64="amd64",i.ARM32="arm32",i.ARM64="arm64",i.IA64="ia64",i.PPC32="ppc32",i.PPC64="ppc64",i.X86="x86"})(s=e.HostArchValues||(e.HostArchValues={}));var a;(function(i){i.WINDOWS="windows",i.LINUX="linux",i.DARWIN="darwin",i.FREEBSD="freebsd",i.NETBSD="netbsd",i.OPENBSD="openbsd",i.DRAGONFLYBSD="dragonflybsd",i.HPUX="hpux",i.AIX="aix",i.SOLARIS="solaris",i.Z_OS="z_os"})(a=e.OsTypeValues||(e.OsTypeValues={}));var o;(function(i){i.CPP="cpp",i.DOTNET="dotnet",i.ERLANG="erlang",i.GO="go",i.JAVA="java",i.NODEJS="nodejs",i.PHP="php",i.PYTHON="python",i.RUBY="ruby",i.WEBJS="webjs"})(o=e.TelemetrySdkLanguageValues||(e.TelemetrySdkLanguageValues={}))}),vh=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(hh(),e)}),Ii=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(ph(),e),t(vh(),e)}),mh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SDK_INFO=void 0;var n=Ja(),t=Ii();e.SDK_INFO={[t.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[t.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:t.TelemetrySdkLanguageValues.NODEJS,[t.ResourceAttributes.TELEMETRY_SDK_VERSION]:n.VERSION}}),gh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unrefTimer=void 0;function n(t){t.unref()}e.unrefTimer=n}),yh=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(ch(),e),t(uh(),e),t(lh(),e),t(dh(),e),t(mh(),e),t(gh(),e)}),fl=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(yh(),e)}),_h=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTimeInput=e.isTimeInputHrTime=e.hrTimeToMicroseconds=e.hrTimeToMilliseconds=e.hrTimeToNanoseconds=e.hrTimeToTimeStamp=e.hrTimeDuration=e.timeInputToHrTime=e.hrTime=void 0;var n=fl(),t=9,r=Math.pow(10,t);function s(g){let E=g/1e3,T=Math.trunc(E),O=Number((E-T).toFixed(t))*r;return[T,O]}function a(){let g=n.otperformance.timeOrigin;if(typeof g!="number"){let E=n.otperformance;g=E.timing&&E.timing.fetchStart}return g}function o(g){let E=s(a()),T=s(typeof g=="number"?g:n.otperformance.now()),O=E[0]+T[0],P=E[1]+T[1];return P>r&&(P-=r,O+=1),[O,P]}e.hrTime=o;function i(g){if(v(g))return g;if(typeof g=="number")return g<a()?o(g):s(g);if(g instanceof Date)return s(g.getTime());throw TypeError("Invalid input type")}e.timeInputToHrTime=i;function c(g,E){let T=E[0]-g[0],O=E[1]-g[1];return O<0&&(T-=1,O+=r),[T,O]}e.hrTimeDuration=c;function l(g){let E=t,T=`${"0".repeat(E)}${g[1]}Z`,O=T.substr(T.length-E-1);return new Date(g[0]*1e3).toISOString().replace("000Z",O)}e.hrTimeToTimeStamp=l;function d(g){return g[0]*r+g[1]}e.hrTimeToNanoseconds=d;function u(g){return Math.round(g[0]*1e3+g[1]/1e6)}e.hrTimeToMilliseconds=u;function p(g){return Math.round(g[0]*1e6+g[1]/1e3)}e.hrTimeToMicroseconds=p;function v(g){return Array.isArray(g)&&g.length===2&&typeof g[0]=="number"&&typeof g[1]=="number"}e.isTimeInputHrTime=v;function m(g){return v(g)||typeof g=="number"||g instanceof Date}e.isTimeInput=m}),Eh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),bh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExportResultCode=void 0;var n;(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(n=e.ExportResultCode||(e.ExportResultCode={}))}),Sh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositePropagator=void 0;var n=tr(),t=class{constructor(r={}){var s;this._propagators=(s=r.propagators)!==null&&s!==void 0?s:[],this._fields=Array.from(new Set(this._propagators.map(a=>typeof a.fields=="function"?a.fields():[]).reduce((a,o)=>a.concat(o),[])))}inject(r,s,a){for(let o of this._propagators)try{o.inject(r,s,a)}catch(i){n.diag.warn(`Failed to inject with ${o.constructor.name}. Err: ${i.message}`)}}extract(r,s,a){return this._propagators.reduce((o,i)=>{try{return i.extract(o,s,a)}catch(c){n.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${c.message}`)}return o},r)}fields(){return this._fields.slice()}};e.CompositePropagator=t}),Th=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateValue=e.validateKey=void 0;var n="[_0-9a-z-*/]",t=`[a-z]${n}{0,255}`,r=`[a-z0-9]${n}{0,240}@[a-z]${n}{0,13}`,s=new RegExp(`^(?:${t}|${r})$`),a=/^[ -~]{0,255}[!-~]$/,o=/,|=/;function i(l){return s.test(l)}e.validateKey=i;function c(l){return a.test(l)&&!o.test(l)}e.validateValue=c}),pl=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceState=void 0;var n=Th(),t=32,r=512,s=",",a="=",o=class{constructor(i){this._internalState=new Map,i&&this._parse(i)}set(i,c){let l=this._clone();return l._internalState.has(i)&&l._internalState.delete(i),l._internalState.set(i,c),l}unset(i){let c=this._clone();return c._internalState.delete(i),c}get(i){return this._internalState.get(i)}serialize(){return this._keys().reduce((i,c)=>(i.push(c+a+this.get(c)),i),[]).join(s)}_parse(i){i.length>r||(this._internalState=i.split(s).reverse().reduce((c,l)=>{let d=l.trim(),u=d.indexOf(a);if(u!==-1){let p=d.slice(0,u),v=d.slice(u+1,l.length);n.validateKey(p)&&n.validateValue(v)&&c.set(p,v)}return c},new Map),this._internalState.size>t&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,t))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let i=new o;return i._internalState=new Map(this._internalState),i}};e.TraceState=o}),wh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpTraceContextPropagator=e.parseTraceParent=e.TRACE_STATE_HEADER=e.TRACE_PARENT_HEADER=void 0;var n=tr(),t=is(),r=pl();e.TRACE_PARENT_HEADER="traceparent",e.TRACE_STATE_HEADER="tracestate";var s="00",a="(?!ff)[\\da-f]{2}",o="(?![0]{32})[\\da-f]{32}",i="(?![0]{16})[\\da-f]{16}",c="[\\da-f]{2}",l=new RegExp(`^\\s?(${a})-(${o})-(${i})-(${c})(-.*)?\\s?$`);function d(p){let v=l.exec(p);return!v||v[1]==="00"&&v[5]?null:{traceId:v[2],spanId:v[3],traceFlags:parseInt(v[4],16)}}e.parseTraceParent=d;var u=class{inject(p,v,m){let g=n.trace.getSpanContext(p);if(!g||t.isTracingSuppressed(p)||!n.isSpanContextValid(g))return;let E=`${s}-${g.traceId}-${g.spanId}-0${Number(g.traceFlags||n.TraceFlags.NONE).toString(16)}`;m.set(v,e.TRACE_PARENT_HEADER,E),g.traceState&&m.set(v,e.TRACE_STATE_HEADER,g.traceState.serialize())}extract(p,v,m){let g=m.get(v,e.TRACE_PARENT_HEADER);if(!g)return p;let E=Array.isArray(g)?g[0]:g;if(typeof E!="string")return p;let T=d(E);if(!T)return p;T.isRemote=!0;let O=m.get(v,e.TRACE_STATE_HEADER);if(O){let P=Array.isArray(O)?O.join(","):O;T.traceState=new r.TraceState(typeof P=="string"?P:void 0)}return n.trace.setSpanContext(p,T)}fields(){return[e.TRACE_PARENT_HEADER,e.TRACE_STATE_HEADER]}};e.HttpTraceContextPropagator=u}),Ih=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ah=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRPCMetadata=e.deleteRPCMetadata=e.setRPCMetadata=e.RPCType=void 0;var n=tr(),t=n.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),r;(function(i){i.HTTP="http"})(r=e.RPCType||(e.RPCType={}));function s(i,c){return i.setValue(t,c)}e.setRPCMetadata=s;function a(i){return i.deleteValue(t)}e.deleteRPCMetadata=a;function o(i){return i.getValue(t)}e.getRPCMetadata=o}),hl=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOffSampler=void 0;var n=tr(),t=class{shouldSample(){return{decision:n.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};e.AlwaysOffSampler=t}),vl=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOnSampler=void 0;var n=tr(),t=class{shouldSample(){return{decision:n.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};e.AlwaysOnSampler=t}),Oh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParentBasedSampler=void 0;var n=tr(),t=ul(),r=hl(),s=vl(),a=class{constructor(o){var i,c,l,d;this._root=o.root,this._root||(t.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new s.AlwaysOnSampler),this._remoteParentSampled=(i=o.remoteParentSampled)!==null&&i!==void 0?i:new s.AlwaysOnSampler,this._remoteParentNotSampled=(c=o.remoteParentNotSampled)!==null&&c!==void 0?c:new r.AlwaysOffSampler,this._localParentSampled=(l=o.localParentSampled)!==null&&l!==void 0?l:new s.AlwaysOnSampler,this._localParentNotSampled=(d=o.localParentNotSampled)!==null&&d!==void 0?d:new r.AlwaysOffSampler}shouldSample(o,i,c,l,d,u){let p=n.trace.getSpanContext(o);return!p||!n.isSpanContextValid(p)?this._root.shouldSample(o,i,c,l,d,u):p.isRemote?p.traceFlags&n.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(o,i,c,l,d,u):this._remoteParentNotSampled.shouldSample(o,i,c,l,d,u):p.traceFlags&n.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(o,i,c,l,d,u):this._localParentNotSampled.shouldSample(o,i,c,l,d,u)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};e.ParentBasedSampler=a}),Ph=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceIdRatioBasedSampler=void 0;var n=tr(),t=class{constructor(r=0){this._ratio=r,this._ratio=this._normalize(r),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(r,s){return{decision:n.isValidTraceId(s)&&this._accumulate(s)<this._upperBound?n.SamplingDecision.RECORD_AND_SAMPLED:n.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(r){return typeof r!="number"||isNaN(r)?0:r>=1?1:r<=0?0:r}_accumulate(r){let s=0;for(let a=0;a<r.length/8;a++){let o=a*8,i=parseInt(r.slice(o,o+8),16);s=(s^i)>>>0}return s}};e.TraceIdRatioBasedSampler=t}),Ch=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isUrlIgnored=e.urlMatches=void 0;function n(r,s){return typeof s=="string"?r===s:s.test(r)}e.urlMatches=n;function t(r,s){if(!s)return!1;for(let a of s)if(n(r,a))return!0;return!1}e.isUrlIgnored=t}),Dh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWrapped=void 0;function n(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}e.isWrapped=n}),Jr=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.baggageUtils=void 0,t(ah(),e),t(sh(),e),t(ul(),e),t(cl(),e),t(_h(),e),t(Eh(),e),t(bh(),e),t(Ja(),e),e.baggageUtils=sl(),t(fl(),e),t(Sh(),e),t(wh(),e),t(Ih(),e),t(Ah(),e),t(hl(),e),t(vl(),e),t(Oh(),e),t(Ph(),e),t(is(),e),t(pl(),e),t(dl(),e),t(ll(),e),t(Ch(),e),t(Dh(),e),t(Ja(),e)}),Rh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionEventName=void 0,e.ExceptionEventName="exception"}),ml=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Span=void 0;var n=tr(),t=Jr(),r=Ii(),s=Rh(),a=class{constructor(o,i,c,l,d,u,p=[],v=t.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:n.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=c,this._spanContext=l,this.parentSpanId=u,this.kind=d,this.links=p,this.startTime=t.timeInputToHrTime(v),this.resource=o.resource,this.instrumentationLibrary=o.instrumentationLibrary,this._spanLimits=o.getSpanLimits(),this._spanProcessor=o.getActiveSpanProcessor(),this._spanProcessor.onStart(this,i)}spanContext(){return this._spanContext}setAttribute(o,i){return i==null||this._isSpanEnded()?this:o.length===0?(n.diag.warn(`Invalid attribute key: ${o}`),this):t.isAttributeValue(i)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,o)?this:(this.attributes[o]=i,this):(n.diag.warn(`Invalid attribute value set for key: ${o}`),this)}setAttributes(o){for(let[i,c]of Object.entries(o))this.setAttribute(i,c);return this}addEvent(o,i,c){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(n.diag.warn("Dropping extra events."),this.events.shift()),t.isTimeInput(i)&&(typeof c>"u"&&(c=i),i=void 0),typeof c>"u"&&(c=t.hrTime()),this.events.push({name:o,attributes:i,time:t.timeInputToHrTime(c)}),this)}setStatus(o){return this._isSpanEnded()?this:(this.status=o,this)}updateName(o){return this._isSpanEnded()?this:(this.name=o,this)}end(o=t.hrTime()){if(this._isSpanEnded()){n.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=t.timeInputToHrTime(o),this._duration=t.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&n.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(o,i=t.hrTime()){let c={};typeof o=="string"?c[r.SemanticAttributes.EXCEPTION_MESSAGE]=o:o&&(o.code?c[r.SemanticAttributes.EXCEPTION_TYPE]=o.code.toString():o.name&&(c[r.SemanticAttributes.EXCEPTION_TYPE]=o.name),o.message&&(c[r.SemanticAttributes.EXCEPTION_MESSAGE]=o.message),o.stack&&(c[r.SemanticAttributes.EXCEPTION_STACKTRACE]=o.stack)),c[r.SemanticAttributes.EXCEPTION_TYPE]||c[r.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(s.ExceptionEventName,c,i):n.diag.warn(`Failed to record an exception ${o}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&n.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};e.Span=a}),gl=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildSamplerFromEnv=e.DEFAULT_CONFIG=void 0;var n=tr(),t=Jr(),r=t.getEnv(),s=t.TracesSamplerValues.AlwaysOn;e.DEFAULT_CONFIG={sampler:a(r),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:t.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:t.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:t.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function a(c=t.getEnv()){switch(c.OTEL_TRACES_SAMPLER){case t.TracesSamplerValues.AlwaysOn:return new t.AlwaysOnSampler;case t.TracesSamplerValues.AlwaysOff:return new t.AlwaysOffSampler;case t.TracesSamplerValues.ParentBasedAlwaysOn:return new t.ParentBasedSampler({root:new t.AlwaysOnSampler});case t.TracesSamplerValues.ParentBasedAlwaysOff:return new t.ParentBasedSampler({root:new t.AlwaysOffSampler});case t.TracesSamplerValues.TraceIdRatio:return new t.TraceIdRatioBasedSampler(i(c));case t.TracesSamplerValues.ParentBasedTraceIdRatio:return new t.ParentBasedSampler({root:new t.TraceIdRatioBasedSampler(i(c))});default:return n.diag.error(`OTEL_TRACES_SAMPLER value "${c.OTEL_TRACES_SAMPLER} invalid, defaulting to ${s}".`),new t.AlwaysOnSampler}}e.buildSamplerFromEnv=a;var o=1;function i(c){if(c.OTEL_TRACES_SAMPLER_ARG===void 0||c.OTEL_TRACES_SAMPLER_ARG==="")return n.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${o}.`),o;let l=Number(c.OTEL_TRACES_SAMPLER_ARG);return isNaN(l)?(n.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${o}.`),o):l<0||l>1?(n.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${o}.`),o):l}}),xh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeConfig=void 0;var n=gl();function t(r){let s={sampler:n.buildSamplerFromEnv()},a=Object.assign({},n.DEFAULT_CONFIG,s,r);return a.spanLimits=Object.assign({},n.DEFAULT_CONFIG.spanLimits,r.spanLimits||{}),a}e.mergeConfig=t}),Nh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tracer=void 0;var n=tr(),t=Jr(),r=ml(),s=xh(),a=class{constructor(i,c,l){this._tracerProvider=l;let d=s.mergeConfig(c);this._sampler=d.sampler,this._spanLimits=d.spanLimits,this._idGenerator=c.idGenerator||new t.RandomIdGenerator,this.resource=l.resource,this.instrumentationLibrary=i}startSpan(i,c={},l=n.context.active()){var d,u;if(t.isTracingSuppressed(l))return n.diag.debug("Instrumentation suppressed, returning Noop Span"),n.trace.wrapSpanContext(n.INVALID_SPAN_CONTEXT);let p=o(c,l),v=this._idGenerator.generateSpanId(),m,g,E;!p||!n.trace.isSpanContextValid(p)?m=this._idGenerator.generateTraceId():(m=p.traceId,g=p.traceState,E=p.spanId);let T=(d=c.kind)!==null&&d!==void 0?d:n.SpanKind.INTERNAL,O=(u=c.links)!==null&&u!==void 0?u:[],P=t.sanitizeAttributes(c.attributes),A=this._sampler.shouldSample(c.root?n.trace.setSpanContext(l,n.INVALID_SPAN_CONTEXT):l,m,i,T,P,O),M=A.decision===n.SamplingDecision.RECORD_AND_SAMPLED?n.TraceFlags.SAMPLED:n.TraceFlags.NONE,j={traceId:m,spanId:v,traceFlags:M,traceState:g};if(A.decision===n.SamplingDecision.NOT_RECORD)return n.diag.debug("Recording is off, propagating context in a non-recording span"),n.trace.wrapSpanContext(j);let G=new r.Span(this,l,i,j,T,E,O,c.startTime);return G.setAttributes(Object.assign(P,A.attributes)),G}startActiveSpan(i,c,l,d){let u,p,v;if(arguments.length<2)return;arguments.length===2?v=c:arguments.length===3?(u=c,v=l):(u=c,p=l,v=d);let m=p??n.context.active(),g=this.startSpan(i,u,m),E=n.trace.setSpan(m,g);return n.context.with(E,v,void 0,g)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};e.Tracer=a;function o(i,c){if(!i.root)return n.trace.getSpanContext(c)}}),Mh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultServiceName=void 0;function n(){return`unknown_service:${process.argv0}`}e.defaultServiceName=n}),kh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectResources=void 0;var n=_l(),t=tr(),r=require("util"),s=async(o={})=>{let i=Object.assign(o),c=await Promise.all((i.detectors||[]).map(async l=>{try{let d=await l.detect(i);return t.diag.debug(`${l.constructor.name} found resource.`,d),d}catch(d){return t.diag.debug(`${l.constructor.name} failed: ${d.message}`),n.Resource.empty()}}));return a(c),c.reduce((l,d)=>l.merge(d),n.Resource.empty())};e.detectResources=s;var a=o=>{o.forEach(i=>{if(Object.keys(i.attributes).length>0){let c=r.inspect(i.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});t.diag.verbose(c)}})}}),Lh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.envDetector=void 0;var n=tr(),t=Jr(),r=Ii(),s=os(),a=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(o){let i={},c=t.getEnv(),l=c.OTEL_RESOURCE_ATTRIBUTES,d=c.OTEL_SERVICE_NAME;if(l)try{let u=this._parseResourceAttributes(l);Object.assign(i,u)}catch(u){n.diag.debug(`EnvDetector failed: ${u.message}`)}return d&&(i[r.ResourceAttributes.SERVICE_NAME]=d),new s.Resource(i)}_parseResourceAttributes(o){if(!o)return{};let i={},c=o.split(this._COMMA_SEPARATOR,-1);for(let l of c){let d=l.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(d.length!==2)continue;let[u,p]=d;if(u=u.trim(),p=p.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(u))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(p))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);i[u]=p}return i}_isValid(o){return o.length<=this._MAX_LENGTH&&this._isPrintableString(o)}_isPrintableString(o){for(let i=0;i<o.length;i++){let c=o.charAt(i);if(c<=" "||c>="~")return!1}return!0}_isValidAndNotEmpty(o){return o.length>0&&this._isValid(o)}};e.envDetector=new a}),jh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processDetector=void 0;var n=tr(),t=Ii(),r=os(),s=class{async detect(a){let o={[t.ResourceAttributes.PROCESS_PID]:process.pid,[t.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[t.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[t.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(o,a)}_getResourceAttributes(a,o){return a[t.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||a[t.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||a[t.ResourceAttributes.PROCESS_COMMAND]===""||a[t.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(n.diag.debug("ProcessDetector failed: Unable to find required process resources. "),r.Resource.empty()):new r.Resource(Object.assign({},a))}};e.processDetector=new s}),Hh=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Lh(),e),t(jh(),e)}),Uh=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Mh(),e),t(kh(),e),t(Hh(),e)}),yl=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Uh(),e)}),_l=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Resource=void 0;var n=Ii(),t=Jr(),r=yl(),s=class{constructor(a){this.attributes=a}static empty(){return s.EMPTY}static default(){return new s({[n.ResourceAttributes.SERVICE_NAME]:r.defaultServiceName(),[n.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:t.SDK_INFO[n.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[n.ResourceAttributes.TELEMETRY_SDK_NAME]:t.SDK_INFO[n.ResourceAttributes.TELEMETRY_SDK_NAME],[n.ResourceAttributes.TELEMETRY_SDK_VERSION]:t.SDK_INFO[n.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(a){if(!a||!Object.keys(a.attributes).length)return this;let o=Object.assign({},this.attributes,a.attributes);return new s(o)}};e.Resource=s,s.EMPTY=new s({})}),Fh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Bh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),os=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(_l(),e),t(yl(),e),t(Fh(),e),t(Bh(),e)}),qh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiSpanProcessor=void 0;var n=Jr(),t=class{constructor(r){this._spanProcessors=r}forceFlush(){let r=[];for(let s of this._spanProcessors)r.push(s.forceFlush());return new Promise(s=>{Promise.all(r).then(()=>{s()}).catch(a=>{n.globalErrorHandler(a||new Error("MultiSpanProcessor: forceFlush failed")),s()})})}onStart(r,s){for(let a of this._spanProcessors)a.onStart(r,s)}onEnd(r){for(let s of this._spanProcessors)s.onEnd(r)}shutdown(){let r=[];for(let s of this._spanProcessors)r.push(s.shutdown());return new Promise((s,a)=>{Promise.all(r).then(()=>{s()},a)})}};e.MultiSpanProcessor=t}),El=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopSpanProcessor=void 0;var n=class{onStart(t,r){}onEnd(t){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};e.NoopSpanProcessor=n}),Gh=x((e,n)=>{var t=200,r="__lodash_hash_undefined__",s=800,a=16,o=9007199254740991,i="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",d="[object Boolean]",u="[object Date]",p="[object Error]",v="[object Function]",m="[object GeneratorFunction]",g="[object Map]",E="[object Number]",T="[object Null]",O="[object Object]",P="[object Proxy]",A="[object RegExp]",M="[object Set]",j="[object String]",G="[object Undefined]",q="[object WeakMap]",Y="[object ArrayBuffer]",ne="[object DataView]",_e="[object Float32Array]",De="[object Float64Array]",ct="[object Int8Array]",ot="[object Int16Array]",xt="[object Int32Array]",at="[object Uint8Array]",oe="[object Uint8ClampedArray]",ge="[object Uint16Array]",le="[object Uint32Array]",Ue=/[\\^$.*+?()[\]{}|]/g,Q=/^\[object .+?Constructor\]$/,Ee=/^(?:0|[1-9]\d*)$/,se={};se[_e]=se[De]=se[ct]=se[ot]=se[xt]=se[at]=se[oe]=se[ge]=se[le]=!0,se[i]=se[c]=se[Y]=se[d]=se[ne]=se[u]=se[p]=se[v]=se[g]=se[E]=se[O]=se[A]=se[M]=se[j]=se[q]=!1;var We=typeof global=="object"&&global&&global.Object===Object&&global,rt=typeof self=="object"&&self&&self.Object===Object&&self,$=We||rt||Function("return this")(),ee=typeof e=="object"&&e&&!e.nodeType&&e,re=ee&&typeof n=="object"&&n&&!n.nodeType&&n,ve=re&&re.exports===ee,Ve=ve&&We.process,Ae=function(){try{var R=re&&re.require&&re.require("util").types;return R||Ve&&Ve.binding&&Ve.binding("util")}catch{}}(),Ne=Ae&&Ae.isTypedArray;function Xe(R,H,z){switch(z.length){case 0:return R.call(H);case 1:return R.call(H,z[0]);case 2:return R.call(H,z[0],z[1]);case 3:return R.call(H,z[0],z[1],z[2])}return R.apply(H,z)}function Ot(R,H){for(var z=-1,tt=Array(R);++z<R;)tt[z]=H(z);return tt}function Sr(R){return function(H){return R(H)}}function mr(R,H){return R?.[H]}function ce(R,H){return function(z){return R(H(z))}}var Tr=Array.prototype,nr=Function.prototype,Wt=Object.prototype,Ft=$["__core-js_shared__"],sr=nr.toString,ir=Wt.hasOwnProperty,wr=function(){var R=/[^.]+$/.exec(Ft&&Ft.keys&&Ft.keys.IE_PROTO||"");return R?"Symbol(src)_1."+R:""}(),ie=Wt.toString,K=sr.call(Object),xe=RegExp("^"+sr.call(ir).replace(Ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Te=ve?$.Buffer:void 0,vt=$.Symbol,Ke=$.Uint8Array,Fe=Te?Te.allocUnsafe:void 0,$e=ce(Object.getPrototypeOf,Object),Tt=Object.create,wt=Wt.propertyIsEnumerable,Oe=Tr.splice,Ye=vt?vt.toStringTag:void 0,ae=function(){try{var R=Mr(Object,"defineProperty");return R({},"",{}),R}catch{}}(),Ie=Te?Te.isBuffer:void 0,Le=Math.max,he=Date.now,ut=Mr($,"Map"),Bt=Mr(Object,"create"),Ze=function(){function R(){}return function(H){if(!de(H))return{};if(Tt)return Tt(H);R.prototype=H;var z=new R;return R.prototype=void 0,z}}();function Kt(R){var H=-1,z=R==null?0:R.length;for(this.clear();++H<z;){var tt=R[H];this.set(tt[0],tt[1])}}function gr(){this.__data__=Bt?Bt(null):{},this.size=0}function Ir(R){var H=this.has(R)&&delete this.__data__[R];return this.size-=H?1:0,H}function Me(R){var H=this.__data__;if(Bt){var z=H[R];return z===r?void 0:z}return ir.call(H,R)?H[R]:void 0}function je(R){var H=this.__data__;return Bt?H[R]!==void 0:ir.call(H,R)}function Se(R,H){var z=this.__data__;return this.size+=this.has(R)?0:1,z[R]=Bt&&H===void 0?r:H,this}Kt.prototype.clear=gr,Kt.prototype.delete=Ir,Kt.prototype.get=Me,Kt.prototype.has=je,Kt.prototype.set=Se;function Z(R){var H=-1,z=R==null?0:R.length;for(this.clear();++H<z;){var tt=R[H];this.set(tt[0],tt[1])}}function et(){this.__data__=[],this.size=0}function ze(R){var H=this.__data__,z=X(H,R);if(z<0)return!1;var tt=H.length-1;return z==tt?H.pop():Oe.call(H,z,1),--this.size,!0}function pe(R){var H=this.__data__,z=X(H,R);return z<0?void 0:H[z][1]}function mt(R){return X(this.__data__,R)>-1}function bt(R,H){var z=this.__data__,tt=X(z,R);return tt<0?(++this.size,z.push([R,H])):z[tt][1]=H,this}Z.prototype.clear=et,Z.prototype.delete=ze,Z.prototype.get=pe,Z.prototype.has=mt,Z.prototype.set=bt;function Ct(R){var H=-1,z=R==null?0:R.length;for(this.clear();++H<z;){var tt=R[H];this.set(tt[0],tt[1])}}function Vt(){this.size=0,this.__data__={hash:new Kt,map:new(ut||Z),string:new Kt}}function $t(R){var H=Ar(this,R).delete(R);return this.size-=H?1:0,H}function Ht(R){return Ar(this,R).get(R)}function nt(R){return Ar(this,R).has(R)}function Dt(R,H){var z=Ar(this,R),tt=z.size;return z.set(R,H),this.size+=z.size==tt?0:1,this}Ct.prototype.clear=Vt,Ct.prototype.delete=$t,Ct.prototype.get=Ht,Ct.prototype.has=nt,Ct.prototype.set=Dt;function lt(R){var H=this.__data__=new Z(R);this.size=H.size}function gt(){this.__data__=new Z,this.size=0}function f(R){var H=this.__data__,z=H.delete(R);return this.size=H.size,z}function y(R){return this.__data__.get(R)}function S(R){return this.__data__.has(R)}function C(R,H){var z=this.__data__;if(z instanceof Z){var tt=z.__data__;if(!ut||tt.length<t-1)return tt.push([R,H]),this.size=++z.size,this;z=this.__data__=new Ct(tt)}return z.set(R,H),this.size=z.size,this}lt.prototype.clear=gt,lt.prototype.delete=f,lt.prototype.get=y,lt.prototype.has=S,lt.prototype.set=C;function D(R,H){var z=yt(R),tt=!z&&It(R),Lt=!z&&!tt&&Je(R),zt=!z&&!tt&&!Lt&&ht(R),Xt=z||tt||Lt||zt,jt=Xt?Ot(R.length,String):[],Yt=jt.length;for(var Hr in R)(H||ir.call(R,Hr))&&!(Xt&&(Hr=="length"||Lt&&(Hr=="offset"||Hr=="parent")||zt&&(Hr=="buffer"||Hr=="byteLength"||Hr=="byteOffset")||zr(Hr,Yt)))&&jt.push(Hr);return jt}function k(R,H,z){(z!==void 0&&!Qe(R[H],z)||z===void 0&&!(H in R))&&te(R,H,z)}function L(R,H,z){var tt=R[H];(!(ir.call(R,H)&&Qe(tt,z))||z===void 0&&!(H in R))&&te(R,H,z)}function X(R,H){for(var z=R.length;z--;)if(Qe(R[z][0],H))return z;return-1}function te(R,H,z){H=="__proto__"&&ae?ae(R,H,{configurable:!0,enumerable:!0,value:z,writable:!0}):R[H]=z}var He=Nr();function dt(R){return R==null?R===void 0?G:T:Ye&&Ye in Object(R)?Or(R):Dr(R)}function Be(R){return Ce(R)&&dt(R)==i}function it(R){if(!de(R)||sn(R))return!1;var H=B(R)?xe:Q;return H.test(Pe(R))}function pt(R){return Ce(R)&&ue(R.length)&&!!se[dt(R)]}function St(R){if(!de(R))return Lr(R);var H=Yr(R),z=[];for(var tt in R)tt=="constructor"&&(H||!ir.call(R,tt))||z.push(tt);return z}function Ut(R,H,z,tt,Lt){R!==H&&He(H,function(zt,Xt){if(Lt||(Lt=new lt),de(zt))Gr(R,H,Xt,z,Ut,tt,Lt);else{var jt=tt?tt(F(R,Xt),zt,Xt+"",R,H,Lt):void 0;jt===void 0&&(jt=zt),k(R,Xt,jt)}},er)}function Gr(R,H,z,tt,Lt,zt,Xt){var jt=F(R,z),Yt=F(H,z),Hr=Xt.get(Yt);if(Hr){k(R,z,Hr);return}var Rr=zt?zt(jt,Yt,z+"",R,H,Xt):void 0,Rn=Rr===void 0;if(Rn){var Bn=yt(Yt),si=!Bn&&Je(Yt),Ui=!Bn&&!si&&ht(Yt);Rr=Yt,Bn||si||Ui?yt(jt)?Rr=jt:At(jt)?Rr=or(jt):si?(Rn=!1,Rr=Kr(Yt,!0)):Ui?(Rn=!1,Rr=on(Yt,!0)):Rr=[]:ft(Yt)||It(Yt)?(Rr=jt,It(jt)?Rr=Qt(jt):(!de(jt)||B(jt))&&(Rr=Xr(Yt))):Rn=!1}Rn&&(Xt.set(Yt,Rr),Lt(Rr,Yt,tt,zt,Xt),Xt.delete(Yt)),k(R,z,Rr)}function pr(R,H){return me(cn(R,H,hn),R+"")}var yr=ae?function(R,H){return ae(R,"toString",{configurable:!0,enumerable:!1,value:jr(H),writable:!0})}:hn;function Kr(R,H){if(H)return R.slice();var z=R.length,tt=Fe?Fe(z):new R.constructor(z);return R.copy(tt),tt}function Vr(R){var H=new R.constructor(R.byteLength);return new Ke(H).set(new Ke(R)),H}function on(R,H){var z=H?Vr(R.buffer):R.buffer;return new R.constructor(z,R.byteOffset,R.length)}function or(R,H){var z=-1,tt=R.length;for(H||(H=Array(tt));++z<tt;)H[z]=R[z];return H}function xr(R,H,z,tt){var Lt=!z;z||(z={});for(var zt=-1,Xt=H.length;++zt<Xt;){var jt=H[zt],Yt=tt?tt(z[jt],R[jt],jt,z,R):void 0;Yt===void 0&&(Yt=R[jt]),Lt?te(z,jt,Yt):L(z,jt,Yt)}return z}function Qr(R){return pr(function(H,z){var tt=-1,Lt=z.length,zt=Lt>1?z[Lt-1]:void 0,Xt=Lt>2?z[2]:void 0;for(zt=R.length>3&&typeof zt=="function"?(Lt--,zt):void 0,Xt&&an(z[0],z[1],Xt)&&(zt=Lt<3?void 0:zt,Lt=1),H=Object(H);++tt<Lt;){var jt=z[tt];jt&&R(H,jt,tt,zt)}return H})}function Nr(R){return function(H,z,tt){for(var Lt=-1,zt=Object(H),Xt=tt(H),jt=Xt.length;jt--;){var Yt=Xt[R?jt:++Lt];if(z(zt[Yt],Yt,zt)===!1)break}return H}}function Ar(R,H){var z=R.__data__;return kr(H)?z[typeof H=="string"?"string":"hash"]:z.map}function Mr(R,H){var z=mr(R,H);return it(z)?z:void 0}function Or(R){var H=ir.call(R,Ye),z=R[Ye];try{R[Ye]=void 0;var tt=!0}catch{}var Lt=ie.call(R);return tt&&(H?R[Ye]=z:delete R[Ye]),Lt}function Xr(R){return typeof R.constructor=="function"&&!Yr(R)?Ze($e(R)):{}}function zr(R,H){var z=typeof R;return H=H??o,!!H&&(z=="number"||z!="symbol"&&Ee.test(R))&&R>-1&&R%1==0&&R<H}function an(R,H,z){if(!de(z))return!1;var tt=typeof H;return(tt=="number"?Pt(z)&&zr(H,z.length):tt=="string"&&H in z)?Qe(z[H],R):!1}function kr(R){var H=typeof R;return H=="string"||H=="number"||H=="symbol"||H=="boolean"?R!=="__proto__":R===null}function sn(R){return!!wr&&wr in R}function Yr(R){var H=R&&R.constructor,z=typeof H=="function"&&H.prototype||Wt;return R===z}function Lr(R){var H=[];if(R!=null)for(var z in Object(R))H.push(z);return H}function Dr(R){return ie.call(R)}function cn(R,H,z){return H=Le(H===void 0?R.length-1:H,0),function(){for(var tt=arguments,Lt=-1,zt=Le(tt.length-H,0),Xt=Array(zt);++Lt<zt;)Xt[Lt]=tt[H+Lt];Lt=-1;for(var jt=Array(H+1);++Lt<H;)jt[Lt]=tt[Lt];return jt[H]=z(Xt),Xe(R,this,jt)}}function F(R,H){if(!(H==="constructor"&&typeof R[H]=="function")&&H!="__proto__")return R[H]}var me=ye(yr);function ye(R){var H=0,z=0;return function(){var tt=he(),Lt=a-(tt-z);if(z=tt,Lt>0){if(++H>=s)return arguments[0]}else H=0;return R.apply(void 0,arguments)}}function Pe(R){if(R!=null){try{return sr.call(R)}catch{}try{return R+""}catch{}}return""}function Qe(R,H){return R===H||R!==R&&H!==H}var It=Be(function(){return arguments}())?Be:function(R){return Ce(R)&&ir.call(R,"callee")&&!wt.call(R,"callee")},yt=Array.isArray;function Pt(R){return R!=null&&ue(R.length)&&!B(R)}function At(R){return Ce(R)&&Pt(R)}var Je=Ie||ai;function B(R){if(!de(R))return!1;var H=dt(R);return H==v||H==m||H==l||H==P}function ue(R){return typeof R=="number"&&R>-1&&R%1==0&&R<=o}function de(R){var H=typeof R;return R!=null&&(H=="object"||H=="function")}function Ce(R){return R!=null&&typeof R=="object"}function ft(R){if(!Ce(R)||dt(R)!=O)return!1;var H=$e(R);if(H===null)return!0;var z=ir.call(H,"constructor")&&H.constructor;return typeof z=="function"&&z instanceof z&&sr.call(z)==K}var ht=Ne?Sr(Ne):pt;function Qt(R){return xr(R,er(R))}function er(R){return Pt(R)?D(R,!0):St(R)}var _r=Qr(function(R,H,z){Ut(R,H,z)});function jr(R){return function(){return R}}function hn(R){return R}function ai(){return!1}n.exports=_r}),Vh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessorBase=void 0;var n=tr(),t=Jr(),r=class{constructor(s,a){this._exporter=s,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let o=t.getEnv();this._maxExportBatchSize=typeof a?.maxExportBatchSize=="number"?a.maxExportBatchSize:o.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof a?.maxQueueSize=="number"?a.maxQueueSize:o.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof a?.scheduledDelayMillis=="number"?a.scheduledDelayMillis:o.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof a?.exportTimeoutMillis=="number"?a.exportTimeoutMillis:o.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(s){}onEnd(s){this._isShutdown||this._addToBuffer(s)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((s,a)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(s).catch(o=>{a(o)})}),this._shuttingDownPromise)}_addToBuffer(s){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(s),this._maybeStartTimer())}_flushAll(){return new Promise((s,a)=>{let o=[],i=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let c=0,l=i;c<l;c++)o.push(this._flushOneBatch());Promise.all(o).then(()=>{s()}).catch(a)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((s,a)=>{let o=setTimeout(()=>{a(new Error("Timeout"))},this._exportTimeoutMillis);n.context.with(t.suppressTracing(n.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),i=>{var c;clearTimeout(o),i.code===t.ExportResultCode.SUCCESS?s():a((c=i.error)!==null&&c!==void 0?c:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(s=>{t.globalErrorHandler(s)})},this._scheduledDelayMillis),t.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};e.BatchSpanProcessorBase=r}),zh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessor=void 0;var n=Vh(),t=class extends n.BatchSpanProcessorBase{onShutdown(){}};e.BatchSpanProcessor=t}),Wh=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(zh(),e)}),bl=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Wh(),e)}),$h=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicTracerProvider=e.ForceFlushState=void 0;var n=tr(),t=Jr(),r=os(),s=Sl(),a=gl(),o=qh(),i=El(),c=Gh(),l=bl(),d;(function(p){p[p.resolved=0]="resolved",p[p.timeout=1]="timeout",p[p.error=2]="error",p[p.unresolved=3]="unresolved"})(d=e.ForceFlushState||(e.ForceFlushState={}));var u=class{constructor(p={}){var v;this._registeredSpanProcessors=[],this._tracers=new Map;let m=c({},a.DEFAULT_CONFIG,p);this.resource=(v=m.resource)!==null&&v!==void 0?v:r.Resource.empty(),this.resource=r.Resource.default().merge(this.resource),this._config=Object.assign({},m,{resource:this.resource});let g=this._buildExporterFromEnv();if(g!==void 0){let E=new l.BatchSpanProcessor(g);this.activeSpanProcessor=E}else this.activeSpanProcessor=new i.NoopSpanProcessor}getTracer(p,v){let m=`${p}@${v||""}`;return this._tracers.has(m)||this._tracers.set(m,new s.Tracer({name:p,version:v},this._config,this)),this._tracers.get(m)}addSpanProcessor(p){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(v=>n.diag.error("Error while trying to shutdown current span processor",v)),this._registeredSpanProcessors.push(p),this.activeSpanProcessor=new o.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(p={}){n.trace.setGlobalTracerProvider(this),p.propagator===void 0&&(p.propagator=this._buildPropagatorFromEnv()),p.contextManager&&n.context.setGlobalContextManager(p.contextManager),p.propagator&&n.propagation.setGlobalPropagator(p.propagator)}forceFlush(){let p=this._config.forceFlushTimeoutMillis,v=this._registeredSpanProcessors.map(m=>new Promise(g=>{let E,T=setTimeout(()=>{g(new Error(`Span processor did not completed within timeout period of ${p} ms`)),E=d.timeout},p);m.forceFlush().then(()=>{clearTimeout(T),E!==d.timeout&&(E=d.resolved,g(E))}).catch(O=>{clearTimeout(T),E=d.error,g(O)})}));return new Promise((m,g)=>{Promise.all(v).then(E=>{let T=E.filter(O=>O!==d.resolved);T.length>0?g(T):m()}).catch(E=>g([E]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(p){var v;return(v=u._registeredPropagators.get(p))===null||v===void 0?void 0:v()}_getSpanExporter(p){var v;return(v=u._registeredExporters.get(p))===null||v===void 0?void 0:v()}_buildPropagatorFromEnv(){let p=Array.from(new Set(t.getEnv().OTEL_PROPAGATORS)),v=p.map(m=>{let g=this._getPropagator(m);return g||n.diag.warn(`Propagator "${m}" requested through environment variable is unavailable.`),g}).reduce((m,g)=>(g&&m.push(g),m),[]);if(v.length!==0)return p.length===1?v[0]:new t.CompositePropagator({propagators:v})}_buildExporterFromEnv(){let p=t.getEnv().OTEL_TRACES_EXPORTER;if(p==="none")return;let v=this._getSpanExporter(p);return v||n.diag.error(`Exporter "${p}" requested through environment variable is unavailable.`),v}};e.BasicTracerProvider=u,u._registeredPropagators=new Map([["tracecontext",()=>new t.HttpTraceContextPropagator],["baggage",()=>new t.HttpBaggagePropagator]]),u._registeredExporters=new Map}),Kh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleSpanExporter=void 0;var n=Jr(),t=class{export(r,s){return this._sendSpans(r,s)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(r){return{traceId:r.spanContext().traceId,parentId:r.parentSpanId,name:r.name,id:r.spanContext().spanId,kind:r.kind,timestamp:n.hrTimeToMicroseconds(r.startTime),duration:n.hrTimeToMicroseconds(r.duration),attributes:r.attributes,status:r.status,events:r.events}}_sendSpans(r,s){for(let a of r)console.log(this._exportInfo(a));if(s)return s({code:n.ExportResultCode.SUCCESS})}};e.ConsoleSpanExporter=t}),Qh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySpanExporter=void 0;var n=Jr(),t=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(r,s){if(this._stopped)return s({code:n.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...r),setTimeout(()=>s({code:n.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};e.InMemorySpanExporter=t}),Xh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Yh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleSpanProcessor=void 0;var n=tr(),t=Jr(),r=class{constructor(s){this._exporter=s,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(s){}onEnd(s){this._isShutdown||n.context.with(t.suppressTracing(n.context.active()),()=>{this._exporter.export([s],a=>{var o;a.code!==t.ExportResultCode.SUCCESS&&t.globalErrorHandler((o=a.error)!==null&&o!==void 0?o:new Error(`SimpleSpanProcessor: span export failed (status ${a})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((s,a)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(s).catch(o=>{a(o)})}),this._shuttingDownPromise)}};e.SimpleSpanProcessor=r}),Zh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Jh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),ev=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),tv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Sl=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Nh(),e),t($h(),e),t(bl(),e),t(Kh(),e),t(Qh(),e),t(Xh(),e),t(Yh(),e),t(Zh(),e),t(El(),e),t(ml(),e),t(Jh(),e),t(ev(),e),t(tv(),e)}),rv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.azureCoreTracing=e.AzureMonitorSymbol=void 0;var n=dr();e.AzureMonitorSymbol="Azure_Monitor_Tracer";var t=!1,r=function(a){if(t)return a;try{var o=Sl(),i=tr(),c=new o.BasicTracerProvider,l=c.getTracer("applicationinsights tracer"),d=a.setTracer;a.setTracer=function(u){var p=u.startSpan;u.startSpan=function(v,m,g){var E=p.call(this,v,m,g),T=E.end;return E.end=function(){var O=T.apply(this,arguments);return n.channel.publish("azure-coretracing",E),O},E},u[e.AzureMonitorSymbol]=!0,d.call(this,u)},i.trace.getSpan(i.context.active()),a.setTracer(l),t=!0}catch{}return a};e.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:r};function s(){n.channel.registerMonkeyPatch("@azure/core-tracing",e.azureCoreTracing)}e.enable=s}),nv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.bunyan=void 0;var n=dr(),t=function(s){var a=s.prototype._emit;return s.prototype._emit=function(o,i){var c=a.apply(this,arguments);if(!i){var l=c;l||(l=a.call(this,o,!0)),n.channel.publish("bunyan",{level:o.level,result:l})}return c},s};e.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:t};function r(){n.channel.registerMonkeyPatch("bunyan",e.bunyan)}e.enable=r}),iv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.console=void 0;var n=dr(),t=require("stream"),r=function(a){var o=new t.Writable,i=new t.Writable;o.write=function(m){if(!m)return!0;var g=m.toString();return n.channel.publish("console",{message:g}),!0},i.write=function(m){if(!m)return!0;var g=m.toString();return n.channel.publish("console",{message:g,stderr:!0}),!0};for(var c=new a.Console(o,i),l=["log","info","warn","error","dir","time","timeEnd","trace","assert"],d=function(m){var g=a[m];g&&(a[m]=function(){if(c[m])try{c[m].apply(c,arguments)}catch{}return g.apply(a,arguments)})},u=0,p=l;u<p.length;u++){var v=p[u];d(v)}return a};e.console={versionSpecifier:">= 4.0.0",patch:r};function s(){n.channel.registerMonkeyPatch("console",e.console),require("console")}e.enable=s}),ov=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongoCore=void 0;var n=dr(),t=function(s){var a=s.Server.prototype.connect;return s.Server.prototype.connect=function(){var o=a.apply(this,arguments),i=this.s.pool.write;this.s.pool.write=function(){var l=typeof arguments[1]=="function"?1:2;return typeof arguments[l]=="function"&&(arguments[l]=n.channel.bindToContext(arguments[l])),i.apply(this,arguments)};var c=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=n.channel.bindToContext(arguments[1])),c.apply(this,arguments)},o},s};e.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:t};function r(){n.channel.registerMonkeyPatch("mongodb-core",e.mongoCore)}e.enable=r}),av=x(e=>{"use strict";var n=e&&e.__assign||function(){return n=Object.assign||function(c){for(var l,d=1,u=arguments.length;d<u;d++){l=arguments[d];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(c[p]=l[p])}return c},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongo330=e.mongo3=e.mongo2=void 0;var t=dr(),r=function(c){var l=c.instrument({operationIdGenerator:{next:function(){return t.channel.bindToContext(function(u){return u()})}}}),d={};return l.on("started",function(u){d[u.requestId]||(d[u.requestId]=n(n({},u),{time:new Date}))}),l.on("succeeded",function(u){var p=d[u.requestId];p&&delete d[u.requestId],typeof u.operationId=="function"?u.operationId(function(){return t.channel.publish("mongodb",{startedData:p,event:u,succeeded:!0})}):t.channel.publish("mongodb",{startedData:p,event:u,succeeded:!0})}),l.on("failed",function(u){var p=d[u.requestId];p&&delete d[u.requestId],typeof u.operationId=="function"?u.operationId(function(){return t.channel.publish("mongodb",{startedData:p,event:u,succeeded:!1})}):t.channel.publish("mongodb",{startedData:p,event:u,succeeded:!1})}),c},s=function(c){var l=c.instrument(),d={},u={};return l.on("started",function(p){d[p.requestId]||(u[p.requestId]=t.channel.bindToContext(function(v){return v()}),d[p.requestId]=n(n({},p),{time:new Date}))}),l.on("succeeded",function(p){var v=d[p.requestId];v&&delete d[p.requestId],typeof p=="object"&&typeof u[p.requestId]=="function"&&(u[p.requestId](function(){return t.channel.publish("mongodb",{startedData:v,event:p,succeeded:!0})}),delete u[p.requestId])}),l.on("failed",function(p){var v=d[p.requestId];v&&delete d[p.requestId],typeof p=="object"&&typeof u[p.requestId]=="function"&&(u[p.requestId](function(){return t.channel.publish("mongodb",{startedData:v,event:p,succeeded:!1})}),delete u[p.requestId])}),c},a=function(c){var l=c.Server.prototype.connect;return c.Server.prototype.connect=function(){var d=l.apply(this,arguments),u=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var v=typeof arguments[1]=="function"?1:2;return typeof arguments[v]=="function"&&(arguments[v]=t.channel.bindToContext(arguments[v])),u.apply(this,arguments)};var p=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=t.channel.bindToContext(arguments[1])),p.apply(this,arguments)},d},c},o=function(c){a(c);var l=c.instrument(),d={},u={};return l.on("started",function(p){d[p.requestId]||(u[p.requestId]=t.channel.bindToContext(function(v){return v()}),d[p.requestId]=p)}),l.on("succeeded",function(p){var v=d[p.requestId];v&&delete d[p.requestId],typeof p=="object"&&typeof u[p.requestId]=="function"&&(u[p.requestId](function(){return t.channel.publish("mongodb",{startedData:v,event:p,succeeded:!0})}),delete u[p.requestId])}),l.on("failed",function(p){var v=d[p.requestId];v&&delete d[p.requestId],typeof p=="object"&&typeof u[p.requestId]=="function"&&(u[p.requestId](function(){return t.channel.publish("mongodb",{startedData:v,event:p,succeeded:!1})}),delete u[p.requestId])}),c};e.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:r},e.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:s},e.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:o};function i(){t.channel.registerMonkeyPatch("mongodb",e.mongo2),t.channel.registerMonkeyPatch("mongodb",e.mongo3),t.channel.registerMonkeyPatch("mongodb",e.mongo330)}e.enable=i}),sv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mysql=void 0;var n=dr(),t=require("path"),r=function(a,o){var i=function(v,m){return function(g,E){var T=v[g];T&&(v[g]=function(){for(var O=arguments.length-1,P=arguments.length-1;P>=0;--P)if(typeof arguments[P]=="function"){O=P;break}else if(typeof arguments[P]<"u")break;var A=arguments[O],M={result:null,startTime:null,startDate:null};typeof A=="function"&&(E?(M.startTime=process.hrtime(),M.startDate=new Date,arguments[O]=n.channel.bindToContext(E(M,A))):arguments[O]=n.channel.bindToContext(A));var j=T.apply(this,arguments);return M.result=j,j})}},c=function(v,m){return i(v.prototype,m+".prototype")},l=["connect","changeUser","ping","statistics","end"],d=require(t.dirname(o)+"/lib/Connection");l.forEach(function(v){return c(d,"Connection")(v)}),i(d,"Connection")("createQuery",function(v,m){return function(g){var E=process.hrtime(v.startTime),T=E[0]*1e3+E[1]/1e6|0;n.channel.publish("mysql",{query:v.result,callbackArgs:arguments,err:g,duration:T,time:v.startDate}),m.apply(this,arguments)}});var u=["_enqueueCallback"],p=require(t.dirname(o)+"/lib/Pool");return u.forEach(function(v){return c(p,"Pool")(v)}),a};e.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:r};function s(){n.channel.registerMonkeyPatch("mysql",e.mysql)}e.enable=s}),cv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgresPool1=void 0;var n=dr();function t(s){var a=s.prototype.connect;return s.prototype.connect=function(o){return o&&(arguments[0]=n.channel.bindToContext(o)),a.apply(this,arguments)},s}e.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:t};function r(){n.channel.registerMonkeyPatch("pg-pool",e.postgresPool1)}e.enable=r}),uv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgres7=e.postgres6=void 0;var n=dr(),t=require("events");function r(o,i){var c=o.Client.prototype.query,l="__diagnosticOriginalFunc";return o.Client.prototype.query=function(d,u,p){var v={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},m=process.hrtime(),g;function E(T){T&&T[l]&&(T=T[l]);var O=n.channel.bindToContext(function(P,A){var M=process.hrtime(m);if(v.result=A&&{rowCount:A.rowCount,command:A.command},v.error=P,v.duration=Math.ceil(M[0]*1e3+M[1]/1e6),n.channel.publish("postgres",v),P){if(T)return T.apply(this,arguments);g&&g instanceof t.EventEmitter&&g.emit("error",P)}else T&&T.apply(this,arguments)});try{return Object.defineProperty(O,l,{value:T}),O}catch{return T}}try{typeof d=="string"?u instanceof Array?(v.query.preparable={text:d,args:u},p=E(p)):(v.query.text=d,p?p=E(p):u=E(u)):(typeof d.name=="string"?v.query.plan=d.name:d.values instanceof Array?v.query.preparable={text:d.text,args:d.values}:v.query.text=d.text,p?p=E(p):u?u=E(u):d.callback=E(d.callback))}catch{return c.apply(this,arguments)}return arguments[0]=d,arguments[1]=u,arguments[2]=p,arguments.length=arguments.length>3?arguments.length:3,g=c.apply(this,arguments),g},o}function s(o,i){var c=o.Client.prototype.query,l="__diagnosticOriginalFunc";return o.Client.prototype.query=function(d,u,p){var v=this,m=!!p,g={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},E=process.hrtime(),T;function O(P){P&&P[l]&&(P=P[l]);var A=n.channel.bindToContext(function(M,j){var G=process.hrtime(E);if(g.result=j&&{rowCount:j.rowCount,command:j.command},g.error=M,g.duration=Math.ceil(G[0]*1e3+G[1]/1e6),n.channel.publish("postgres",g),M){if(P)return P.apply(this,arguments);T&&T instanceof t.EventEmitter&&T.emit("error",M)}else P&&P.apply(this,arguments)});try{return Object.defineProperty(A,l,{value:P}),A}catch{return P}}try{typeof d=="string"?u instanceof Array?(g.query.preparable={text:d,args:u},m=typeof p=="function",p=m?O(p):p):(g.query.text=d,p?(m=typeof p=="function",p=m?O(p):p):(m=typeof u=="function",u=m?O(u):u)):(typeof d.name=="string"?g.query.plan=d.name:d.values instanceof Array?g.query.preparable={text:d.text,args:d.values}:g.query.text=d.text,p?(m=typeof p=="function",p=O(p)):u?(m=typeof u=="function",u=m?O(u):u):(m=typeof d.callback=="function",d.callback=m?O(d.callback):d.callback))}catch{return c.apply(this,arguments)}return arguments[0]=d,arguments[1]=u,arguments[2]=p,arguments.length=arguments.length>3?arguments.length:3,T=c.apply(this,arguments),m?T:T.then(function(P){return O()(void 0,P),new v._Promise(function(A,M){A(P)})}).catch(function(P){return O()(P,void 0),new v._Promise(function(A,M){M(P)})})},o}e.postgres6={versionSpecifier:"6.*",patch:r},e.postgres7={versionSpecifier:">=7.* <=8.*",patch:s};function a(){n.channel.registerMonkeyPatch("pg",e.postgres6),n.channel.registerMonkeyPatch("pg",e.postgres7)}e.enable=a}),lv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.redis=void 0;var n=dr(),t=function(s){var a=s.RedisClient.prototype.internal_send_command;return s.RedisClient.prototype.internal_send_command=function(o){if(o){var i=o.callback;if(!i||!i.pubsubBound){var c=this.address,l=process.hrtime(),d=new Date;o.callback=n.channel.bindToContext(function(u,p){var v=process.hrtime(l),m=v[0]*1e3+v[1]/1e6|0;n.channel.publish("redis",{duration:m,address:c,commandObj:o,err:u,result:p,time:d}),typeof i=="function"&&i.apply(this,arguments)}),o.callback.pubsubBound=!0}}return a.call(this,o)},s};e.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:t};function r(){n.channel.registerMonkeyPatch("redis",e.redis)}e.enable=r}),dv=x(e=>{"use strict";var n=e&&e.__assign||function(){return n=Object.assign||function(a){for(var o,i=1,c=arguments.length;i<c;i++){o=arguments[i];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=void 0;var t=dr(),r=function(a){var o=a.Connection.prototype.makeRequest;return a.Connection.prototype.makeRequest=function(){function i(l){var d=process.hrtime(),u={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return t.channel.bindToContext(function(p,v,m){var g=process.hrtime(d);u=n(n({},u),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!p&&{rowCount:v,rows:m},query:{text:this.parametersByName.statement.value},error:p,duration:Math.ceil(g[0]*1e3+g[1]/1e6)}),t.channel.publish("tedious",u),l.call(this,p,v,m)})}var c=arguments[0];arguments[0].callback=i(c.callback),o.apply(this,arguments)},a};e.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:r};function s(){t.channel.registerMonkeyPatch("tedious",e.tedious)}e.enable=s}),fv=x(e=>{"use strict";var n=e&&e.__extends||function(){var i=function(c,l){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,u){d.__proto__=u}||function(d,u){for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(d[p]=u[p])},i(c,l)};return function(c,l){i(c,l);function d(){this.constructor=c}c.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}}(),t=e&&e.__rest||function(i,c){var l={};for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&c.indexOf(d)<0&&(l[d]=i[d]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,d=Object.getOwnPropertySymbols(i);u<d.length;u++)c.indexOf(d[u])<0&&Object.prototype.propertyIsEnumerable.call(i,d[u])&&(l[d[u]]=i[d[u]]);return l};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.winston2=e.winston3=void 0;var r=dr(),s=function(i){var c=i.Logger.prototype.log,l,d=function(u,p,v){var m;return l===i.config.npm.levels?m="npm":l===i.config.syslog.levels?m="syslog":m="unknown",r.channel.publish("winston",{level:u,message:p,meta:v,levelKind:m}),p};return i.Logger.prototype.log=function(){return l=this.levels,!this.filters||this.filters.length===0?this.filters=[d]:this.filters[this.filters.length-1]!==d&&(this.filters=this.filters.filter(function(u){return u!==d}),this.filters.push(d)),c.apply(this,arguments)},i},a=function(i){var c=function(v,m){var g;return v.config.npm.levels[m]!=null?g="npm":v.config.syslog.levels[m]!=null?g="syslog":g="unknown",g},l=function(v){n(m,v);function m(g,E){var T=v.call(this,E)||this;return T.winston=g,T}return m.prototype.log=function(g,E){var T=g.message,O=g.level,P=g.meta,A=t(g,["message","level","meta"]);O=typeof Symbol.for=="function"?g[Symbol.for("level")]:O,T=g instanceof Error?g:T;var M=c(this.winston,O);P=P||{};for(var j in A)A.hasOwnProperty(j)&&(P[j]=A[j]);r.channel.publish("winston",{message:T,level:O,levelKind:M,meta:P}),E()},m}(i.Transport);function d(){var v=arguments[0].levels||i.config.npm.levels,m;for(var g in v)v.hasOwnProperty(g)&&(m=m===void 0||v[g]>v[m]?g:m);this.add(new l(i,{level:m}))}var u=i.createLogger;i.createLogger=function(){var v=arguments[0].levels||i.config.npm.levels,m;for(var g in v)v.hasOwnProperty(g)&&(m=m===void 0||v[g]>v[m]?g:m);var E=u.apply(this,arguments);E.add(new l(i,{level:m}));var T=E.configure;return E.configure=function(){T.apply(this,arguments),d.apply(this,arguments)},E};var p=i.configure;return i.configure=function(){p.apply(this,arguments),d.apply(this,arguments)},i.add(new l(i)),i};e.winston3={versionSpecifier:"3.x",patch:a},e.winston2={versionSpecifier:"2.x",patch:s};function o(){r.channel.registerMonkeyPatch("winston",e.winston2),r.channel.registerMonkeyPatch("winston",e.winston3)}e.enable=o}),pv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=e.pgPool=e.pg=e.winston=e.redis=e.mysql=e.mongodb=e.mongodbCore=e.console=e.bunyan=e.azuresdk=void 0;var n=rv();e.azuresdk=n;var t=nv();e.bunyan=t;var r=iv();e.console=r;var s=ov();e.mongodbCore=s;var a=av();e.mongodb=a;var o=sv();e.mysql=o;var i=cv();e.pgPool=i;var c=uv();e.pg=c;var l=lv();e.redis=l;var d=dv();e.tedious=d;var u=fv();e.winston=u;function p(){t.enable(),r.enable(),s.enable(),a.enable(),o.enable(),c.enable(),i.enable(),l.enable(),u.enable(),n.enable(),d.enable()}e.enable=p}),as=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContextPreservation=e.IsInitialized=void 0;var n=Xu(),t=br();e.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var r="DiagnosticChannel";if(e.IsInitialized){s=pv(),a=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",o=a.split(","),i={bunyan:s.bunyan,console:s.console,mongodb:s.mongodb,mongodbCore:s.mongodbCore,mysql:s.mysql,redis:s.redis,pg:s.pg,pgPool:s.pgPool,winston:s.winston,azuresdk:s.azuresdk};for(c in i)o.indexOf(c)===-1&&(i[c].enable(),t.info(r,"Subscribed to "+c+" events"));o.length>0&&t.info(r,"Some modules will not be patched",o)}else t.info(r,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var s,a,o,i,c;function l(d){if(e.IsInitialized){var u=dr();u.channel.addContextPreservation(d),u.channel.spanContextPropagator=n.AsyncScopeManager}}e.registerContextPreservation=l}),Ai=x((e,n)=>{"use strict";n.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),Wr=x((e,n)=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(d){for(var u,p=1,v=arguments.length;p<v;p++){u=arguments[p];for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&(d[m]=u[m])}return d},t.apply(this,arguments)},r=require("http"),s=require("https"),a=require("url"),o=require("constants"),i=br(),c=Ai(),l=function(){function d(){}return d.getCookie=function(u,p){var v="";if(u&&u.length&&typeof p=="string")for(var m=u+"=",g=p.split(";"),E=0;E<g.length;E++){var p=g[E];if(p=d.trim(p),p&&p.indexOf(m)===0){v=p.substring(m.length,g[E].length);break}}return v},d.trim=function(u){return typeof u=="string"?u.replace(/^\s+|\s+$/g,""):""},d.int32ArrayToBase64=function(u){var p=function(T,O){return String.fromCharCode(T>>O&255)},v=function(T){return p(T,24)+p(T,16)+p(T,8)+p(T,0)},m=u.map(v).join(""),g=Buffer.from?Buffer.from(m,"binary"):new Buffer(m,"binary"),E=g.toString("base64");return E.substr(0,E.indexOf("="))},d.random32=function(){return 4294967296*Math.random()|0},d.randomu32=function(){return d.random32()+2147483648},d.w3cTraceId=function(){for(var u=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],p="",v,m=0;m<4;m++)v=d.random32(),p+=u[v&15]+u[v>>4&15]+u[v>>8&15]+u[v>>12&15]+u[v>>16&15]+u[v>>20&15]+u[v>>24&15]+u[v>>28&15];var g=u[8+Math.random()*4|0];return p.substr(0,8)+p.substr(9,4)+"4"+p.substr(13,3)+g+p.substr(16,3)+p.substr(19,12)},d.w3cSpanId=function(){return d.w3cTraceId().substring(16)},d.isValidW3CId=function(u){return u.length===32&&u!=="00000000000000000000000000000000"},d.isArray=function(u){return Object.prototype.toString.call(u)==="[object Array]"},d.isError=function(u){return u instanceof Error},d.isPrimitive=function(u){var p=typeof u;return p==="string"||p==="number"||p==="boolean"},d.isDate=function(u){return Object.prototype.toString.call(u)==="[object Date]"},d.msToTimeSpan=function(u){(isNaN(u)||u<0)&&(u=0);var p=(u/1e3%60).toFixed(7).replace(/0{0,4}$/,""),v=""+Math.floor(u/(1e3*60))%60,m=""+Math.floor(u/(1e3*60*60))%24,g=Math.floor(u/(1e3*60*60*24));p=p.indexOf(".")<2?"0"+p:p,v=v.length<2?"0"+v:v,m=m.length<2?"0"+m:m;var E=g>0?g+".":"";return E+m+":"+v+":"+p},d.extractError=function(u){var p=u;return{message:u.message,code:p.code||p.id||""}},d.extractObject=function(u){return u instanceof Error?d.extractError(u):typeof u.toJSON=="function"?u.toJSON():u},d.validateStringMap=function(u){if(typeof u!="object"){i.info("Invalid properties dropped from payload");return}var p={};for(var v in u){var m="",g=u[v],E=typeof g;if(d.isPrimitive(g))m=g.toString();else if(g===null||E==="undefined")m="";else if(E==="function"){i.info("key: "+v+" was function; will not serialize");continue}else{var T=d.isArray(g)?g:d.extractObject(g);try{d.isPrimitive(T)?m=T:m=JSON.stringify(T)}catch(O){m=g.constructor.name.toString()+" (Error: "+O.message+")",i.info("key: "+v+", could not be serialized")}}p[v]=m.substring(0,d.MAX_PROPERTY_LENGTH)}return p},d.canIncludeCorrelationHeader=function(u,p){var v=u&&u.config&&u.config.correlationHeaderExcludedDomains;if(!v||v.length==0||!p)return!0;for(var m=0;m<v.length;m++){var g=new RegExp(v[m].replace(/\./g,".").replace(/\*/g,".*"));if(g.test(a.parse(p).hostname))return!1}return!0},d.getCorrelationContextTarget=function(u,p){var v=u.headers&&u.headers[c.requestContextHeader];if(v)for(var m=v.split(","),g=0;g<m.length;++g){var E=m[g].split("=");if(E.length==2&&E[0]==p)return E[1]}},d.makeRequest=function(u,p,v,m){p&&p.indexOf("//")===0&&(p="https:"+p);var g=a.parse(p),E=t(t({},v),{host:g.hostname,port:g.port,path:g.pathname}),T=void 0;if(g.protocol==="https:"&&(T=u.proxyHttpsUrl||void 0),g.protocol==="http:"&&(T=u.proxyHttpUrl||void 0),T){T.indexOf("//")===0&&(T="http:"+T);var O=a.parse(T);O.protocol==="https:"?(i.info("Proxies that use HTTPS are not supported"),T=void 0):E=t(t({},E),{host:O.hostname,port:O.port||"80",path:p,headers:t(t({},E.headers),{Host:g.hostname})})}var P=g.protocol==="https:"&&!T;return P&&u.httpsAgent!==void 0?E.agent=u.httpsAgent:!P&&u.httpAgent!==void 0?E.agent=u.httpAgent:P&&(E.agent=d.tlsRestrictedAgent),P?s.request(E,m):r.request(E,m)},d.safeIncludeCorrelationHeader=function(u,p,v){var m;if(typeof v=="string")m=v;else if(v instanceof Array)m=v.join(",");else if(v&&typeof v.toString=="function")try{m=v.toString()}catch(g){i.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",g,v)}m?d.addCorrelationIdHeaderFromString(u,p,m):p.setHeader(c.requestContextHeader,c.requestContextSourceKey+"="+u.config.correlationId)},d.dumpObj=function(u){var p=Object.prototype.toString.call(u),v="";return p==="[object Error]"?v="{ stack: '"+u.stack+"', message: '"+u.message+"', name: '"+u.name+"'":v=JSON.stringify(u),p+v},d.addCorrelationIdHeaderFromString=function(u,p,v){var m=v.split(","),g=c.requestContextSourceKey+"=",E=m.some(function(T){return T.substring(0,g.length)===g});E||p.setHeader(c.requestContextHeader,v+","+c.requestContextSourceKey+"="+u.config.correlationId)},d.MAX_PROPERTY_LENGTH=8192,d.tlsRestrictedAgent=new s.Agent({keepAlive:!0,maxSockets:25,secureOptions:o.SSL_OP_NO_SSLv2|o.SSL_OP_NO_SSLv3|o.SSL_OP_NO_TLSv1|o.SSL_OP_NO_TLSv1_1}),d}();n.exports=l}),Yn=x((e,n)=>{"use strict";var t=Wr(),r=br(),s=function(){function a(){}return a.queryCorrelationId=function(o,i){var c=o.profileQueryEndpoint+"/api/profiles/"+o.instrumentationKey+"/appId";if(a.completedLookups.hasOwnProperty(c)){i(a.completedLookups[c]);return}else if(a.pendingLookups[c]){a.pendingLookups[c].push(i);return}a.pendingLookups[c]=[i];var l=function(){if(a.pendingLookups[c]){var d={method:"GET",disableAppInsightsAutoCollection:!0};r.info(a.TAG,d);var u=t.makeRequest(o,c,d,function(p){if(p.statusCode===200){var v="";p.setEncoding("utf-8"),p.on("data",function(m){v+=m}),p.on("end",function(){r.info(a.TAG,v);var m=a.correlationIdPrefix+v;a.completedLookups[c]=m,a.pendingLookups[c]&&a.pendingLookups[c].forEach(function(g){return g(m)}),delete a.pendingLookups[c]})}else p.statusCode>=400&&p.statusCode<500?(a.completedLookups[c]=void 0,delete a.pendingLookups[c]):setTimeout(l,o.correlationIdRetryIntervalMs)});u&&(u.on("error",function(p){r.warn(a.TAG,p)}),u.end())}};setTimeout(l,0)},a.cancelCorrelationIdQuery=function(o,i){var c=o.profileQueryEndpoint+"/api/profiles/"+o.instrumentationKey+"/appId",l=a.pendingLookups[c];l&&(a.pendingLookups[c]=l.filter(function(d){return d!=i}),a.pendingLookups[c].length==0&&delete a.pendingLookups[c])},a.generateRequestId=function(o){if(o){o=o[0]=="|"?o:"|"+o,o[o.length-1]!=="."&&(o+=".");var i=(a.currentRootId++).toString(16);return a.appendSuffix(o,i,"_")}else return a.generateRootId()},a.getRootId=function(o){var i=o.indexOf(".");i<0&&(i=o.length);var c=o[0]==="|"?1:0;return o.substring(c,i)},a.generateRootId=function(){return"|"+t.w3cTraceId()+"."},a.appendSuffix=function(o,i,c){if(o.length+i.length<a.requestIdMaxLength)return o+i+c;var l=a.requestIdMaxLength-9;if(o.length>l)for(;l>1;--l){var d=o[l-1];if(d==="."||d==="_")break}if(l<=1)return a.generateRootId();for(i=t.randomu32().toString(16);i.length<8;)i="0"+i;return o.substring(0,l)+i+"#"},a.TAG="CorrelationIdManager",a.correlationIdPrefix="cid-v1:",a.w3cEnabled=!0,a.pendingLookups={},a.completedLookups={},a.requestIdMaxLength=1024,a.currentRootId=t.randomu32(),a}();n.exports=s}),po=x((e,n)=>{"use strict";var t=Wr(),r=Yn(),s=function(){function a(o,i){if(this.traceFlag=a.DEFAULT_TRACE_FLAG,this.version=a.DEFAULT_VERSION,o&&typeof o=="string")if(o.split(",").length>1)this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16);else{var c=o.trim().split("-"),l=c.length;l>=4?(this.version=c[0],this.traceId=c[1],this.spanId=c[2],this.traceFlag=c[3]):(this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=a.DEFAULT_VERSION,this.traceId=t.w3cTraceId()),this.version==="00"&&l!==4&&(this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=a.DEFAULT_VERSION,this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=a.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=a.DEFAULT_TRACE_FLAG,this.traceId=t.w3cTraceId()),a.isValidTraceId(this.traceId)||(this.traceId=t.w3cTraceId()),a.isValidSpanId(this.spanId)||(this.spanId=t.w3cTraceId().substr(0,16),this.traceId=t.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(i){this.parentId=i.slice();var d=r.getRootId(i);a.isValidTraceId(d)||(this.legacyRootId=d,d=t.w3cTraceId()),i.indexOf("|")!==-1&&(i=i.substring(1+i.substring(0,i.length-1).lastIndexOf("."),i.length-1)),this.traceId=d,this.spanId=i}else this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)}return a.isValidTraceId=function(o){return o.match(/^[0-9a-f]{32}$/)&&o!=="00000000000000000000000000000000"},a.isValidSpanId=function(o){return o.match(/^[0-9a-f]{16}$/)&&o!=="0000000000000000"},a.formatOpenTelemetryTraceFlags=function(o){var i="0"+o.toString(16);return i.substring(i.length-2)},a.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},a.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},a.prototype.updateSpanId=function(){this.spanId=t.w3cTraceId().substr(0,16)},a.DEFAULT_TRACE_FLAG="01",a.DEFAULT_VERSION="00",a}();n.exports=s}),Tl=x((e,n)=>{"use strict";var t=function(){function r(s){this.fieldmap=[],s&&(this.fieldmap=this.parseHeader(s))}return r.prototype.toString=function(){var s=this.fieldmap;return!s||s.length==0?null:s.join(", ")},r.validateKeyChars=function(s){var a=s.split("@");if(a.length==2){var o=a[0].trim(),i=a[1].trim(),c=!!o.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/),l=!!i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/);return c&&l}else if(a.length==1)return!!s.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/);return!1},r.prototype.parseHeader=function(s){var a=[],o={},i=s.split(",");if(i.length>32)return null;for(var c=0,l=i;c<l.length;c++){var d=l[c],u=d.trim();if(u.length!==0){var p=u.split("=");if(p.length!==2||!r.validateKeyChars(p[0])||o[p[0]])return null;o[p[0]]=!0,a.push(u)}}return a},r.strict=!0,r}();n.exports=t}),Tn=x((e,n)=>{"use strict";var t=function(){function r(){}return r}();n.exports=t}),hv=x((e,n)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,i){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])},a(o,i)};return function(o,i){a(o,i);function c(){this.constructor=o}o.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}}(),r=Tn(),s=function(a){t(o,a);function o(){var i=a.call(this)||this;return i.ver=2,i.properties={},i.measurements={},i}return o}(r);n.exports=s}),wl=x((e,n)=>{"use strict";var t=function(){function r(){}return r}();n.exports=t}),vv=x((e,n)=>{"use strict";var t=function(){function r(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return r}();n.exports=t}),mv=x((e,n)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,i){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])},a(o,i)};return function(o,i){a(o,i);function c(){this.constructor=o}o.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}}(),r=wl(),s=function(a){t(o,a);function o(){return a.call(this)||this}return o}(r);n.exports=s}),Il=x((e,n)=>{"use strict";var t;(function(r){r[r.Measurement=0]="Measurement",r[r.Aggregation=1]="Aggregation"})(t||(t={})),n.exports=t}),gv=x((e,n)=>{"use strict";var t=Il(),r=function(){function s(){this.kind=t.Measurement}return s}();n.exports=r}),yv=x((e,n)=>{"use strict";var t=function(){function r(){this.ver=1,this.sampleRate=100,this.tags={}}return r}();n.exports=t}),Al=x((e,n)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,i){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])},a(o,i)};return function(o,i){a(o,i);function c(){this.constructor=o}o.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}}(),r=Tn(),s=function(a){t(o,a);function o(){var i=a.call(this)||this;return i.ver=2,i.properties={},i.measurements={},i}return o}(r);n.exports=s}),_v=x((e,n)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,i){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])},a(o,i)};return function(o,i){a(o,i);function c(){this.constructor=o}o.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}}(),r=Tn(),s=function(a){t(o,a);function o(){var i=a.call(this)||this;return i.ver=2,i.exceptions=[],i.properties={},i.measurements={},i}return o}(r);n.exports=s}),Ev=x((e,n)=>{"use strict";var t=function(){function r(){this.hasFullStack=!0,this.parsedStack=[]}return r}();n.exports=t}),bv=x((e,n)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,i){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])},a(o,i)};return function(o,i){a(o,i);function c(){this.constructor=o}o.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}}(),r=Tn(),s=function(a){t(o,a);function o(){var i=a.call(this)||this;return i.ver=2,i.properties={},i}return o}(r);n.exports=s}),Sv=x((e,n)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,i){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])},a(o,i)};return function(o,i){a(o,i);function c(){this.constructor=o}o.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}}(),r=Tn(),s=function(a){t(o,a);function o(){var i=a.call(this)||this;return i.ver=2,i.metrics=[],i.properties={},i}return o}(r);n.exports=s}),Tv=x((e,n)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,i){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])},a(o,i)};return function(o,i){a(o,i);function c(){this.constructor=o}o.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}}(),r=Al(),s=function(a){t(o,a);function o(){var i=a.call(this)||this;return i.ver=2,i.properties={},i.measurements={},i}return o}(r);n.exports=s}),wv=x((e,n)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,i){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])},a(o,i)};return function(o,i){a(o,i);function c(){this.constructor=o}o.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}}(),r=Tn(),s=function(a){t(o,a);function o(){var i=a.call(this)||this;return i.ver=2,i.success=!0,i.properties={},i.measurements={},i}return o}(r);n.exports=s}),Iv=x((e,n)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,i){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])},a(o,i)};return function(o,i){a(o,i);function c(){this.constructor=o}o.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}}(),r=Tn(),s=function(a){t(o,a);function o(){var i=a.call(this)||this;return i.ver=2,i.properties={},i.measurements={},i}return o}(r);n.exports=s}),Av=x((e,n)=>{"use strict";var t;(function(r){r[r.Verbose=0]="Verbose",r[r.Information=1]="Information",r[r.Warning=2]="Warning",r[r.Error=3]="Error",r[r.Critical=4]="Critical"})(t||(t={})),n.exports=t}),Ov=x((e,n)=>{"use strict";var t=function(){function r(){}return r}();n.exports=t}),Ol=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AvailabilityData=hv(),e.Base=wl(),e.ContextTagKeys=vv(),e.Data=mv(),e.DataPoint=gv(),e.DataPointType=Il(),e.Domain=Tn(),e.Envelope=yv(),e.EventData=Al(),e.ExceptionData=_v(),e.ExceptionDetails=Ev(),e.MessageData=bv(),e.MetricData=Sv(),e.PageViewData=Tv(),e.RemoteDependencyData=wv(),e.RequestData=Iv(),e.SeverityLevel=Av(),e.StackFrame=Ov()}),Pv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domainSupportsProperties=e.RemoteDependencyDataConstants=void 0;var n=Ol(),t=function(){function s(){}return s.TYPE_HTTP="Http",s.TYPE_AI="Http (tracked component)",s}();e.RemoteDependencyDataConstants=t;function r(s){return"properties"in s||s instanceof n.EventData||s instanceof n.ExceptionData||s instanceof n.MessageData||s instanceof n.MetricData||s instanceof n.PageViewData||s instanceof n.RemoteDependencyData||s instanceof n.RequestData}e.domainSupportsProperties=r}),Cv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Dv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Rv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),xv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Nv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Mv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),kv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Lv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),jv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Hv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Uv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Fv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Bv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryType=e.TelemetryTypeString=e.baseTypeToTelemetryType=e.telemetryTypeToBaseType=void 0;function n(s){switch(s){case r.Event:return"EventData";case r.Exception:return"ExceptionData";case r.Trace:return"MessageData";case r.Metric:return"MetricData";case r.Request:return"RequestData";case r.Dependency:return"RemoteDependencyData";case r.Availability:return"AvailabilityData";case r.PageView:return"PageViewData"}}e.telemetryTypeToBaseType=n;function t(s){switch(s){case"EventData":return r.Event;case"ExceptionData":return r.Exception;case"MessageData":return r.Trace;case"MetricData":return r.Metric;case"RequestData":return r.Request;case"RemoteDependencyData":return r.Dependency;case"AvailabilityData":return r.Availability;case"PageViewData":return r.PageView}}e.baseTypeToTelemetryType=t,e.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var r;(function(s){s[s.Event=0]="Event",s[s.Exception=1]="Exception",s[s.Trace=2]="Trace",s[s.Metric=3]="Metric",s[s.Request=4]="Request",s[s.Dependency=5]="Dependency",s[s.Availability=6]="Availability",s[s.PageView=7]="PageView"})(r=e.TelemetryType||(e.TelemetryType={}))}),qv=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Cv(),e),t(Dv(),e),t(Rv(),e),t(xv(),e),t(Nv(),e),t(Mv(),e),t(kv(),e),t(Lv(),e),t(jv(),e),t(Hv(),e),t(Uv(),e),t(Fv(),e),t(Bv(),e)}),Gv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Vv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),zv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Wv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),$v=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Kv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Qv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Xv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Yv=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Gv(),e),t(Vv(),e),t(zv(),e),t(Wv(),e),t($v(),e),t(Kv(),e),t(Qv(),e),t(Xv(),e)}),Fr=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Pv(),e),t(Ol(),e),t(qv(),e),t(Yv(),e)}),Pl=x((e,n)=>{"use strict";var t=function(){function r(){}return r.prototype.getUrl=function(){return this.url},r.prototype.RequestParser=function(){this.startTime=+new Date},r.prototype._setStatus=function(s,a){var o=+new Date;this.duration=o-this.startTime,this.statusCode=s;var i=this.properties||{};if(a){if(typeof a=="string")i.error=a;else if(a instanceof Error)i.error=a.message;else if(typeof a=="object")for(var c in a)i[c]=a[c]&&a[c].toString&&a[c].toString()}this.properties=i},r.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},r}();n.exports=t}),Cl=x((e,n)=>{"use strict";var t=e&&e.__extends||function(){var p=function(v,m){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,E){g.__proto__=E}||function(g,E){for(var T in E)Object.prototype.hasOwnProperty.call(E,T)&&(g[T]=E[T])},p(v,m)};return function(v,m){p(v,m);function g(){this.constructor=v}v.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}(),r=require("url"),s=Fr(),a=Wr(),o=Ai(),i=Pl(),c=Yn(),l=Tl(),d=po(),u=function(p){t(v,p);function v(m,g){var E=p.call(this)||this;return m&&(E.method=m.method,E.url=E._getAbsoluteUrl(m),E.startTime=+new Date,E.socketRemoteAddress=m.socket&&m.socket.remoteAddress,E.parseHeaders(m,g),m.connection&&(E.connectionRemoteAddress=m.connection.remoteAddress,E.legacySocketRemoteAddress=m.connection.socket&&m.connection.socket.remoteAddress)),E}return v.prototype.onError=function(m,g){this._setStatus(void 0,m),g&&(this.duration=g)},v.prototype.onResponse=function(m,g){this._setStatus(m.statusCode,void 0),g&&(this.duration=g)},v.prototype.getRequestTelemetry=function(m){var g={id:this.requestId,name:this.method+" "+r.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(m&&m.time?g.time=m.time:this.startTime&&(g.time=new Date(this.startTime)),m){for(var E in m)g[E]||(g[E]=m[E]);if(m.properties)for(var E in m.properties)g.properties[E]=m.properties[E]}return g},v.prototype.getRequestTags=function(m){var g={};for(var E in m)g[E]=m[E];return g[v.keys.locationIp]=m[v.keys.locationIp]||this._getIp(),g[v.keys.sessionId]=m[v.keys.sessionId]||this._getId("ai_session"),g[v.keys.userId]=m[v.keys.userId]||this._getId("ai_user"),g[v.keys.userAuthUserId]=m[v.keys.userAuthUserId]||this._getId("ai_authUser"),g[v.keys.operationName]=this.getOperationName(m),g[v.keys.operationParentId]=this.getOperationParentId(m),g[v.keys.operationId]=this.getOperationId(m),g},v.prototype.getOperationId=function(m){return m[v.keys.operationId]||this.operationId},v.prototype.getOperationParentId=function(m){return m[v.keys.operationParentId]||this.parentId||this.getOperationId(m)},v.prototype.getOperationName=function(m){return m[v.keys.operationName]||this.method+" "+r.parse(this.url).pathname},v.prototype.getRequestId=function(){return this.requestId},v.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},v.prototype.getTraceparent=function(){return this.traceparent},v.prototype.getTracestate=function(){return this.tracestate},v.prototype.getLegacyRootId=function(){return this.legacyRootId},v.prototype._getAbsoluteUrl=function(m){if(!m.headers)return m.url;var g=m.connection?m.connection.encrypted:null,E=r.parse(m.url),T=E.pathname,O=E.search,P=g||m.headers["x-forwarded-proto"]=="https"?"https":"http",A=r.format({protocol:P,host:m.headers.host,pathname:T,search:O});return A},v.prototype._getIp=function(){var m=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,g=function(T){var O=m.exec(T);if(O)return O[0]},E=g(this.rawHeaders["x-forwarded-for"])||g(this.rawHeaders["x-client-ip"])||g(this.rawHeaders["x-real-ip"])||g(this.connectionRemoteAddress)||g(this.socketRemoteAddress)||g(this.legacySocketRemoteAddress);return!E&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(E="127.0.0.1"),E},v.prototype._getId=function(m){var g=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",E=v.parseId(a.getCookie(m,g));return E},v.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},v.prototype.parseHeaders=function(m,g){if(this.rawHeaders=m.headers||m.rawHeaders,this.userAgent=m.headers&&m.headers["user-agent"],this.sourceCorrelationId=a.getCorrelationContextTarget(m,o.requestContextSourceKey),m.headers){var E=m.headers[o.traceStateHeader]?m.headers[o.traceStateHeader].toString():null,T=m.headers[o.traceparentHeader]?m.headers[o.traceparentHeader].toString():null,O=m.headers[o.requestIdHeader]?m.headers[o.requestIdHeader].toString():null,P=m.headers[o.parentIdHeader]?m.headers[o.parentIdHeader].toString():null,A=m.headers[o.rootIdHeader]?m.headers[o.rootIdHeader].toString():null;this.correlationContextHeader=m.headers[o.correlationContextHeader]?m.headers[o.correlationContextHeader].toString():null,c.w3cEnabled&&(T||E)?(this.traceparent=new d(T?T.toString():null),this.tracestate=T&&E&&new l(E?E.toString():null),this.setBackCompatFromThisTraceContext()):O?c.w3cEnabled?(this.traceparent=new d(null,O),this.setBackCompatFromThisTraceContext()):(this.parentId=O,this.requestId=c.generateRequestId(this.parentId),this.operationId=c.getRootId(this.requestId)):c.w3cEnabled?(this.traceparent=new d,this.traceparent.parentId=P,this.traceparent.legacyRootId=A||P,this.setBackCompatFromThisTraceContext()):(this.parentId=P,this.requestId=c.generateRequestId(A||this.parentId),this.correlationContextHeader=null,this.operationId=c.getRootId(this.requestId)),g&&(this.requestId=g,this.operationId=c.getRootId(this.requestId))}},v.parseId=function(m){var g=m.split("|");return g.length>0?g[0]:""},v.keys=new s.ContextTagKeys,v}(i);n.exports=u}),Zv=x((e,n)=>{e=n.exports=ce;var t;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?t=function(){var f=Array.prototype.slice.call(arguments,0);f.unshift("SEMVER"),console.log.apply(console,f)}:t=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var r=256,s=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,o=e.re=[],i=e.src=[],c=0,l=c++;i[l]="0|[1-9]\\d*";var d=c++;i[d]="[0-9]+";var u=c++;i[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=c++;i[p]="("+i[l]+")\\.("+i[l]+")\\.("+i[l]+")";var v=c++;i[v]="("+i[d]+")\\.("+i[d]+")\\.("+i[d]+")";var m=c++;i[m]="(?:"+i[l]+"|"+i[u]+")";var g=c++;i[g]="(?:"+i[d]+"|"+i[u]+")";var E=c++;i[E]="(?:-("+i[m]+"(?:\\."+i[m]+")*))";var T=c++;i[T]="(?:-?("+i[g]+"(?:\\."+i[g]+")*))";var O=c++;i[O]="[0-9A-Za-z-]+";var P=c++;i[P]="(?:\\+("+i[O]+"(?:\\."+i[O]+")*))";var A=c++,M="v?"+i[p]+i[E]+"?"+i[P]+"?";i[A]="^"+M+"$";var j="[v=\\s]*"+i[v]+i[T]+"?"+i[P]+"?",G=c++;i[G]="^"+j+"$";var q=c++;i[q]="((?:<|>)?=?)";var Y=c++;i[Y]=i[d]+"|x|X|\\*";var ne=c++;i[ne]=i[l]+"|x|X|\\*";var _e=c++;i[_e]="[v=\\s]*("+i[ne]+")(?:\\.("+i[ne]+")(?:\\.("+i[ne]+")(?:"+i[E]+")?"+i[P]+"?)?)?";var De=c++;i[De]="[v=\\s]*("+i[Y]+")(?:\\.("+i[Y]+")(?:\\.("+i[Y]+")(?:"+i[T]+")?"+i[P]+"?)?)?";var ct=c++;i[ct]="^"+i[q]+"\\s*"+i[_e]+"$";var ot=c++;i[ot]="^"+i[q]+"\\s*"+i[De]+"$";var xt=c++;i[xt]="(?:^|[^\\d])(\\d{1,"+a+"})(?:\\.(\\d{1,"+a+"}))?(?:\\.(\\d{1,"+a+"}))?(?:$|[^\\d])";var at=c++;i[at]="(?:~>?)";var oe=c++;i[oe]="(\\s*)"+i[at]+"\\s+",o[oe]=new RegExp(i[oe],"g");var ge="$1~",le=c++;i[le]="^"+i[at]+i[_e]+"$";var Ue=c++;i[Ue]="^"+i[at]+i[De]+"$";var Q=c++;i[Q]="(?:\\^)";var Ee=c++;i[Ee]="(\\s*)"+i[Q]+"\\s+",o[Ee]=new RegExp(i[Ee],"g");var se="$1^",We=c++;i[We]="^"+i[Q]+i[_e]+"$";var rt=c++;i[rt]="^"+i[Q]+i[De]+"$";var $=c++;i[$]="^"+i[q]+"\\s*("+j+")$|^$";var ee=c++;i[ee]="^"+i[q]+"\\s*("+M+")$|^$";var re=c++;i[re]="(\\s*)"+i[q]+"\\s*("+j+"|"+i[_e]+")",o[re]=new RegExp(i[re],"g");var ve="$1$2$3",Ve=c++;i[Ve]="^\\s*("+i[_e]+")\\s+-\\s+("+i[_e]+")\\s*$";var Ae=c++;i[Ae]="^\\s*("+i[De]+")\\s+-\\s+("+i[De]+")\\s*$";var Ne=c++;for(i[Ne]="(<|>)?=?\\s*\\*",Xe=0;Xe<c;Xe++)t(Xe,i[Xe]),o[Xe]||(o[Xe]=new RegExp(i[Xe]));var Xe;e.parse=Ot;function Ot(f,y){if((!y||typeof y!="object")&&(y={loose:!!y,includePrerelease:!1}),f instanceof ce)return f;if(typeof f!="string"||f.length>r)return null;var S=y.loose?o[G]:o[A];if(!S.test(f))return null;try{return new ce(f,y)}catch{return null}}e.valid=Sr;function Sr(f,y){var S=Ot(f,y);return S?S.version:null}e.clean=mr;function mr(f,y){var S=Ot(f.trim().replace(/^[=v]+/,""),y);return S?S.version:null}e.SemVer=ce;function ce(f,y){if((!y||typeof y!="object")&&(y={loose:!!y,includePrerelease:!1}),f instanceof ce){if(f.loose===y.loose)return f;f=f.version}else if(typeof f!="string")throw new TypeError("Invalid Version: "+f);if(f.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof ce))return new ce(f,y);t("SemVer",f,y),this.options=y,this.loose=!!y.loose;var S=f.trim().match(y.loose?o[G]:o[A]);if(!S)throw new TypeError("Invalid Version: "+f);if(this.raw=f,this.major=+S[1],this.minor=+S[2],this.patch=+S[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");S[4]?this.prerelease=S[4].split(".").map(function(C){if(/^[0-9]+$/.test(C)){var D=+C;if(D>=0&&D<s)return D}return C}):this.prerelease=[],this.build=S[5]?S[5].split("."):[],this.format()}ce.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},ce.prototype.toString=function(){return this.version},ce.prototype.compare=function(f){return t("SemVer.compare",this.version,this.options,f),f instanceof ce||(f=new ce(f,this.options)),this.compareMain(f)||this.comparePre(f)},ce.prototype.compareMain=function(f){return f instanceof ce||(f=new ce(f,this.options)),Ft(this.major,f.major)||Ft(this.minor,f.minor)||Ft(this.patch,f.patch)},ce.prototype.comparePre=function(f){if(f instanceof ce||(f=new ce(f,this.options)),this.prerelease.length&&!f.prerelease.length)return-1;if(!this.prerelease.length&&f.prerelease.length)return 1;if(!this.prerelease.length&&!f.prerelease.length)return 0;var y=0;do{var S=this.prerelease[y],C=f.prerelease[y];if(t("prerelease compare",y,S,C),S===void 0&&C===void 0)return 0;if(C===void 0)return 1;if(S===void 0)return-1;if(S!==C)return Ft(S,C)}while(++y)},ce.prototype.inc=function(f,y){switch(f){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",y);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",y);break;case"prepatch":this.prerelease.length=0,this.inc("patch",y),this.inc("pre",y);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",y),this.inc("pre",y);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var S=this.prerelease.length;--S>=0;)typeof this.prerelease[S]=="number"&&(this.prerelease[S]++,S=-2);S===-1&&this.prerelease.push(0)}y&&(this.prerelease[0]===y?isNaN(this.prerelease[1])&&(this.prerelease=[y,0]):this.prerelease=[y,0]);break;default:throw new Error("invalid increment argument: "+f)}return this.format(),this.raw=this.version,this},e.inc=Tr;function Tr(f,y,S,C){typeof S=="string"&&(C=S,S=void 0);try{return new ce(f,S).inc(y,C).version}catch{return null}}e.diff=nr;function nr(f,y){if(Tt(f,y))return null;var S=Ot(f),C=Ot(y),D="";if(S.prerelease.length||C.prerelease.length){D="pre";var k="prerelease"}for(var L in S)if((L==="major"||L==="minor"||L==="patch")&&S[L]!==C[L])return D+L;return k}e.compareIdentifiers=Ft;var Wt=/^[0-9]+$/;function Ft(f,y){var S=Wt.test(f),C=Wt.test(y);return S&&C&&(f=+f,y=+y),f===y?0:S&&!C?-1:C&&!S?1:f<y?-1:1}e.rcompareIdentifiers=sr;function sr(f,y){return Ft(y,f)}e.major=ir;function ir(f,y){return new ce(f,y).major}e.minor=wr;function wr(f,y){return new ce(f,y).minor}e.patch=ie;function ie(f,y){return new ce(f,y).patch}e.compare=K;function K(f,y,S){return new ce(f,S).compare(new ce(y,S))}e.compareLoose=xe;function xe(f,y){return K(f,y,!0)}e.rcompare=Te;function Te(f,y,S){return K(y,f,S)}e.sort=vt;function vt(f,y){return f.sort(function(S,C){return e.compare(S,C,y)})}e.rsort=Ke;function Ke(f,y){return f.sort(function(S,C){return e.rcompare(S,C,y)})}e.gt=Fe;function Fe(f,y,S){return K(f,y,S)>0}e.lt=$e;function $e(f,y,S){return K(f,y,S)<0}e.eq=Tt;function Tt(f,y,S){return K(f,y,S)===0}e.neq=wt;function wt(f,y,S){return K(f,y,S)!==0}e.gte=Oe;function Oe(f,y,S){return K(f,y,S)>=0}e.lte=Ye;function Ye(f,y,S){return K(f,y,S)<=0}e.cmp=ae;function ae(f,y,S,C){switch(y){case"===":return typeof f=="object"&&(f=f.version),typeof S=="object"&&(S=S.version),f===S;case"!==":return typeof f=="object"&&(f=f.version),typeof S=="object"&&(S=S.version),f!==S;case"":case"=":case"==":return Tt(f,S,C);case"!=":return wt(f,S,C);case">":return Fe(f,S,C);case">=":return Oe(f,S,C);case"<":return $e(f,S,C);case"<=":return Ye(f,S,C);default:throw new TypeError("Invalid operator: "+y)}}e.Comparator=Ie;function Ie(f,y){if((!y||typeof y!="object")&&(y={loose:!!y,includePrerelease:!1}),f instanceof Ie){if(f.loose===!!y.loose)return f;f=f.value}if(!(this instanceof Ie))return new Ie(f,y);t("comparator",f,y),this.options=y,this.loose=!!y.loose,this.parse(f),this.semver===Le?this.value="":this.value=this.operator+this.semver.version,t("comp",this)}var Le={};Ie.prototype.parse=function(f){var y=this.options.loose?o[$]:o[ee],S=f.match(y);if(!S)throw new TypeError("Invalid comparator: "+f);this.operator=S[1],this.operator==="="&&(this.operator=""),S[2]?this.semver=new ce(S[2],this.options.loose):this.semver=Le},Ie.prototype.toString=function(){return this.value},Ie.prototype.test=function(f){return t("Comparator.test",f,this.options.loose),this.semver===Le?!0:(typeof f=="string"&&(f=new ce(f,this.options)),ae(f,this.operator,this.semver,this.options))},Ie.prototype.intersects=function(f,y){if(!(f instanceof Ie))throw new TypeError("a Comparator is required");(!y||typeof y!="object")&&(y={loose:!!y,includePrerelease:!1});var S;if(this.operator==="")return S=new he(f.value,y),pe(this.value,S,y);if(f.operator==="")return S=new he(this.value,y),pe(f.semver,S,y);var C=(this.operator===">="||this.operator===">")&&(f.operator===">="||f.operator===">"),D=(this.operator==="<="||this.operator==="<")&&(f.operator==="<="||f.operator==="<"),k=this.semver.version===f.semver.version,L=(this.operator===">="||this.operator==="<=")&&(f.operator===">="||f.operator==="<="),X=ae(this.semver,"<",f.semver,y)&&(this.operator===">="||this.operator===">")&&(f.operator==="<="||f.operator==="<"),te=ae(this.semver,">",f.semver,y)&&(this.operator==="<="||this.operator==="<")&&(f.operator===">="||f.operator===">");return C||D||k&&L||X||te},e.Range=he;function he(f,y){if((!y||typeof y!="object")&&(y={loose:!!y,includePrerelease:!1}),f instanceof he)return f.loose===!!y.loose&&f.includePrerelease===!!y.includePrerelease?f:new he(f.raw,y);if(f instanceof Ie)return new he(f.value,y);if(!(this instanceof he))return new he(f,y);if(this.options=y,this.loose=!!y.loose,this.includePrerelease=!!y.includePrerelease,this.raw=f,this.set=f.split(/\s*\|\|\s*/).map(function(S){return this.parseRange(S.trim())},this).filter(function(S){return S.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+f);this.format()}he.prototype.format=function(){return this.range=this.set.map(function(f){return f.join(" ").trim()}).join("||").trim(),this.range},he.prototype.toString=function(){return this.range},he.prototype.parseRange=function(f){var y=this.options.loose;f=f.trim();var S=y?o[Ae]:o[Ve];f=f.replace(S,et),t("hyphen replace",f),f=f.replace(o[re],ve),t("comparator trim",f,o[re]),f=f.replace(o[oe],ge),f=f.replace(o[Ee],se),f=f.split(/\s+/).join(" ");var C=y?o[$]:o[ee],D=f.split(" ").map(function(k){return Bt(k,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(D=D.filter(function(k){return!!k.match(C)})),D=D.map(function(k){return new Ie(k,this.options)},this),D},he.prototype.intersects=function(f,y){if(!(f instanceof he))throw new TypeError("a Range is required");return this.set.some(function(S){return S.every(function(C){return f.set.some(function(D){return D.every(function(k){return C.intersects(k,y)})})})})},e.toComparators=ut;function ut(f,y){return new he(f,y).set.map(function(S){return S.map(function(C){return C.value}).join(" ").trim().split(" ")})}function Bt(f,y){return t("comp",f,y),f=Ir(f,y),t("caret",f),f=Kt(f,y),t("tildes",f),f=je(f,y),t("xrange",f),f=Z(f,y),t("stars",f),f}function Ze(f){return!f||f.toLowerCase()==="x"||f==="*"}function Kt(f,y){return f.trim().split(/\s+/).map(function(S){return gr(S,y)}).join(" ")}function gr(f,y){var S=y.loose?o[Ue]:o[le];return f.replace(S,function(C,D,k,L,X){t("tilde",f,C,D,k,L,X);var te;return Ze(D)?te="":Ze(k)?te=">="+D+".0.0 <"+(+D+1)+".0.0":Ze(L)?te=">="+D+"."+k+".0 <"+D+"."+(+k+1)+".0":X?(t("replaceTilde pr",X),te=">="+D+"."+k+"."+L+"-"+X+" <"+D+"."+(+k+1)+".0"):te=">="+D+"."+k+"."+L+" <"+D+"."+(+k+1)+".0",t("tilde return",te),te})}function Ir(f,y){return f.trim().split(/\s+/).map(function(S){return Me(S,y)}).join(" ")}function Me(f,y){t("caret",f,y);var S=y.loose?o[rt]:o[We];return f.replace(S,function(C,D,k,L,X){t("caret",f,C,D,k,L,X);var te;return Ze(D)?te="":Ze(k)?te=">="+D+".0.0 <"+(+D+1)+".0.0":Ze(L)?D==="0"?te=">="+D+"."+k+".0 <"+D+"."+(+k+1)+".0":te=">="+D+"."+k+".0 <"+(+D+1)+".0.0":X?(t("replaceCaret pr",X),D==="0"?k==="0"?te=">="+D+"."+k+"."+L+"-"+X+" <"+D+"."+k+"."+(+L+1):te=">="+D+"."+k+"."+L+"-"+X+" <"+D+"."+(+k+1)+".0":te=">="+D+"."+k+"."+L+"-"+X+" <"+(+D+1)+".0.0"):(t("no pr"),D==="0"?k==="0"?te=">="+D+"."+k+"."+L+" <"+D+"."+k+"."+(+L+1):te=">="+D+"."+k+"."+L+" <"+D+"."+(+k+1)+".0":te=">="+D+"."+k+"."+L+" <"+(+D+1)+".0.0"),t("caret return",te),te})}function je(f,y){return t("replaceXRanges",f,y),f.split(/\s+/).map(function(S){return Se(S,y)}).join(" ")}function Se(f,y){f=f.trim();var S=y.loose?o[ot]:o[ct];return f.replace(S,function(C,D,k,L,X,te){t("xRange",f,C,D,k,L,X,te);var He=Ze(k),dt=He||Ze(L),Be=dt||Ze(X),it=Be;return D==="="&&it&&(D=""),He?D===">"||D==="<"?C="<0.0.0":C="*":D&&it?(dt&&(L=0),X=0,D===">"?(D=">=",dt?(k=+k+1,L=0,X=0):(L=+L+1,X=0)):D==="<="&&(D="<",dt?k=+k+1:L=+L+1),C=D+k+"."+L+"."+X):dt?C=">="+k+".0.0 <"+(+k+1)+".0.0":Be&&(C=">="+k+"."+L+".0 <"+k+"."+(+L+1)+".0"),t("xRange return",C),C})}function Z(f,y){return t("replaceStars",f,y),f.trim().replace(o[Ne],"")}function et(f,y,S,C,D,k,L,X,te,He,dt,Be,it){return Ze(S)?y="":Ze(C)?y=">="+S+".0.0":Ze(D)?y=">="+S+"."+C+".0":y=">="+y,Ze(te)?X="":Ze(He)?X="<"+(+te+1)+".0.0":Ze(dt)?X="<"+te+"."+(+He+1)+".0":Be?X="<="+te+"."+He+"."+dt+"-"+Be:X="<="+X,(y+" "+X).trim()}he.prototype.test=function(f){if(!f)return!1;typeof f=="string"&&(f=new ce(f,this.options));for(var y=0;y<this.set.length;y++)if(ze(this.set[y],f,this.options))return!0;return!1};function ze(f,y,S){for(var C=0;C<f.length;C++)if(!f[C].test(y))return!1;if(y.prerelease.length&&!S.includePrerelease){for(C=0;C<f.length;C++)if(t(f[C].semver),f[C].semver!==Le&&f[C].semver.prerelease.length>0){var D=f[C].semver;if(D.major===y.major&&D.minor===y.minor&&D.patch===y.patch)return!0}return!1}return!0}e.satisfies=pe;function pe(f,y,S){try{y=new he(y,S)}catch{return!1}return y.test(f)}e.maxSatisfying=mt;function mt(f,y,S){var C=null,D=null;try{var k=new he(y,S)}catch{return null}return f.forEach(function(L){k.test(L)&&(!C||D.compare(L)===-1)&&(C=L,D=new ce(C,S))}),C}e.minSatisfying=bt;function bt(f,y,S){var C=null,D=null;try{var k=new he(y,S)}catch{return null}return f.forEach(function(L){k.test(L)&&(!C||D.compare(L)===1)&&(C=L,D=new ce(C,S))}),C}e.minVersion=Ct;function Ct(f,y){f=new he(f,y);var S=new ce("0.0.0");if(f.test(S)||(S=new ce("0.0.0-0"),f.test(S)))return S;S=null;for(var C=0;C<f.set.length;++C){var D=f.set[C];D.forEach(function(k){var L=new ce(k.semver.version);switch(k.operator){case">":L.prerelease.length===0?L.patch++:L.prerelease.push(0),L.raw=L.format();case"":case">=":(!S||Fe(S,L))&&(S=L);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+k.operator)}})}return S&&f.test(S)?S:null}e.validRange=Vt;function Vt(f,y){try{return new he(f,y).range||"*"}catch{return null}}e.ltr=$t;function $t(f,y,S){return nt(f,y,"<",S)}e.gtr=Ht;function Ht(f,y,S){return nt(f,y,">",S)}e.outside=nt;function nt(f,y,S,C){f=new ce(f,C),y=new he(y,C);var D,k,L,X,te;switch(S){case">":D=Fe,k=Ye,L=$e,X=">",te=">=";break;case"<":D=$e,k=Oe,L=Fe,X="<",te="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(pe(f,y,C))return!1;for(var He=0;He<y.set.length;++He){var dt=y.set[He],Be=null,it=null;if(dt.forEach(function(pt){pt.semver===Le&&(pt=new Ie(">=0.0.0")),Be=Be||pt,it=it||pt,D(pt.semver,Be.semver,C)?Be=pt:L(pt.semver,it.semver,C)&&(it=pt)}),Be.operator===X||Be.operator===te||(!it.operator||it.operator===X)&&k(f,it.semver)||it.operator===te&&L(f,it.semver))return!1}return!0}e.prerelease=Dt;function Dt(f,y){var S=Ot(f,y);return S&&S.prerelease.length?S.prerelease:null}e.intersects=lt;function lt(f,y,S){return f=new he(f,S),y=new he(y,S),f.intersects(y)}e.coerce=gt;function gt(f){if(f instanceof ce)return f;if(typeof f!="string")return null;var y=f.match(o[xt]);return y==null?null:Ot(y[1]+"."+(y[2]||"0")+"."+(y[3]||"0"))}}),ss=x((e,n)=>{"use strict";function t(d){return typeof d=="function"}var r=console.error.bind(console);function s(d,u,p){var v=!!d[u]&&d.propertyIsEnumerable(u);Object.defineProperty(d,u,{configurable:!0,enumerable:v,writable:!0,value:p})}function a(d){d&&d.logger&&(t(d.logger)?r=d.logger:r("new logger isn't a function, not replacing"))}function o(d,u,p){if(!d||!d[u]){r("no original function "+u+" to wrap");return}if(!p){r("no wrapper function"),r(new Error().stack);return}if(!t(d[u])||!t(p)){r("original object and wrapper must be functions");return}var v=d[u],m=p(v,u);return s(m,"__original",v),s(m,"__unwrap",function(){d[u]===m&&s(d,u,v)}),s(m,"__wrapped",!0),s(d,u,m),m}function i(d,u,p){if(d)Array.isArray(d)||(d=[d]);else{r("must provide one or more modules to patch"),r(new Error().stack);return}if(!(u&&Array.isArray(u))){r("must provide one or more functions to wrap on modules");return}d.forEach(function(v){u.forEach(function(m){o(v,m,p)})})}function c(d,u){if(!d||!d[u]){r("no function to unwrap."),r(new Error().stack);return}if(!d[u].__unwrap)r("no original to unwrap to -- has "+u+" already been unwrapped?");else return d[u].__unwrap()}function l(d,u){if(d)Array.isArray(d)||(d=[d]);else{r("must provide one or more modules to patch"),r(new Error().stack);return}if(!(u&&Array.isArray(u))){r("must provide one or more functions to unwrap on modules");return}d.forEach(function(p){u.forEach(function(v){c(p,v)})})}a.wrap=o,a.massWrap=i,a.unwrap=c,a.massUnwrap=l,n.exports=a}),cs=x((e,n)=>{"use strict";var t=ss(),r=t.wrap,s=t.unwrap,a="wrap@before";function o(u,p,v){var m=!!u[p]&&u.propertyIsEnumerable(p);Object.defineProperty(u,p,{configurable:!0,enumerable:m,writable:!0,value:v})}function i(u,p){for(var v=p.length,m=0;m<v;m++){var g=p[m],E=u[a];if(typeof E=="function")E(g);else if(Array.isArray(E))for(var T=E.length,O=0;O<T;O++)E[O](g)}}function c(u,p){var v;return v=u._events&&u._events[p],Array.isArray(v)||(v?v=[v]:v=[]),v}function l(u,p,v){var m=c(u,p),g=m.filter(function(E){return v.indexOf(E)===-1});g.length>0&&i(u,g)}function d(u,p){if(u){var v=u;if(typeof u=="function")v=p(u);else if(Array.isArray(u)){v=[];for(var m=0;m<u.length;m++)v[m]=p(u[m])}return v}}n.exports=function(u,p,v){if(!u||!u.on||!u.addListener||!u.removeListener||!u.emit)throw new Error("can only wrap real EEs");if(!p)throw new Error("must have function to run on listener addition");if(!v)throw new Error("must have function to wrap listeners when emitting");function m(E){return function(T,O){var P=c(this,T).slice();try{var A=E.call(this,T,O);return l(this,T,P),A}finally{this.on.__wrapped||r(this,"on",m),this.addListener.__wrapped||r(this,"addListener",m)}}}function g(E){return function(T){if(!this._events||!this._events[T])return E.apply(this,arguments);var O=this._events[T];function P(A){return function(){this._events[T]=O;try{return A.apply(this,arguments)}finally{O=this._events[T],this._events[T]=d(O,v)}}}r(this,"removeListener",P);try{return this._events[T]=d(O,v),E.apply(this,arguments)}finally{s(this,"removeListener"),this._events[T]=O}}}u[a]?typeof u[a]=="function"?o(u,a,[u[a],p]):Array.isArray(u[a])&&u[a].push(p):o(u,a,p),u.__wrapped||(r(u,"addListener",m),r(u,"on",m),r(u,"emit",g),o(u,"__unwrap",function(){s(u,"addListener"),s(u,"on"),s(u,"emit"),delete u[a],delete u.__wrapped}),o(u,"__wrapped",!0))}}),Jv=x((e,n)=>{"use strict";var t=require("util"),r=require("assert"),s=cs(),a=require("async_hooks"),o="cls@contexts",i="error@context",c=process.env.DEBUG_CLS_HOOKED,l=-1;n.exports={getNamespace:u,createNamespace:p,destroyNamespace:v,reset:m,ERROR_SYMBOL:i};function d(E){this.name=E,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}d.prototype.set=function(E,T){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[E]=T,c){let O=" ".repeat(this._indent<0?0:this._indent);g(O+"CONTEXT-SET KEY:"+E+"="+T+" in ns:"+this.name+" currentUid:"+l+" active:"+t.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return T},d.prototype.get=function(E){if(!this.active){if(c){let T=a.currentId(),O=a.triggerAsyncId(),P=" ".repeat(this._indent<0?0:this._indent);g(`${P}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${E}=undefined currentUid:${l} asyncHooksCurrentId:${T} triggerId:${O} len:${this._set.length}`)}return}if(c){let T=a.executionAsyncId(),O=a.triggerAsyncId(),P=" ".repeat(this._indent<0?0:this._indent);g(P+"CONTEXT-GETTING KEY:"+E+"="+this.active[E]+" ("+this.name+") currentUid:"+l+" active:"+t.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),g(`${P}CONTEXT-GETTING KEY: (${this.name}) ${E}=${this.active[E]} currentUid:${l} asyncHooksCurrentId:${T} triggerId:${O} len:${this._set.length} active:${t.inspect(this.active)}`)}return this.active[E]},d.prototype.createContext=function(){let E=Object.create(this.active?this.active:Object.prototype);if(E._ns_name=this.name,E.id=l,c){let T=a.executionAsyncId(),O=a.triggerAsyncId(),P=" ".repeat(this._indent<0?0:this._indent);g(`${P}CONTEXT-CREATED Context: (${this.name}) currentUid:${l} asyncHooksCurrentId:${T} triggerId:${O} len:${this._set.length} context:${t.inspect(E,{showHidden:!0,depth:2,colors:!0})}`)}return E},d.prototype.run=function(E){let T=this.createContext();this.enter(T);try{if(c){let O=a.triggerAsyncId(),P=a.executionAsyncId(),A=" ".repeat(this._indent<0?0:this._indent);g(`${A}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${l} triggerId:${O} asyncHooksCurrentId:${P} len:${this._set.length} context:${t.inspect(T)}`)}return E(T),T}catch(O){throw O&&(O[i]=T),O}finally{if(c){let O=a.triggerAsyncId(),P=a.executionAsyncId(),A=" ".repeat(this._indent<0?0:this._indent);g(`${A}CONTEXT-RUN END: (${this.name}) currentUid:${l} triggerId:${O} asyncHooksCurrentId:${P} len:${this._set.length} ${t.inspect(T)}`)}this.exit(T)}},d.prototype.runAndReturn=function(E){let T;return this.run(function(O){T=E(O)}),T},d.prototype.runPromise=function(E){let T=this.createContext();this.enter(T);let O=E(T);if(!O||!O.then||!O.catch)throw new Error("fn must return a promise.");return c&&g("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+t.inspect(T)),O.then(P=>(c&&g("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+t.inspect(T)),this.exit(T),P)).catch(P=>{throw P[i]=T,c&&g("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+t.inspect(T)),this.exit(T),P})},d.prototype.bind=function(E,T){T||(this.active?T=this.active:T=this.createContext());let O=this;return function(){O.enter(T);try{return E.apply(this,arguments)}catch(P){throw P&&(P[i]=T),P}finally{O.exit(T)}}},d.prototype.enter=function(E){if(r.ok(E,"context must be provided for entering"),c){let T=a.executionAsyncId(),O=a.triggerAsyncId(),P=" ".repeat(this._indent<0?0:this._indent);g(`${P}CONTEXT-ENTER: (${this.name}) currentUid:${l} triggerId:${O} asyncHooksCurrentId:${T} len:${this._set.length} ${t.inspect(E)}`)}this._set.push(this.active),this.active=E},d.prototype.exit=function(E){if(r.ok(E,"context must be provided for exiting"),c){let O=a.executionAsyncId(),P=a.triggerAsyncId(),A=" ".repeat(this._indent<0?0:this._indent);g(`${A}CONTEXT-EXIT: (${this.name}) currentUid:${l} triggerId:${P} asyncHooksCurrentId:${O} len:${this._set.length} ${t.inspect(E)}`)}if(this.active===E){r.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let T=this._set.lastIndexOf(E);T<0?(c&&g("??ERROR?? context exiting but not entered - ignoring: "+t.inspect(E)),r.ok(T>=0,`context not currently entered; can't exit. 
`+t.inspect(this)+`
`+t.inspect(E))):(r.ok(T,"can't remove top context"),this._set.splice(T,1))},d.prototype.bindEmitter=function(E){r.ok(E.on&&E.addListener&&E.emit,"can only bind real EEs");let T=this,O="context@"+this.name;function P(M){!M||(M[o]||(M[o]=Object.create(null)),M[o][O]={namespace:T,context:T.active})}function A(M){if(!(M&&M[o]))return M;let j=M,G=M[o];return Object.keys(G).forEach(function(q){let Y=G[q];j=Y.namespace.bind(j,Y.context)}),j}s(E,P,A)},d.prototype.fromException=function(E){return E[i]};function u(E){return process.namespaces[E]}function p(E){r.ok(E,"namespace must be given a name."),c&&g(`NS-CREATING NAMESPACE (${E})`);let T=new d(E);return T.id=l,a.createHook({init(O,P,A,M){if(l=a.executionAsyncId(),T.active){if(T._contexts.set(O,T.active),c){let j=" ".repeat(T._indent<0?0:T._indent);g(`${j}INIT [${P}] (${E}) asyncId:${O} currentUid:${l} triggerId:${A} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} resource:${M}`)}}else if(l===0){let j=a.triggerAsyncId(),G=T._contexts.get(j);if(G){if(T._contexts.set(O,G),c){let q=" ".repeat(T._indent<0?0:T._indent);g(`${q}INIT USING CONTEXT FROM TRIGGERID [${P}] (${E}) asyncId:${O} currentUid:${l} triggerId:${j} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} resource:${M}`)}}else if(c){let q=" ".repeat(T._indent<0?0:T._indent);g(`${q}INIT MISSING CONTEXT [${P}] (${E}) asyncId:${O} currentUid:${l} triggerId:${j} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} resource:${M}`)}}if(c&&P==="PROMISE"){g(t.inspect(M,{showHidden:!0}));let j=M.parentId,G=" ".repeat(T._indent<0?0:T._indent);g(`${G}INIT RESOURCE-PROMISE [${P}] (${E}) parentId:${j} asyncId:${O} currentUid:${l} triggerId:${A} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} resource:${M}`)}},before(O){l=a.executionAsyncId();let P;if(P=T._contexts.get(O)||T._contexts.get(l),P){if(c){let A=a.triggerAsyncId(),M=" ".repeat(T._indent<0?0:T._indent);g(`${M}BEFORE (${E}) asyncId:${O} currentUid:${l} triggerId:${A} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(P)}`),T._indent+=2}T.enter(P)}else if(c){let A=a.triggerAsyncId(),M=" ".repeat(T._indent<0?0:T._indent);g(`${M}BEFORE MISSING CONTEXT (${E}) asyncId:${O} currentUid:${l} triggerId:${A} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${t.inspect(T._contexts,{showHidden:!0,depth:2,colors:!0})}`),T._indent+=2}},after(O){l=a.executionAsyncId();let P;if(P=T._contexts.get(O)||T._contexts.get(l),P){if(c){let A=a.triggerAsyncId();T._indent-=2;let M=" ".repeat(T._indent<0?0:T._indent);g(`${M}AFTER (${E}) asyncId:${O} currentUid:${l} triggerId:${A} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(P)}`)}T.exit(P)}else if(c){let A=a.triggerAsyncId();T._indent-=2;let M=" ".repeat(T._indent<0?0:T._indent);g(`${M}AFTER MISSING CONTEXT (${E}) asyncId:${O} currentUid:${l} triggerId:${A} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(P)}`)}},destroy(O){if(l=a.executionAsyncId(),c){let P=a.triggerAsyncId(),A=" ".repeat(T._indent<0?0:T._indent);g(`${A}DESTROY (${E}) currentUid:${l} asyncId:${O} triggerId:${P} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(T._contexts.get(l))}`)}T._contexts.delete(O)}}).enable(),process.namespaces[E]=T,T}function v(E){let T=u(E);r.ok(T,`can't delete nonexistent namespace! "`+E+'"'),r.ok(T.id,"don't assign to process.namespaces directly! "+t.inspect(T)),process.namespaces[E]=null}function m(){process.namespaces&&Object.keys(process.namespaces).forEach(function(E){v(E)}),process.namespaces=Object.create(null)}process.namespaces={};function g(...E){c&&process._rawDebug(`${t.format(...E)}`)}}),em=x((e,n)=>{"use strict";function t(){}n.exports=function(){let r=this._hooks,s=this._state,a=process.nextTick;process.nextTick=function(){if(!s.enabled)return a.apply(process,arguments);let o=new Array(arguments.length);for(let d=0;d<arguments.length;d++)o[d]=arguments[d];let i=o[0];if(typeof i!="function")throw new TypeError("callback is not a function");let c=new t,l=--s.counter;return r.init.call(c,l,0,null,null),o[0]=function(){r.pre.call(c,l);let d=!0;try{i.apply(this,arguments),d=!1}finally{d&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){r.post.call(c,l,!0),r.destroy.call(null,l)})}r.post.call(c,l,!1),r.destroy.call(null,l)},a.apply(process,o)}}}),tm=x((e,n)=>{"use strict";function t(){}n.exports=function(){let r=this._hooks,s=this._state,a=global.Promise,o=a.prototype.then;a.prototype.then=d;function i(u,p,v,m){return typeof u!="function"?m?c(v):l(v):function(){r.pre.call(p,v);try{return u.apply(this,arguments)}finally{r.post.call(p,v,!1),r.destroy.call(null,v)}}}function c(u){return function(p){return r.destroy.call(null,u),p}}function l(u){return function(p){throw r.destroy.call(null,u),p}}function d(u,p){if(!s.enabled)return o.call(this,u,p);let v=new t,m=--s.counter;return r.init.call(v,m,0,null,null),o.call(this,i(u,v,m,!0),i(p,v,m,!1))}}}),rm=x((e,n)=>{"use strict";var t=require("timers");function r(){}function s(){}function a(){}var o=new Map,i=new Map,c=new Map,l=null,d=!1;n.exports=function(){u(this._hooks,this._state,"setTimeout","clearTimeout",r,o,!0),u(this._hooks,this._state,"setInterval","clearInterval",s,i,!1),u(this._hooks,this._state,"setImmediate","clearImmediate",a,c,!0),global.setTimeout=t.setTimeout,global.setInterval=t.setInterval,global.setImmediate=t.setImmediate,global.clearTimeout=t.clearTimeout,global.clearInterval=t.clearInterval,global.clearImmediate=t.clearImmediate};function u(p,v,m,g,E,T,O){let P=t[m],A=t[g];t[m]=function(){if(!v.enabled)return P.apply(t,arguments);let M=new Array(arguments.length);for(let ne=0;ne<arguments.length;ne++)M[ne]=arguments[ne];let j=M[0];if(typeof j!="function")throw new TypeError('"callback" argument must be a function');let G=new E,q=--v.counter,Y;return p.init.call(G,q,0,null,null),M[0]=function(){l=Y,p.pre.call(G,q);let ne=!0;try{j.apply(this,arguments),ne=!1}finally{ne&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){p.post.call(G,q,!0),T.delete(Y),p.destroy.call(null,q)})}p.post.call(G,q,!1),l=null,(O||d)&&(d=!1,T.delete(Y),p.destroy.call(null,q))},Y=P.apply(t,M),T.set(Y,q),Y},t[g]=function(M){if(l===M&&M!==null)d=!0;else if(T.has(M)){let j=T.get(M);T.delete(M),p.destroy.call(null,j)}A.apply(t,arguments)}}}),Dl=x((e,n)=>{n.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}}),nm=x((e,n)=>{"use strict";var t=process.binding("async_wrap"),r=t.Providers.TIMERWRAP,s={nextTick:em(),promise:tm(),timers:rm()},a=new Set;function o(){this.enabled=!1,this.counter=0}function i(){let d=this.initFns=[],u=this.preFns=[],p=this.postFns=[],v=this.destroyFns=[];this.init=function(m,g,E,T){if(g===r){a.add(m);return}for(let O of d)O(m,this,g,E,T)},this.pre=function(m){if(!a.has(m))for(let g of u)g(m,this)},this.post=function(m,g){if(!a.has(m))for(let E of p)E(m,this,g)},this.destroy=function(m){if(a.has(m)){a.delete(m);return}for(let g of v)g(m)}}i.prototype.add=function(d){d.init&&this.initFns.push(d.init),d.pre&&this.preFns.push(d.pre),d.post&&this.postFns.push(d.post),d.destroy&&this.destroyFns.push(d.destroy)};function c(d,u){let p=d.indexOf(u);p!==-1&&d.splice(p,1)}i.prototype.remove=function(d){d.init&&c(this.initFns,d.init),d.pre&&c(this.preFns,d.pre),d.post&&c(this.postFns,d.post),d.destroy&&c(this.destroyFns,d.destroy)};function l(){this._state=new o,this._hooks=new i,this.version=Dl().version,this.providers=t.Providers;for(let d of Object.keys(s))s[d].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),t.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}n.exports=l,l.prototype.addHooks=function(d){this._hooks.add(d)},l.prototype.removeHooks=function(d){this._hooks.remove(d)},l.prototype.enable=function(){this._state.enabled=!0,t.enable()},l.prototype.disable=function(){this._state.enabled=!1,t.disable()}}),Rl=x((e,n)=>{n.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}}),im=x((e,n)=>{function t(r){try{return Error.prototype.toString.call(r)}catch(s){try{return"<error: "+s+">"}catch{return"<error>"}}}n.exports=function(r,s){var a=[];a.push(t(r));for(var o=0;o<s.length;o++){var i=s[o],c;try{c=i.toString()}catch(l){try{c="<error: "+l+">"}catch{c="<error>"}}a.push("    at "+c)}return a.join(`
`)}}),om=x((e,n)=>{var t=im();function r(){this.extend=new o,this.filter=new o,this.format=new i,this.version=Rl().version}var s=!1;r.prototype.callSite=function u(p){p||(p={}),s=!0;var v={};Error.captureStackTrace(v,u);var m=v.stack;return s=!1,m=m.slice(p.slice||0),p.extend&&(m=this.extend._modify(v,m)),p.filter&&(m=this.filter._modify(v,m)),m};var a=new r;function o(){this._modifiers=[]}o.prototype._modify=function(u,p){for(var v=0,m=this._modifiers.length;v<m;v++)p=this._modifiers[v](u,p);return p},o.prototype.attach=function(u){this._modifiers.push(u)},o.prototype.deattach=function(u){var p=this._modifiers.indexOf(u);return p===-1?!1:(this._modifiers.splice(p,1),!0)};function i(){this._formater=t,this._previous=void 0}i.prototype.replace=function(u){u?this._formater=u:this.restore()},i.prototype.restore=function(){this._formater=t,this._previous=void 0},i.prototype._backup=function(){this._previous=this._formater},i.prototype._roolback=function(){this._previous===t?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&a.format.replace(Error.prepareStackTrace);var c=!1;function l(u,p){if(s)return p;if(c)return t(u,p);var v=p.concat();v=a.extend._modify(u,v),v=a.filter._modify(u,v),v=v.slice(0,Error.stackTraceLimit),Object.isExtensible(u)&&Object.getOwnPropertyDescriptor(u,"callSite")===void 0&&(u.callSite={original:p,mutated:v}),c=!0;var m=a.format._formater(u,v);return c=!1,m}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return l},set:function(u){u===l?a.format._roolback():(a.format._backup(),a.format.replace(u))}});function d(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:d,set:function(u){Object.defineProperty(this,"callSite",{value:u,writable:!0,configurable:!0})},configurable:!0}),n.exports=a}),xl=x((e,n)=>{if(global._stackChain)if(global._stackChain.version===Rl().version)n.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else n.exports=global._stackChain=om()}),am=x((e,n)=>{"use strict";var t=nm();if(global._asyncHook)if(global._asyncHook.version===Dl().version)n.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else xl().filter.attach(function(r,s){return s.filter(function(a){let o=a.getFileName();return!(o&&o.slice(0,__dirname.length)===__dirname)})}),n.exports=global._asyncHook=new t}),sm=x((e,n)=>{"use strict";var t=require("util"),r=require("assert"),s=cs(),a=am(),o="cls@contexts",i="error@context",c=[];for(let A in a.providers)c[a.providers[A]]=A;var l=process.env.DEBUG_CLS_HOOKED,d=-1;n.exports={getNamespace:p,createNamespace:v,destroyNamespace:m,reset:g,ERROR_SYMBOL:i};function u(A){this.name=A,this.active=null,this._set=[],this.id=null,this._contexts=new Map}u.prototype.set=function(A,M){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return l&&E("    SETTING KEY:"+A+"="+M+" in ns:"+this.name+" uid:"+d+" active:"+t.inspect(this.active,!0)),this.active[A]=M,M},u.prototype.get=function(A){if(!this.active){l&&E("    GETTING KEY:"+A+"=undefined "+this.name+" uid:"+d+" active:"+t.inspect(this.active,!0));return}return l&&E("    GETTING KEY:"+A+"="+this.active[A]+" "+this.name+" uid:"+d+" active:"+t.inspect(this.active,!0)),this.active[A]},u.prototype.createContext=function(){l&&E("   CREATING Context: "+this.name+" uid:"+d+" len:"+this._set.length+"  active:"+t.inspect(this.active,!0,2,!0));let A=Object.create(this.active?this.active:Object.prototype);return A._ns_name=this.name,A.id=d,l&&E("   CREATED Context: "+this.name+" uid:"+d+" len:"+this._set.length+"  context:"+t.inspect(A,!0,2,!0)),A},u.prototype.run=function(A){let M=this.createContext();this.enter(M);try{return l&&E(" BEFORE RUN: "+this.name+" uid:"+d+" len:"+this._set.length+" "+t.inspect(M)),A(M),M}catch(j){throw j&&(j[i]=M),j}finally{l&&E(" AFTER RUN: "+this.name+" uid:"+d+" len:"+this._set.length+" "+t.inspect(M)),this.exit(M)}},u.prototype.runAndReturn=function(A){var M;return this.run(function(j){M=A(j)}),M},u.prototype.runPromise=function(A){let M=this.createContext();this.enter(M);let j=A(M);if(!j||!j.then||!j.catch)throw new Error("fn must return a promise.");return l&&E(" BEFORE runPromise: "+this.name+" uid:"+d+" len:"+this._set.length+" "+t.inspect(M)),j.then(G=>(l&&E(" AFTER runPromise: "+this.name+" uid:"+d+" len:"+this._set.length+" "+t.inspect(M)),this.exit(M),G)).catch(G=>{throw G[i]=M,l&&E(" AFTER runPromise: "+this.name+" uid:"+d+" len:"+this._set.length+" "+t.inspect(M)),this.exit(M),G})},u.prototype.bind=function(A,M){M||(this.active?M=this.active:M=this.createContext());let j=this;return function(){j.enter(M);try{return A.apply(this,arguments)}catch(G){throw G&&(G[i]=M),G}finally{j.exit(M)}}},u.prototype.enter=function(A){r.ok(A,"context must be provided for entering"),l&&E("  ENTER "+this.name+" uid:"+d+" len:"+this._set.length+" context: "+t.inspect(A)),this._set.push(this.active),this.active=A},u.prototype.exit=function(A){if(r.ok(A,"context must be provided for exiting"),l&&E("  EXIT "+this.name+" uid:"+d+" len:"+this._set.length+" context: "+t.inspect(A)),this.active===A){r.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let M=this._set.lastIndexOf(A);M<0?(l&&E("??ERROR?? context exiting but not entered - ignoring: "+t.inspect(A)),r.ok(M>=0,`context not currently entered; can't exit. 
`+t.inspect(this)+`
`+t.inspect(A))):(r.ok(M,"can't remove top context"),this._set.splice(M,1))},u.prototype.bindEmitter=function(A){r.ok(A.on&&A.addListener&&A.emit,"can only bind real EEs");let M=this,j="context@"+this.name;function G(Y){!Y||(Y[o]||(Y[o]=Object.create(null)),Y[o][j]={namespace:M,context:M.active})}function q(Y){if(!(Y&&Y[o]))return Y;let ne=Y,_e=Y[o];return Object.keys(_e).forEach(function(De){let ct=_e[De];ne=ct.namespace.bind(ne,ct.context)}),ne}s(A,G,q)},u.prototype.fromException=function(A){return A[i]};function p(A){return process.namespaces[A]}function v(A){r.ok(A,"namespace must be given a name."),l&&E("CREATING NAMESPACE "+A);let M=new u(A);return M.id=d,a.addHooks({init(j,G,q,Y,ne){d=j,Y?(M._contexts.set(j,M._contexts.get(Y)),l&&E("PARENTID: "+A+" uid:"+j+" parent:"+Y+" provider:"+q)):M._contexts.set(d,M.active),l&&E("INIT "+A+" uid:"+j+" parent:"+Y+" provider:"+c[q]+" active:"+t.inspect(M.active,!0))},pre(j,G){d=j;let q=M._contexts.get(j);q?(l&&E(" PRE "+A+" uid:"+j+" handle:"+T(G)+" context:"+t.inspect(q)),M.enter(q)):l&&E(" PRE MISSING CONTEXT "+A+" uid:"+j+" handle:"+T(G))},post(j,G){d=j;let q=M._contexts.get(j);q?(l&&E(" POST "+A+" uid:"+j+" handle:"+T(G)+" context:"+t.inspect(q)),M.exit(q)):l&&E(" POST MISSING CONTEXT "+A+" uid:"+j+" handle:"+T(G))},destroy(j){d=j,l&&E("DESTROY "+A+" uid:"+j+" context:"+t.inspect(M._contexts.get(d))+" active:"+t.inspect(M.active,!0)),M._contexts.delete(j)}}),process.namespaces[A]=M,M}function m(A){let M=p(A);r.ok(M,`can't delete nonexistent namespace! "`+A+'"'),r.ok(M.id,"don't assign to process.namespaces directly! "+t.inspect(M)),process.namespaces[A]=null}function g(){process.namespaces&&Object.keys(process.namespaces).forEach(function(A){m(A)}),process.namespaces=Object.create(null)}process.namespaces={},a._state&&!a._state.enabled&&a.enable();function E(A){process.env.DEBUG&&process._rawDebug(A)}function T(A){if(!A)return A;if(typeof A=="function")return A.name?A.name:(A.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(A.constructor&&A.constructor.name)return A.constructor.name}if(l){O=xl();for(P in O.filter._modifiers)O.filter.deattach(P)}var O,P}),cm=x((e,n)=>{"use strict";var t=Zv();process&&t.gte(process.versions.node,"8.0.0")?n.exports=Jv():n.exports=sm()}),um=x((e,n)=>{e=n.exports=ce;var t;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?t=function(){var f=Array.prototype.slice.call(arguments,0);f.unshift("SEMVER"),console.log.apply(console,f)}:t=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var r=256,s=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,o=e.re=[],i=e.src=[],c=0,l=c++;i[l]="0|[1-9]\\d*";var d=c++;i[d]="[0-9]+";var u=c++;i[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=c++;i[p]="("+i[l]+")\\.("+i[l]+")\\.("+i[l]+")";var v=c++;i[v]="("+i[d]+")\\.("+i[d]+")\\.("+i[d]+")";var m=c++;i[m]="(?:"+i[l]+"|"+i[u]+")";var g=c++;i[g]="(?:"+i[d]+"|"+i[u]+")";var E=c++;i[E]="(?:-("+i[m]+"(?:\\."+i[m]+")*))";var T=c++;i[T]="(?:-?("+i[g]+"(?:\\."+i[g]+")*))";var O=c++;i[O]="[0-9A-Za-z-]+";var P=c++;i[P]="(?:\\+("+i[O]+"(?:\\."+i[O]+")*))";var A=c++,M="v?"+i[p]+i[E]+"?"+i[P]+"?";i[A]="^"+M+"$";var j="[v=\\s]*"+i[v]+i[T]+"?"+i[P]+"?",G=c++;i[G]="^"+j+"$";var q=c++;i[q]="((?:<|>)?=?)";var Y=c++;i[Y]=i[d]+"|x|X|\\*";var ne=c++;i[ne]=i[l]+"|x|X|\\*";var _e=c++;i[_e]="[v=\\s]*("+i[ne]+")(?:\\.("+i[ne]+")(?:\\.("+i[ne]+")(?:"+i[E]+")?"+i[P]+"?)?)?";var De=c++;i[De]="[v=\\s]*("+i[Y]+")(?:\\.("+i[Y]+")(?:\\.("+i[Y]+")(?:"+i[T]+")?"+i[P]+"?)?)?";var ct=c++;i[ct]="^"+i[q]+"\\s*"+i[_e]+"$";var ot=c++;i[ot]="^"+i[q]+"\\s*"+i[De]+"$";var xt=c++;i[xt]="(?:^|[^\\d])(\\d{1,"+a+"})(?:\\.(\\d{1,"+a+"}))?(?:\\.(\\d{1,"+a+"}))?(?:$|[^\\d])";var at=c++;i[at]="(?:~>?)";var oe=c++;i[oe]="(\\s*)"+i[at]+"\\s+",o[oe]=new RegExp(i[oe],"g");var ge="$1~",le=c++;i[le]="^"+i[at]+i[_e]+"$";var Ue=c++;i[Ue]="^"+i[at]+i[De]+"$";var Q=c++;i[Q]="(?:\\^)";var Ee=c++;i[Ee]="(\\s*)"+i[Q]+"\\s+",o[Ee]=new RegExp(i[Ee],"g");var se="$1^",We=c++;i[We]="^"+i[Q]+i[_e]+"$";var rt=c++;i[rt]="^"+i[Q]+i[De]+"$";var $=c++;i[$]="^"+i[q]+"\\s*("+j+")$|^$";var ee=c++;i[ee]="^"+i[q]+"\\s*("+M+")$|^$";var re=c++;i[re]="(\\s*)"+i[q]+"\\s*("+j+"|"+i[_e]+")",o[re]=new RegExp(i[re],"g");var ve="$1$2$3",Ve=c++;i[Ve]="^\\s*("+i[_e]+")\\s+-\\s+("+i[_e]+")\\s*$";var Ae=c++;i[Ae]="^\\s*("+i[De]+")\\s+-\\s+("+i[De]+")\\s*$";var Ne=c++;for(i[Ne]="(<|>)?=?\\s*\\*",Xe=0;Xe<c;Xe++)t(Xe,i[Xe]),o[Xe]||(o[Xe]=new RegExp(i[Xe]));var Xe;e.parse=Ot;function Ot(f,y){if((!y||typeof y!="object")&&(y={loose:!!y,includePrerelease:!1}),f instanceof ce)return f;if(typeof f!="string"||f.length>r)return null;var S=y.loose?o[G]:o[A];if(!S.test(f))return null;try{return new ce(f,y)}catch{return null}}e.valid=Sr;function Sr(f,y){var S=Ot(f,y);return S?S.version:null}e.clean=mr;function mr(f,y){var S=Ot(f.trim().replace(/^[=v]+/,""),y);return S?S.version:null}e.SemVer=ce;function ce(f,y){if((!y||typeof y!="object")&&(y={loose:!!y,includePrerelease:!1}),f instanceof ce){if(f.loose===y.loose)return f;f=f.version}else if(typeof f!="string")throw new TypeError("Invalid Version: "+f);if(f.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof ce))return new ce(f,y);t("SemVer",f,y),this.options=y,this.loose=!!y.loose;var S=f.trim().match(y.loose?o[G]:o[A]);if(!S)throw new TypeError("Invalid Version: "+f);if(this.raw=f,this.major=+S[1],this.minor=+S[2],this.patch=+S[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");S[4]?this.prerelease=S[4].split(".").map(function(C){if(/^[0-9]+$/.test(C)){var D=+C;if(D>=0&&D<s)return D}return C}):this.prerelease=[],this.build=S[5]?S[5].split("."):[],this.format()}ce.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},ce.prototype.toString=function(){return this.version},ce.prototype.compare=function(f){return t("SemVer.compare",this.version,this.options,f),f instanceof ce||(f=new ce(f,this.options)),this.compareMain(f)||this.comparePre(f)},ce.prototype.compareMain=function(f){return f instanceof ce||(f=new ce(f,this.options)),Ft(this.major,f.major)||Ft(this.minor,f.minor)||Ft(this.patch,f.patch)},ce.prototype.comparePre=function(f){if(f instanceof ce||(f=new ce(f,this.options)),this.prerelease.length&&!f.prerelease.length)return-1;if(!this.prerelease.length&&f.prerelease.length)return 1;if(!this.prerelease.length&&!f.prerelease.length)return 0;var y=0;do{var S=this.prerelease[y],C=f.prerelease[y];if(t("prerelease compare",y,S,C),S===void 0&&C===void 0)return 0;if(C===void 0)return 1;if(S===void 0)return-1;if(S!==C)return Ft(S,C)}while(++y)},ce.prototype.inc=function(f,y){switch(f){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",y);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",y);break;case"prepatch":this.prerelease.length=0,this.inc("patch",y),this.inc("pre",y);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",y),this.inc("pre",y);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var S=this.prerelease.length;--S>=0;)typeof this.prerelease[S]=="number"&&(this.prerelease[S]++,S=-2);S===-1&&this.prerelease.push(0)}y&&(this.prerelease[0]===y?isNaN(this.prerelease[1])&&(this.prerelease=[y,0]):this.prerelease=[y,0]);break;default:throw new Error("invalid increment argument: "+f)}return this.format(),this.raw=this.version,this},e.inc=Tr;function Tr(f,y,S,C){typeof S=="string"&&(C=S,S=void 0);try{return new ce(f,S).inc(y,C).version}catch{return null}}e.diff=nr;function nr(f,y){if(Tt(f,y))return null;var S=Ot(f),C=Ot(y),D="";if(S.prerelease.length||C.prerelease.length){D="pre";var k="prerelease"}for(var L in S)if((L==="major"||L==="minor"||L==="patch")&&S[L]!==C[L])return D+L;return k}e.compareIdentifiers=Ft;var Wt=/^[0-9]+$/;function Ft(f,y){var S=Wt.test(f),C=Wt.test(y);return S&&C&&(f=+f,y=+y),f===y?0:S&&!C?-1:C&&!S?1:f<y?-1:1}e.rcompareIdentifiers=sr;function sr(f,y){return Ft(y,f)}e.major=ir;function ir(f,y){return new ce(f,y).major}e.minor=wr;function wr(f,y){return new ce(f,y).minor}e.patch=ie;function ie(f,y){return new ce(f,y).patch}e.compare=K;function K(f,y,S){return new ce(f,S).compare(new ce(y,S))}e.compareLoose=xe;function xe(f,y){return K(f,y,!0)}e.rcompare=Te;function Te(f,y,S){return K(y,f,S)}e.sort=vt;function vt(f,y){return f.sort(function(S,C){return e.compare(S,C,y)})}e.rsort=Ke;function Ke(f,y){return f.sort(function(S,C){return e.rcompare(S,C,y)})}e.gt=Fe;function Fe(f,y,S){return K(f,y,S)>0}e.lt=$e;function $e(f,y,S){return K(f,y,S)<0}e.eq=Tt;function Tt(f,y,S){return K(f,y,S)===0}e.neq=wt;function wt(f,y,S){return K(f,y,S)!==0}e.gte=Oe;function Oe(f,y,S){return K(f,y,S)>=0}e.lte=Ye;function Ye(f,y,S){return K(f,y,S)<=0}e.cmp=ae;function ae(f,y,S,C){switch(y){case"===":return typeof f=="object"&&(f=f.version),typeof S=="object"&&(S=S.version),f===S;case"!==":return typeof f=="object"&&(f=f.version),typeof S=="object"&&(S=S.version),f!==S;case"":case"=":case"==":return Tt(f,S,C);case"!=":return wt(f,S,C);case">":return Fe(f,S,C);case">=":return Oe(f,S,C);case"<":return $e(f,S,C);case"<=":return Ye(f,S,C);default:throw new TypeError("Invalid operator: "+y)}}e.Comparator=Ie;function Ie(f,y){if((!y||typeof y!="object")&&(y={loose:!!y,includePrerelease:!1}),f instanceof Ie){if(f.loose===!!y.loose)return f;f=f.value}if(!(this instanceof Ie))return new Ie(f,y);t("comparator",f,y),this.options=y,this.loose=!!y.loose,this.parse(f),this.semver===Le?this.value="":this.value=this.operator+this.semver.version,t("comp",this)}var Le={};Ie.prototype.parse=function(f){var y=this.options.loose?o[$]:o[ee],S=f.match(y);if(!S)throw new TypeError("Invalid comparator: "+f);this.operator=S[1],this.operator==="="&&(this.operator=""),S[2]?this.semver=new ce(S[2],this.options.loose):this.semver=Le},Ie.prototype.toString=function(){return this.value},Ie.prototype.test=function(f){return t("Comparator.test",f,this.options.loose),this.semver===Le?!0:(typeof f=="string"&&(f=new ce(f,this.options)),ae(f,this.operator,this.semver,this.options))},Ie.prototype.intersects=function(f,y){if(!(f instanceof Ie))throw new TypeError("a Comparator is required");(!y||typeof y!="object")&&(y={loose:!!y,includePrerelease:!1});var S;if(this.operator==="")return S=new he(f.value,y),pe(this.value,S,y);if(f.operator==="")return S=new he(this.value,y),pe(f.semver,S,y);var C=(this.operator===">="||this.operator===">")&&(f.operator===">="||f.operator===">"),D=(this.operator==="<="||this.operator==="<")&&(f.operator==="<="||f.operator==="<"),k=this.semver.version===f.semver.version,L=(this.operator===">="||this.operator==="<=")&&(f.operator===">="||f.operator==="<="),X=ae(this.semver,"<",f.semver,y)&&(this.operator===">="||this.operator===">")&&(f.operator==="<="||f.operator==="<"),te=ae(this.semver,">",f.semver,y)&&(this.operator==="<="||this.operator==="<")&&(f.operator===">="||f.operator===">");return C||D||k&&L||X||te},e.Range=he;function he(f,y){if((!y||typeof y!="object")&&(y={loose:!!y,includePrerelease:!1}),f instanceof he)return f.loose===!!y.loose&&f.includePrerelease===!!y.includePrerelease?f:new he(f.raw,y);if(f instanceof Ie)return new he(f.value,y);if(!(this instanceof he))return new he(f,y);if(this.options=y,this.loose=!!y.loose,this.includePrerelease=!!y.includePrerelease,this.raw=f,this.set=f.split(/\s*\|\|\s*/).map(function(S){return this.parseRange(S.trim())},this).filter(function(S){return S.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+f);this.format()}he.prototype.format=function(){return this.range=this.set.map(function(f){return f.join(" ").trim()}).join("||").trim(),this.range},he.prototype.toString=function(){return this.range},he.prototype.parseRange=function(f){var y=this.options.loose;f=f.trim();var S=y?o[Ae]:o[Ve];f=f.replace(S,et),t("hyphen replace",f),f=f.replace(o[re],ve),t("comparator trim",f,o[re]),f=f.replace(o[oe],ge),f=f.replace(o[Ee],se),f=f.split(/\s+/).join(" ");var C=y?o[$]:o[ee],D=f.split(" ").map(function(k){return Bt(k,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(D=D.filter(function(k){return!!k.match(C)})),D=D.map(function(k){return new Ie(k,this.options)},this),D},he.prototype.intersects=function(f,y){if(!(f instanceof he))throw new TypeError("a Range is required");return this.set.some(function(S){return S.every(function(C){return f.set.some(function(D){return D.every(function(k){return C.intersects(k,y)})})})})},e.toComparators=ut;function ut(f,y){return new he(f,y).set.map(function(S){return S.map(function(C){return C.value}).join(" ").trim().split(" ")})}function Bt(f,y){return t("comp",f,y),f=Ir(f,y),t("caret",f),f=Kt(f,y),t("tildes",f),f=je(f,y),t("xrange",f),f=Z(f,y),t("stars",f),f}function Ze(f){return!f||f.toLowerCase()==="x"||f==="*"}function Kt(f,y){return f.trim().split(/\s+/).map(function(S){return gr(S,y)}).join(" ")}function gr(f,y){var S=y.loose?o[Ue]:o[le];return f.replace(S,function(C,D,k,L,X){t("tilde",f,C,D,k,L,X);var te;return Ze(D)?te="":Ze(k)?te=">="+D+".0.0 <"+(+D+1)+".0.0":Ze(L)?te=">="+D+"."+k+".0 <"+D+"."+(+k+1)+".0":X?(t("replaceTilde pr",X),te=">="+D+"."+k+"."+L+"-"+X+" <"+D+"."+(+k+1)+".0"):te=">="+D+"."+k+"."+L+" <"+D+"."+(+k+1)+".0",t("tilde return",te),te})}function Ir(f,y){return f.trim().split(/\s+/).map(function(S){return Me(S,y)}).join(" ")}function Me(f,y){t("caret",f,y);var S=y.loose?o[rt]:o[We];return f.replace(S,function(C,D,k,L,X){t("caret",f,C,D,k,L,X);var te;return Ze(D)?te="":Ze(k)?te=">="+D+".0.0 <"+(+D+1)+".0.0":Ze(L)?D==="0"?te=">="+D+"."+k+".0 <"+D+"."+(+k+1)+".0":te=">="+D+"."+k+".0 <"+(+D+1)+".0.0":X?(t("replaceCaret pr",X),D==="0"?k==="0"?te=">="+D+"."+k+"."+L+"-"+X+" <"+D+"."+k+"."+(+L+1):te=">="+D+"."+k+"."+L+"-"+X+" <"+D+"."+(+k+1)+".0":te=">="+D+"."+k+"."+L+"-"+X+" <"+(+D+1)+".0.0"):(t("no pr"),D==="0"?k==="0"?te=">="+D+"."+k+"."+L+" <"+D+"."+k+"."+(+L+1):te=">="+D+"."+k+"."+L+" <"+D+"."+(+k+1)+".0":te=">="+D+"."+k+"."+L+" <"+(+D+1)+".0.0"),t("caret return",te),te})}function je(f,y){return t("replaceXRanges",f,y),f.split(/\s+/).map(function(S){return Se(S,y)}).join(" ")}function Se(f,y){f=f.trim();var S=y.loose?o[ot]:o[ct];return f.replace(S,function(C,D,k,L,X,te){t("xRange",f,C,D,k,L,X,te);var He=Ze(k),dt=He||Ze(L),Be=dt||Ze(X),it=Be;return D==="="&&it&&(D=""),He?D===">"||D==="<"?C="<0.0.0":C="*":D&&it?(dt&&(L=0),X=0,D===">"?(D=">=",dt?(k=+k+1,L=0,X=0):(L=+L+1,X=0)):D==="<="&&(D="<",dt?k=+k+1:L=+L+1),C=D+k+"."+L+"."+X):dt?C=">="+k+".0.0 <"+(+k+1)+".0.0":Be&&(C=">="+k+"."+L+".0 <"+k+"."+(+L+1)+".0"),t("xRange return",C),C})}function Z(f,y){return t("replaceStars",f,y),f.trim().replace(o[Ne],"")}function et(f,y,S,C,D,k,L,X,te,He,dt,Be,it){return Ze(S)?y="":Ze(C)?y=">="+S+".0.0":Ze(D)?y=">="+S+"."+C+".0":y=">="+y,Ze(te)?X="":Ze(He)?X="<"+(+te+1)+".0.0":Ze(dt)?X="<"+te+"."+(+He+1)+".0":Be?X="<="+te+"."+He+"."+dt+"-"+Be:X="<="+X,(y+" "+X).trim()}he.prototype.test=function(f){if(!f)return!1;typeof f=="string"&&(f=new ce(f,this.options));for(var y=0;y<this.set.length;y++)if(ze(this.set[y],f,this.options))return!0;return!1};function ze(f,y,S){for(var C=0;C<f.length;C++)if(!f[C].test(y))return!1;if(y.prerelease.length&&!S.includePrerelease){for(C=0;C<f.length;C++)if(t(f[C].semver),f[C].semver!==Le&&f[C].semver.prerelease.length>0){var D=f[C].semver;if(D.major===y.major&&D.minor===y.minor&&D.patch===y.patch)return!0}return!1}return!0}e.satisfies=pe;function pe(f,y,S){try{y=new he(y,S)}catch{return!1}return y.test(f)}e.maxSatisfying=mt;function mt(f,y,S){var C=null,D=null;try{var k=new he(y,S)}catch{return null}return f.forEach(function(L){k.test(L)&&(!C||D.compare(L)===-1)&&(C=L,D=new ce(C,S))}),C}e.minSatisfying=bt;function bt(f,y,S){var C=null,D=null;try{var k=new he(y,S)}catch{return null}return f.forEach(function(L){k.test(L)&&(!C||D.compare(L)===1)&&(C=L,D=new ce(C,S))}),C}e.minVersion=Ct;function Ct(f,y){f=new he(f,y);var S=new ce("0.0.0");if(f.test(S)||(S=new ce("0.0.0-0"),f.test(S)))return S;S=null;for(var C=0;C<f.set.length;++C){var D=f.set[C];D.forEach(function(k){var L=new ce(k.semver.version);switch(k.operator){case">":L.prerelease.length===0?L.patch++:L.prerelease.push(0),L.raw=L.format();case"":case">=":(!S||Fe(S,L))&&(S=L);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+k.operator)}})}return S&&f.test(S)?S:null}e.validRange=Vt;function Vt(f,y){try{return new he(f,y).range||"*"}catch{return null}}e.ltr=$t;function $t(f,y,S){return nt(f,y,"<",S)}e.gtr=Ht;function Ht(f,y,S){return nt(f,y,">",S)}e.outside=nt;function nt(f,y,S,C){f=new ce(f,C),y=new he(y,C);var D,k,L,X,te;switch(S){case">":D=Fe,k=Ye,L=$e,X=">",te=">=";break;case"<":D=$e,k=Oe,L=Fe,X="<",te="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(pe(f,y,C))return!1;for(var He=0;He<y.set.length;++He){var dt=y.set[He],Be=null,it=null;if(dt.forEach(function(pt){pt.semver===Le&&(pt=new Ie(">=0.0.0")),Be=Be||pt,it=it||pt,D(pt.semver,Be.semver,C)?Be=pt:L(pt.semver,it.semver,C)&&(it=pt)}),Be.operator===X||Be.operator===te||(!it.operator||it.operator===X)&&k(f,it.semver)||it.operator===te&&L(f,it.semver))return!1}return!0}e.prerelease=Dt;function Dt(f,y){var S=Ot(f,y);return S&&S.prerelease.length?S.prerelease:null}e.intersects=lt;function lt(f,y,S){return f=new he(f,S),y=new he(y,S),f.intersects(y)}e.coerce=gt;function gt(f){if(f instanceof ce)return f;if(typeof f!="string")return null;var y=f.match(o[xt]);return y==null?null:Ot(y[1]+"."+(y[2]||"0")+"."+(y[3]||"0"))}}),lm=x((e,n)=>{var t=ss().wrap,r=1,s=2,a=4,o=8,i=[],c=0,l=!1,d=[],u,p;function v(G,q){var Y=G.length,ne=q.length,_e=[];if(Y===0&&ne===0)return _e;for(var De=0;De<Y;De++)_e[De]=G[De];if(ne===0)return _e;for(var ct=0;ct<ne;ct++){var ot=!0;for(De=0;De<Y;De++)if(G[De].uid===q[ct].uid){ot=!1;break}ot&&_e.push(q[ct])}return _e}process._fatalException?(m=!1,u=function(G){var q=i.length;if(m||q===0)return!1;var Y=!1;m=!0;for(var ne=0;ne<q;++ne){var _e=i[ne];if(_e.flags&o){var De=g&&g[_e.uid];Y=_e.error(De,G)||Y}}return m=!1,d.length>0&&(i=d.pop()),g=void 0,Y&&!l},p=function(G,q,Y){var ne=[];l=!0;for(var _e=0;_e<Y;++_e){var De=q[_e];if(ne[De.uid]=De.data,(De.flags&r)!==0){var ct=De.create(De.data);ct!==void 0&&(ne[De.uid]=ct)}}return l=!1,function(){g=ne,d.push(i),i=v(q,i),l=!0;for(var ot=0;ot<Y;++ot)(q[ot].flags&s)>0&&q[ot].before(this,ne[q[ot].uid]);l=!1;var xt=G.apply(this,arguments);for(l=!0,ot=0;ot<Y;++ot)(q[ot].flags&a)>0&&q[ot].after(this,ne[q[ot].uid]);return l=!1,i=d.pop(),g=void 0,xt}},t(process,"_fatalException",function(G){return function(q){return u(q)||G(q)}})):(E=!1,u=function(G){if(E)throw G;for(var q=!1,Y=i.length,ne=0;ne<Y;++ne){var _e=i[ne];_e.flags&o&&(q=_e.error(null,G)||q)}if(!q&&l)throw G},p=function(G,q,Y){var ne=[];l=!0;for(var _e=0;_e<Y;++_e){var De=q[_e];if(ne[De.uid]=De.data,(De.flags&r)!==0){var ct=De.create(De.data);ct!==void 0&&(ne[De.uid]=ct)}}return l=!1,function(){var ot=!1,xt=!1;d.push(i),i=v(q,i),l=!0;for(var at=0;at<Y;++at)(q[at].flags&s)>0&&q[at].before(this,ne[q[at].uid]);l=!1;var oe;try{oe=G.apply(this,arguments)}catch(ge){ot=!0;for(var at=0;at<Y;++at)if(i[at].flags&o)try{xt=i[at].error(ne[q[at].uid],ge)||xt}catch(Ue){throw E=!0,Ue}if(!xt)throw process.removeListener("uncaughtException",u),process._originalNextTick(function(){process.addListener("uncaughtException",u)}),ge}finally{if(!ot||xt){for(l=!0,at=0;at<Y;++at)(q[at].flags&a)>0&&q[at].after(this,ne[q[at].uid]);l=!1}i=d.pop()}return oe}},process.addListener("uncaughtException",u));var m,g,E;function T(G,q,Y){l=!0;for(var ne=0;ne<Y;++ne){var _e=q[ne];_e.create&&_e.create(_e.data)}return l=!1,function(){d.push(i),i=v(q,i);var De=G.apply(this,arguments);return i=d.pop(),De}}function O(G){var q=i.length;if(q===0)return G;for(var Y=i.slice(),ne=0;ne<q;++ne)if(Y[ne].flags>0)return p(G,Y,q);return T(G,Y,q)}function P(G,q){typeof G.create=="function"&&(this.create=G.create,this.flags|=r),typeof G.before=="function"&&(this.before=G.before,this.flags|=s),typeof G.after=="function"&&(this.after=G.after,this.flags|=a),typeof G.error=="function"&&(this.error=G.error,this.flags|=o),this.uid=++c,this.data=q===void 0?null:q}P.prototype.create=void 0,P.prototype.before=void 0,P.prototype.after=void 0,P.prototype.error=void 0,P.prototype.data=void 0,P.prototype.uid=0,P.prototype.flags=0;function A(G,q){if(typeof G!="object"||!G)throw new TypeError("callbacks argument must be an object");return G instanceof P?G:new P(G,q)}function M(G,q){var Y;G instanceof P?Y=G:Y=A(G,q);for(var ne=!1,_e=0;_e<i.length;_e++)if(Y===i[_e]){ne=!0;break}return ne||i.push(Y),Y}function j(G){for(var q=0;q<i.length;q++)if(G===i[q]){i.splice(q,1);break}}process.createAsyncListener=A,process.addAsyncListener=M,process.removeAsyncListener=j,n.exports=O}),dm=x((e,n)=>{"use strict";n.exports=(t,r)=>class extends t{constructor(s){var a,o;super(c);var i=this;try{s.apply(a,o)}catch(l){o[1](l)}return i;function c(l,d){a=this,o=[u,p];function u(v){return r(i,!1),l(v)}function p(v){return r(i,!1),d(v)}}}}}),fm=x(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var e=ss(),n=um(),t=e.wrap,r=e.massWrap,s=lm(),a=require("util"),o=n.gte(process.version,"6.0.0"),i=n.gte(process.version,"7.0.0"),c=n.gte(process.version,"8.0.0"),l=n.gte(process.version,"11.0.0"),d=require("net");i&&!d._normalizeArgs?d._normalizeArgs=function(oe){if(oe.length===0)return[{},null];var ge=oe[0],le={};typeof ge=="object"&&ge!==null?le=ge:at(ge)?le.path=ge:(le.port=ge,oe.length>1&&typeof oe[1]=="string"&&(le.host=oe[1]));var Ue=oe[oe.length-1];return typeof Ue!="function"?[le,null]:[le,Ue]}:!i&&!d._normalizeConnectArgs&&(d._normalizeConnectArgs=function(oe){var ge={};function le(Q){return(Q=Number(Q))>=0?Q:!1}typeof oe[0]=="object"&&oe[0]!==null?ge=oe[0]:typeof oe[0]=="string"&&le(oe[0])===!1?ge.path=oe[0]:(ge.port=oe[0],typeof oe[1]=="string"&&(ge.host=oe[1]));var Ue=oe[oe.length-1];return typeof Ue=="function"?[ge,Ue]:[ge]}),"_setUpListenHandle"in d.Server.prototype?t(d.Server.prototype,"_setUpListenHandle",u):t(d.Server.prototype,"_listen2",u);function u(oe){return function(){this.on("connection",function(ge){ge._handle&&(ge._handle.onread=s(ge._handle.onread))});try{return oe.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=s(this._handle.onconnection))}}}function p(oe){if(oe&&oe._handle){var ge=oe._handle;ge._originalOnread||(ge._originalOnread=ge.onread),ge.onread=s(ge._originalOnread)}}t(d.Socket.prototype,"connect",function(oe){return function(){var ge;c&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?ge=arguments[0]:ge=i?d._normalizeArgs(arguments):d._normalizeConnectArgs(arguments),ge[1]&&(ge[1]=s(ge[1]));var le=oe.apply(this,ge);return p(this),le}});var v=require("http");t(v.Agent.prototype,"addRequest",function(oe){return function(ge){var le=ge.onSocket;return ge.onSocket=s(function(Ue){return p(Ue),le.apply(this,arguments)}),oe.apply(this,arguments)}});var m=require("child_process");function g(oe){Array.isArray(oe.stdio)&&oe.stdio.forEach(function(ge){ge&&ge._handle&&(ge._handle.onread=s(ge._handle.onread),t(ge._handle,"close",ot))}),oe._handle&&(oe._handle.onexit=s(oe._handle.onexit))}m.ChildProcess?t(m.ChildProcess.prototype,"spawn",function(oe){return function(){var ge=oe.apply(this,arguments);return g(this),ge}}):r(m,["execFile","fork","spawn"],function(oe){return function(){var ge=oe.apply(this,arguments);return g(ge),ge}}),process._fatalException||(process._originalNextTick=process.nextTick);var E=[];process._nextDomainTick&&E.push("_nextDomainTick"),process._tickDomainCallback&&E.push("_tickDomainCallback"),r(process,E,ct),t(process,"nextTick",ot);var T=["setTimeout","setInterval"];global.setImmediate&&T.push("setImmediate");var O=require("timers"),P=global.setTimeout===O.setTimeout;r(O,T,ot),P&&r(global,T,ot);var A=require("dns");r(A,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],ct),A.resolveNaptr&&t(A,"resolveNaptr",ct);var M=require("fs");r(M,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],ct),M.lchown&&t(M,"lchown",ct),M.lchmod&&t(M,"lchmod",ct),M.ftruncate&&t(M,"ftruncate",ct);var j;try{j=require("zlib")}catch{}j&&j.Deflate&&j.Deflate.prototype&&(G=Object.getPrototypeOf(j.Deflate.prototype),G._transform?t(G,"_transform",ct):G.write&&G.flush&&G.end&&r(G,["write","flush","end"],ct));var G,q;try{q=require("crypto")}catch{}q&&(Y=["pbkdf2","randomBytes"],l||Y.push("pseudoRandomBytes"),r(q,Y,ct));var Y,ne=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";ne&&(_e=process.addAsyncListener({create:function(){ne=!1}}),global.Promise.resolve(!0).then(function(){ne=!1}),process.removeAsyncListener(_e));var _e;ne&&De();function De(){var oe=global.Promise;function ge(se){if(!(this instanceof ge))return oe(se);if(typeof se!="function")return new oe(se);var We,rt,$=new oe(ee);$.__proto__=ge.prototype;try{se.apply(We,rt)}catch(re){rt[1](re)}return $;function ee(re,ve){We=this,rt=[Ve,Ae];function Ve(Ne){return Ue($,!1),re(Ne)}function Ae(Ne){return Ue($,!1),ve(Ne)}}}if(a.inherits(ge,oe),t(oe.prototype,"then",Ee),oe.prototype.chain&&t(oe.prototype,"chain",Ee),o)global.Promise=dm()(oe,Ue);else{var le=["all","race","reject","resolve","accept","defer"];le.forEach(function(se){typeof oe[se]=="function"&&(ge[se]=oe[se])}),global.Promise=ge}function Ue(se,We){(!se.__asl_wrapper||We)&&(se.__asl_wrapper=s(Q))}function Q(se,We,rt,$){var ee;try{return ee=We.call(se,rt),{returnVal:ee,error:!1}}catch(re){return{errorVal:re,error:!0}}finally{ee instanceof oe?$.__asl_wrapper=function(){var re=ee.__asl_wrapper||Q;return re.apply(this,arguments)}:Ue($,!0)}}function Ee(se){return function(){var We=this,rt=se.apply(We,Array.prototype.map.call(arguments,$));return rt.__asl_wrapper=function(ee,re,ve,Ve){return We.__asl_wrapper?(We.__asl_wrapper(ee,function(){},null,rt),rt.__asl_wrapper(ee,re,ve,Ve)):Q(ee,re,ve,Ve)},rt;function $(ee){return typeof ee!="function"?ee:s(function(re){var ve=(We.__asl_wrapper||Q)(this,ee,re,rt);if(ve.error)throw ve.errorVal;return ve.returnVal})}}}}function ct(oe){var ge=function(){var le,Ue=arguments.length-1;if(typeof arguments[Ue]=="function"){le=Array(arguments.length);for(var Q=0;Q<arguments.length-1;Q++)le[Q]=arguments[Q];le[Ue]=s(arguments[Ue])}return oe.apply(this,le||arguments)};switch(oe.length){case 1:return function(le){return arguments.length!==1?ge.apply(this,arguments):(typeof le=="function"&&(le=s(le)),oe.call(this,le))};case 2:return function(le,Ue){return arguments.length!==2?ge.apply(this,arguments):(typeof Ue=="function"&&(Ue=s(Ue)),oe.call(this,le,Ue))};case 3:return function(le,Ue,Q){return arguments.length!==3?ge.apply(this,arguments):(typeof Q=="function"&&(Q=s(Q)),oe.call(this,le,Ue,Q))};case 4:return function(le,Ue,Q,Ee){return arguments.length!==4?ge.apply(this,arguments):(typeof Ee=="function"&&(Ee=s(Ee)),oe.call(this,le,Ue,Q,Ee))};case 5:return function(le,Ue,Q,Ee,se){return arguments.length!==5?ge.apply(this,arguments):(typeof se=="function"&&(se=s(se)),oe.call(this,le,Ue,Q,Ee,se))};case 6:return function(le,Ue,Q,Ee,se,We){return arguments.length!==6?ge.apply(this,arguments):(typeof We=="function"&&(We=s(We)),oe.call(this,le,Ue,Q,Ee,se,We))};default:return ge}}function ot(oe){var ge=function(){var le;if(typeof arguments[0]=="function"){le=Array(arguments.length),le[0]=s(arguments[0]);for(var Ue=1;Ue<arguments.length;Ue++)le[Ue]=arguments[Ue]}return oe.apply(this,le||arguments)};switch(oe.length){case 1:return function(le){return arguments.length!==1?ge.apply(this,arguments):(typeof le=="function"&&(le=s(le)),oe.call(this,le))};case 2:return function(le,Ue){return arguments.length!==2?ge.apply(this,arguments):(typeof le=="function"&&(le=s(le)),oe.call(this,le,Ue))};case 3:return function(le,Ue,Q){return arguments.length!==3?ge.apply(this,arguments):(typeof le=="function"&&(le=s(le)),oe.call(this,le,Ue,Q))};case 4:return function(le,Ue,Q,Ee){return arguments.length!==4?ge.apply(this,arguments):(typeof le=="function"&&(le=s(le)),oe.call(this,le,Ue,Q,Ee))};case 5:return function(le,Ue,Q,Ee,se){return arguments.length!==5?ge.apply(this,arguments):(typeof le=="function"&&(le=s(le)),oe.call(this,le,Ue,Q,Ee,se))};case 6:return function(le,Ue,Q,Ee,se,We){return arguments.length!==6?ge.apply(this,arguments):(typeof le=="function"&&(le=s(le)),oe.call(this,le,Ue,Q,Ee,se,We))};default:return ge}}function xt(oe){return(oe=Number(oe))>=0?oe:!1}function at(oe){return typeof oe=="string"&&xt(oe)===!1}}),pm=x((e,n)=>{"use strict";var t=require("assert"),r=cs(),s="cls@contexts",a="error@context";process.addAsyncListener||fm();function o(u){this.name=u,this.active=null,this._set=[],this.id=null}o.prototype.set=function(u,p){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[u]=p,p},o.prototype.get=function(u){if(this.active)return this.active[u]},o.prototype.createContext=function(){return Object.create(this.active)},o.prototype.run=function(u){var p=this.createContext();this.enter(p);try{return u(p),p}catch(v){throw v&&(v[a]=p),v}finally{this.exit(p)}},o.prototype.runAndReturn=function(u){var p;return this.run(function(v){p=u(v)}),p},o.prototype.bind=function(u,p){p||(this.active?p=this.active:p=this.createContext());var v=this;return function(){v.enter(p);try{return u.apply(this,arguments)}catch(m){throw m&&(m[a]=p),m}finally{v.exit(p)}}},o.prototype.enter=function(u){t.ok(u,"context must be provided for entering"),this._set.push(this.active),this.active=u},o.prototype.exit=function(u){if(t.ok(u,"context must be provided for exiting"),this.active===u){t.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var p=this._set.lastIndexOf(u);t.ok(p>=0,"context not currently entered; can't exit"),t.ok(p,"can't remove top context"),this._set.splice(p,1)},o.prototype.bindEmitter=function(u){t.ok(u.on&&u.addListener&&u.emit,"can only bind real EEs");var p=this,v="context@"+this.name;function m(E){!E||(E[s]||(E[s]=Object.create(null)),E[s][v]={namespace:p,context:p.active})}function g(E){if(!(E&&E[s]))return E;var T=E,O=E[s];return Object.keys(O).forEach(function(P){var A=O[P];T=A.namespace.bind(T,A.context)}),T}r(u,m,g)},o.prototype.fromException=function(u){return u[a]};function i(u){return process.namespaces[u]}function c(u){t.ok(u,"namespace must be given a name!");var p=new o(u);return p.id=process.addAsyncListener({create:function(){return p.active},before:function(v,m){m&&p.enter(m)},after:function(v,m){m&&p.exit(m)},error:function(v){v&&p.exit(v)}}),process.namespaces[u]=p,p}function l(u){var p=i(u);t.ok(p,"can't delete nonexistent namespace!"),t.ok(p.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(p.id),process.namespaces[u]=null}function d(){process.namespaces&&Object.keys(process.namespaces).forEach(function(u){l(u)}),process.namespaces=Object.create(null)}process.namespaces||d(),n.exports={getNamespace:i,createNamespace:c,destroyNamespace:l,reset:d}}),Zn=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CorrelationContextManager=void 0;var n=br(),t=as(),r=po(),s=Tl(),a=Cl(),o=function(){function c(){}return c.getCurrentContext=function(){if(!c.enabled)return null;var l=c.session.get(c.CONTEXT_NAME);return l===void 0?null:l},c.generateContextObject=function(l,d,u,p,v,m){return d=d||l,this.enabled?{operation:{name:u,id:l,parentId:d,traceparent:v,tracestate:m},customProperties:new i(p)}:null},c.spanToContextObject=function(l,d,u){var p=new r;return p.traceId=l.traceId,p.spanId=l.spanId,p.traceFlag=r.formatOpenTelemetryTraceFlags(l.traceFlags)||r.DEFAULT_TRACE_FLAG,p.parentId=d,c.generateContextObject(p.traceId,p.parentId,u,null,p)},c.runWithContext=function(l,d){var u;return c.enabled?c.session.bind(d,(u={},u[c.CONTEXT_NAME]=l,u))():d()},c.wrapEmitter=function(l){c.enabled&&c.session.bindEmitter(l)},c.wrapCallback=function(l,d){var u;return c.enabled?c.session.bind(l,d?(u={},u[c.CONTEXT_NAME]=d,u):void 0):l},c.enable=function(l){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}c.hasEverEnabled||(this.forceClsHooked=l,this.hasEverEnabled=!0,typeof this.cls>"u"&&(c.forceClsHooked===!0||c.forceClsHooked===void 0&&c.shouldUseClsHooked()?this.cls=cm():this.cls=pm()),c.session=this.cls.createNamespace("AI-CLS-Session"),t.registerContextPreservation(function(d){return c.session.bind(d)})),this.enabled=!0}},c.startOperation=function(l,d){var u=l&&l.traceContext||null,p=l&&l.traceId?l:null,v=l&&l.headers;if(p){var m=new r("00-"+p.traceId+"-"+p.spanId+"-01"),g=new s(p.traceState?p.traceState.serialize():null),E=c.generateContextObject(p.traceId,"|"+p.traceId+"."+p.spanId+".",typeof d=="string"?d:"",void 0,m,g);return E}if(u){var m=new r(u.traceparent),g=new s(u.tracestate),T=typeof d=="object"?new a(d):null,E=c.generateContextObject(m.traceId,m.parentId,typeof d=="string"?d:T.getOperationName({}),T&&T.getCorrelationContextHeader()||void 0,m,g);return E}if(v){var m=new r(v.traceparent?v.traceparent.toString():null),g=new s(v.tracestate?v.tracestate.toString():null),T=new a(l),E=c.generateContextObject(m.traceId,m.parentId,T.getOperationName({}),T.getCorrelationContextHeader(),m,g);return E}return n.warn("startOperation was called with invalid arguments",arguments),null},c.disable=function(){this.enabled=!1},c.reset=function(){c.hasEverEnabled&&(c.session=null,c.session=this.cls.createNamespace("AI-CLS-Session"))},c.isNodeVersionCompatible=function(){var l=process.versions.node.split(".");return parseInt(l[0])>3||parseInt(l[0])>2&&parseInt(l[1])>2},c.shouldUseClsHooked=function(){var l=process.versions.node.split(".");return parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=2},c.canUseClsHooked=function(){var l=process.versions.node.split("."),d=parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=0,u=parseInt(l[0])<8||parseInt(l[0])<=8&&parseInt(l[1])<2,p=parseInt(l[0])>4||parseInt(l[0])>=4&&parseInt(l[1])>=7;return!(d&&u)&&p},c.enabled=!1,c.hasEverEnabled=!1,c.forceClsHooked=void 0,c.CONTEXT_NAME="ApplicationInsights-Context",c}();e.CorrelationContextManager=o;var i=function(){function c(l){this.props=[],this.addHeaderData(l)}return c.prototype.addHeaderData=function(l){var d=l?l.split(", "):[];this.props=d.map(function(u){var p=u.split("=");return{key:p[0],value:p[1]}}).concat(this.props)},c.prototype.serializeToHeader=function(){return this.props.map(function(l){return l.key+"="+l.value}).join(", ")},c.prototype.getProperty=function(l){for(var d=0;d<this.props.length;++d){var u=this.props[d];if(u.key===l)return u.value}},c.prototype.setProperty=function(l,d){if(c.bannedCharacters.test(l)||c.bannedCharacters.test(d)){n.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+l+" and value: "+d);return}for(var u=0;u<this.props.length;++u){var p=this.props[u];if(p.key===l){p.value=d;return}}this.props.push({key:l,value:d})},c.bannedCharacters=/[,=]/,c}()}),hm=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var n=Fr(),t=dr(),r=[],s=function(i){var c=i.data.message;r.forEach(function(l){c instanceof Error?l.trackException({exception:c}):(c.lastIndexOf(`
`)==c.length-1&&(c=c.substring(0,c.length-1)),l.trackTrace({message:c,severity:i.data.stderr?n.SeverityLevel.Warning:n.SeverityLevel.Information}))})};function a(i,c){i?(r.length===0&&t.channel.subscribe("console",s),r.push(c)):(r=r.filter(function(l){return l!=c}),r.length===0&&t.channel.unsubscribe("console",s))}e.enable=a;function o(){t.channel.unsubscribe("console",s),r=[]}e.dispose=o}),vm=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var n=Fr(),t=dr(),r=[],s={10:n.SeverityLevel.Verbose,20:n.SeverityLevel.Verbose,30:n.SeverityLevel.Information,40:n.SeverityLevel.Warning,50:n.SeverityLevel.Error,60:n.SeverityLevel.Critical},a=function(c){var l=c.data.result;r.forEach(function(d){var u=s[c.data.level];l instanceof Error?d.trackException({exception:l}):d.trackTrace({message:l,severity:u})})};function o(c,l){c?(r.length===0&&t.channel.subscribe("bunyan",a),r.push(l)):(r=r.filter(function(d){return d!=l}),r.length===0&&t.channel.unsubscribe("bunyan",a))}e.enable=o;function i(){t.channel.unsubscribe("bunyan",a),r=[]}e.dispose=i}),mm=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var n=Fr(),t=dr(),r=[],s={syslog:function(c){var l={emerg:n.SeverityLevel.Critical,alert:n.SeverityLevel.Critical,crit:n.SeverityLevel.Critical,error:n.SeverityLevel.Error,warning:n.SeverityLevel.Warning,notice:n.SeverityLevel.Information,info:n.SeverityLevel.Information,debug:n.SeverityLevel.Verbose};return l[c]===void 0?n.SeverityLevel.Information:l[c]},npm:function(c){var l={error:n.SeverityLevel.Error,warn:n.SeverityLevel.Warning,info:n.SeverityLevel.Information,verbose:n.SeverityLevel.Verbose,debug:n.SeverityLevel.Verbose,silly:n.SeverityLevel.Verbose};return l[c]===void 0?n.SeverityLevel.Information:l[c]},unknown:function(c){return n.SeverityLevel.Information}},a=function(c){var l=c.data.message;r.forEach(function(d){if(l instanceof Error)d.trackException({exception:l,properties:c.data.meta});else{var u=s[c.data.levelKind](c.data.level);d.trackTrace({message:l,severity:u,properties:c.data.meta})}})};function o(c,l){c?(r.length===0&&t.channel.subscribe("winston",a),r.push(l)):(r=r.filter(function(d){return d!=l}),r.length===0&&t.channel.unsubscribe("winston",a))}e.enable=o;function i(){t.channel.unsubscribe("winston",a),r=[]}e.dispose=i}),gm=x((e,n)=>{"use strict";var t=as(),r=function(){function s(a){if(s.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=a,s.INSTANCE=this}return s.prototype.enable=function(a,o){t.IsInitialized&&(hm().enable(a&&o,this._client),vm().enable(a,this._client),mm().enable(a,this._client))},s.prototype.isInitialized=function(){return this._isInitialized},s.prototype.dispose=function(){s.INSTANCE=null,this.enable(!1,!1)},s._methodNames=["debug","info","log","warn","error"],s}();n.exports=r}),ym=x((e,n)=>{"use strict";var t=function(){function r(s){if(r.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");r.INSTANCE=this,this._client=s;var a=process.versions.node.split(".");r._canUseUncaughtExceptionMonitor=parseInt(a[0])>13||parseInt(a[0])===13&&parseInt(a[1])>=7}return r.prototype.isInitialized=function(){return this._isInitialized},r.prototype.enable=function(s){var a=this;if(s){this._isInitialized=!0;var o=this;if(!this._exceptionListenerHandle){var i=function(c,l,d){d===void 0&&(d=new Error(r._FALLBACK_ERROR_MESSAGE)),a._client.trackException({exception:d}),a._client.flush({isAppCrashing:!0}),c&&l&&process.listeners(l).length===1&&(console.error(d),process.exit(1))};r._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=i.bind(this,!1,void 0),process.on(r.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=i.bind(this,!0,r.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=i.bind(this,!1,void 0),process.on(r.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(r.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(r._canUseUncaughtExceptionMonitor?process.removeListener(r.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(r.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(r.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},r.prototype.dispose=function(){r.INSTANCE=null,this.enable(!1),this._isInitialized=!1},r.INSTANCE=null,r.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",r.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",r.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",r._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",r._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",r._canUseUncaughtExceptionMonitor=!1,r}();n.exports=t}),wn=x(e=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.HeartBeatMetricName=e.DependencyTypeName=e.SpanAttribute=e.TelemetryTypeStringToQuickPulseDocumentType=e.TelemetryTypeStringToQuickPulseType=e.QuickPulseType=e.QuickPulseDocumentType=e.PerformanceToQuickPulseCounter=e.MetricId=e.PerformanceCounter=e.QuickPulseCounter=e.DEFAULT_LIVEMETRICS_HOST=e.DEFAULT_LIVEMETRICS_ENDPOINT=e.DEFAULT_BREEZE_ENDPOINT=void 0,e.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var t;(function(a){a.COMMITTED_BYTES="\\Memory\\Committed Bytes",a.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",a.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",a.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",a.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",a.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",a.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",a.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",a.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(t=e.QuickPulseCounter||(e.QuickPulseCounter={}));var r;(function(a){a.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",a.AVAILABLE_BYTES="\\Memory\\Available Bytes",a.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",a.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",a.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",a.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(r=e.PerformanceCounter||(e.PerformanceCounter={}));var s;(function(a){a.REQUESTS_DURATION="requests/duration",a.DEPENDENCIES_DURATION="dependencies/duration",a.EXCEPTIONS_COUNT="exceptions/count",a.TRACES_COUNT="traces/count"})(s=e.MetricId||(e.MetricId={})),e.PerformanceToQuickPulseCounter=(n={},n[r.PROCESSOR_TIME]=t.PROCESSOR_TIME,n[r.REQUEST_RATE]=t.REQUEST_RATE,n[r.REQUEST_DURATION]=t.REQUEST_DURATION,n[t.COMMITTED_BYTES]=t.COMMITTED_BYTES,n[t.REQUEST_FAILURE_RATE]=t.REQUEST_FAILURE_RATE,n[t.DEPENDENCY_RATE]=t.DEPENDENCY_RATE,n[t.DEPENDENCY_FAILURE_RATE]=t.DEPENDENCY_FAILURE_RATE,n[t.DEPENDENCY_DURATION]=t.DEPENDENCY_DURATION,n[t.EXCEPTION_RATE]=t.EXCEPTION_RATE,n),e.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},e.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},e.TelemetryTypeStringToQuickPulseType={EventData:e.QuickPulseType.Event,ExceptionData:e.QuickPulseType.Exception,MessageData:e.QuickPulseType.Trace,MetricData:e.QuickPulseType.Metric,RequestData:e.QuickPulseType.Request,RemoteDependencyData:e.QuickPulseType.Dependency,AvailabilityData:e.QuickPulseType.Availability,PageViewData:e.QuickPulseType.PageView},e.TelemetryTypeStringToQuickPulseDocumentType={EventData:e.QuickPulseDocumentType.Event,ExceptionData:e.QuickPulseDocumentType.Exception,MessageData:e.QuickPulseDocumentType.Trace,MetricData:e.QuickPulseDocumentType.Metric,RequestData:e.QuickPulseDocumentType.Request,RemoteDependencyData:e.QuickPulseDocumentType.Dependency,AvailabilityData:e.QuickPulseDocumentType.Availability,PageViewData:e.QuickPulseDocumentType.PageView},e.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},e.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},e.HeartBeatMetricName="HeartBeat"}),us=x((e,n)=>{"use strict";var t=require("os"),r=wn(),s=function(){function a(o,i,c){i===void 0&&(i=6e4),c===void 0&&(c=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,a.INSTANCE||(a.INSTANCE=this),this._isInitialized=!1,this._client=o,this._collectionInterval=i,this._enableLiveMetricsCounters=c}return a.prototype.enable=function(o,i){var c=this;this._isEnabled=o,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),o?this._handle||(this._lastCpus=t.cpus(),this._lastRequests={totalRequestCount:a._totalRequestCount,totalFailedRequestCount:a._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:a._totalDependencyCount,totalFailedDependencyCount:a._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:a._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=i||this._collectionInterval,this._handle=setInterval(function(){return c.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},a.countRequest=function(o,i){var c;if(a.isEnabled()){if(typeof o=="string")c=+new Date("1970-01-01T"+o+"Z");else if(typeof o=="number")c=o;else return;a._intervalRequestExecutionTime+=c,i===!1&&a._totalFailedRequestCount++,a._totalRequestCount++}},a.countException=function(){a._totalExceptionCount++},a.countDependency=function(o,i){var c;if(a.isEnabled()){if(typeof o=="string")c=+new Date("1970-01-01T"+o+"Z");else if(typeof o=="number")c=o;else return;a._intervalDependencyExecutionTime+=c,i===!1&&a._totalFailedDependencyCount++,a._totalDependencyCount++}},a.prototype.isInitialized=function(){return this._isInitialized},a.isEnabled=function(){return a.INSTANCE&&a.INSTANCE._isEnabled},a.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},a.prototype._trackCpu=function(){var o=t.cpus();if(o&&o.length&&this._lastCpus&&o.length===this._lastCpus.length){for(var i=0,c=0,l=0,d=0,u=0,p=0;o&&p<o.length;p++){var v=o[p],m=this._lastCpus[p],g="% cpu("+p+") ",E=v.model,T=v.speed,O=v.times,P=m.times,A=O.user-P.user||0;i+=A;var M=O.sys-P.sys||0;c+=M;var j=O.nice-P.nice||0;l+=j;var G=O.idle-P.idle||0;d+=G;var q=O.irq-P.irq||0;u+=q}var Y=void 0;if(typeof process.cpuUsage=="function"){var ne=process.cpuUsage(),_e=process.hrtime(),De=ne.user-this._lastAppCpuUsage.user+(ne.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var ct=(_e[0]-this._lastHrtime[0])*1e6+(_e[1]-this._lastHrtime[1])/1e3||0;Y=100*De/(ct*o.length)}this._lastAppCpuUsage=ne,this._lastHrtime=_e}var ot=i+c+l+d+u||1;this._client.trackMetric({name:r.PerformanceCounter.PROCESSOR_TIME,value:(ot-d)/ot*100}),this._client.trackMetric({name:r.PerformanceCounter.PROCESS_TIME,value:Y||i/ot*100})}this._lastCpus=o},a.prototype._trackMemory=function(){var o=t.freemem(),i=process.memoryUsage().rss,c=t.totalmem()-o;this._client.trackMetric({name:r.PerformanceCounter.PRIVATE_BYTES,value:i}),this._client.trackMetric({name:r.PerformanceCounter.AVAILABLE_BYTES,value:o}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:r.QuickPulseCounter.COMMITTED_BYTES,value:c})},a.prototype._trackNetwork=function(){var o=this._lastRequests,i={totalRequestCount:a._totalRequestCount,totalFailedRequestCount:a._totalFailedRequestCount,time:+new Date},c=i.totalRequestCount-o.totalRequestCount||0,l=i.totalFailedRequestCount-o.totalFailedRequestCount||0,d=i.time-o.time,u=d/1e3,p=(a._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/c||0;if(this._lastIntervalRequestExecutionTime=a._intervalRequestExecutionTime,d>0){var v=c/u,m=l/u;this._client.trackMetric({name:r.PerformanceCounter.REQUEST_RATE,value:v}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:r.PerformanceCounter.REQUEST_DURATION,value:p}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:r.QuickPulseCounter.REQUEST_FAILURE_RATE,value:m})}this._lastRequests=i},a.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var o=this._lastDependencies,i={totalDependencyCount:a._totalDependencyCount,totalFailedDependencyCount:a._totalFailedDependencyCount,time:+new Date},c=i.totalDependencyCount-o.totalDependencyCount||0,l=i.totalFailedDependencyCount-o.totalFailedDependencyCount||0,d=i.time-o.time,u=d/1e3,p=(a._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/c||0;if(this._lastIntervalDependencyExecutionTime=a._intervalDependencyExecutionTime,d>0){var v=c/u,m=l/u;this._client.trackMetric({name:r.QuickPulseCounter.DEPENDENCY_RATE,value:v}),this._client.trackMetric({name:r.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:m}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:r.QuickPulseCounter.DEPENDENCY_DURATION,value:p})}this._lastDependencies=i}},a.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var o=this._lastExceptions,i={totalExceptionCount:a._totalExceptionCount,time:+new Date},c=i.totalExceptionCount-o.totalExceptionCount||0,l=i.time-o.time,d=l/1e3;if(l>0){var u=c/d;this._client.trackMetric({name:r.QuickPulseCounter.EXCEPTION_RATE,value:u})}this._lastExceptions=i}},a.prototype.dispose=function(){a.INSTANCE=null,this.enable(!1),this._isInitialized=!1},a._totalRequestCount=0,a._totalFailedRequestCount=0,a._totalDependencyCount=0,a._totalFailedDependencyCount=0,a._totalExceptionCount=0,a._intervalDependencyExecutionTime=0,a._intervalRequestExecutionTime=0,a}();n.exports=s}),_m=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AggregatedMetricCounter=void 0;var n=function(){function t(r){this.dimensions=r,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return t}();e.AggregatedMetricCounter=n}),Em=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreaggregatedMetricPropertyNames=void 0,e.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),Nl=x((e,n)=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(i){for(var c,l=1,d=arguments.length;l<d;l++){c=arguments[l];for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(i[u]=c[u])}return i},t.apply(this,arguments)},r=wn(),s=_m(),a=Em(),o=function(){function i(c,l){l===void 0&&(l=6e4),i.INSTANCE||(i.INSTANCE=this),this._isInitialized=!1,i._dependencyCountersCollection=[],i._requestCountersCollection=[],i._exceptionCountersCollection=[],i._traceCountersCollection=[],this._client=c,this._collectionInterval=l}return i.prototype.enable=function(c,l){var d=this;this._isEnabled=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),c?this._handle||(this._collectionInterval=l||this._collectionInterval,this._handle=setInterval(function(){return d.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},i.countException=function(c){if(i.isEnabled()){var l=i._getAggregatedCounter(c,this._exceptionCountersCollection);l.totalCount++}},i.countTrace=function(c){if(i.isEnabled()){var l=i._getAggregatedCounter(c,this._traceCountersCollection);l.totalCount++}},i.countRequest=function(c,l){if(i.isEnabled()){var d,u=i._getAggregatedCounter(l,this._requestCountersCollection);if(typeof c=="string")d=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")d=c;else return;u.intervalExecutionTime+=d,u.totalCount++}},i.countDependency=function(c,l){if(i.isEnabled()){var d=i._getAggregatedCounter(l,this._dependencyCountersCollection),u;if(typeof c=="string")u=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")u=c;else return;d.intervalExecutionTime+=u,d.totalCount++}},i.prototype.isInitialized=function(){return this._isInitialized},i.isEnabled=function(){return i.INSTANCE&&i.INSTANCE._isEnabled},i.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},i._getAggregatedCounter=function(c,l){for(var d=!1,u=0;u<l.length;u++){if(c===l[u].dimensions)return l[u];if(Object.keys(c).length===Object.keys(l[u].dimensions).length){for(var p in c)if(c[p]!=l[u].dimensions[p]){d=!0;break}if(!d)return l[u];d=!1}}var v=new s.AggregatedMetricCounter(c);return l.push(v),v},i.prototype._trackRequestMetrics=function(){for(var c=0;c<i._requestCountersCollection.length;c++){var l=i._requestCountersCollection[c];l.time=+new Date;var d=l.totalCount-l.lastTotalCount||0,u=l.time-l.lastTime,p=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/d||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,u>0&&d>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:l.dimensions,value:p,count:d,aggregationInterval:u,metricType:r.MetricId.REQUESTS_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},i.prototype._trackDependencyMetrics=function(){for(var c=0;c<i._dependencyCountersCollection.length;c++){var l=i._dependencyCountersCollection[c];l.time=+new Date;var d=l.totalCount-l.lastTotalCount||0,u=l.time-l.lastTime,p=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/d||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,u>0&&d>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:l.dimensions,value:p,count:d,aggregationInterval:u,metricType:r.MetricId.DEPENDENCIES_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},i.prototype._trackExceptionMetrics=function(){for(var c=0;c<i._exceptionCountersCollection.length;c++){var l=i._exceptionCountersCollection[c],d=l.totalCount-l.lastTotalCount||0,u=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:l.dimensions,value:d,count:d,aggregationInterval:u,metricType:r.MetricId.EXCEPTIONS_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},i.prototype._trackTraceMetrics=function(){for(var c=0;c<i._traceCountersCollection.length;c++){var l=i._traceCountersCollection[c],d=l.totalCount-l.lastTotalCount||0,u=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:l.dimensions,value:d,count:d,aggregationInterval:u,metricType:r.MetricId.TRACES_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},i.prototype._trackPreAggregatedMetric=function(c){var l={};for(var d in c.dimensions)l[a.PreaggregatedMetricPropertyNames[d]]=c.dimensions[d];l=t(t({},l),{"_MS.MetricId":c.metricType,"_MS.AggregationIntervalMs":String(c.aggregationInterval),"_MS.IsAutocollected":"True"});var u={name:c.name,value:c.value,count:c.count,properties:l,kind:"Aggregation"};this._client.trackMetric(u)},i.prototype.dispose=function(){i.INSTANCE=null,this.enable(!1),this._isInitialized=!1},i}();n.exports=o}),ho=x((e,n)=>{"use strict";var t=require("os"),r=require("fs"),s=require("path"),a=Fr(),o=br(),i=function(){function c(l){this.keys=new a.ContextTagKeys,this.tags={},this._loadApplicationContext(l),this._loadDeviceContext(),this._loadInternalContext()}return c.prototype._loadApplicationContext=function(l){if(l=l||s.resolve(__dirname,"../../../../package.json"),!c.appVersion[l]){c.appVersion[l]="unknown";try{var d=JSON.parse(r.readFileSync(l,"utf8"));d&&typeof d.version=="string"&&(c.appVersion[l]=d.version)}catch(u){o.info("unable to read app version: ",u)}}this.tags[this.keys.applicationVersion]=c.appVersion[l]},c.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=t&&t.hostname(),this.tags[this.keys.deviceOSVersion]=t&&t.type()+" "+t.release(),this.tags[this.keys.cloudRole]=c.DefaultRoleName,this.tags["ai.device.osArchitecture"]=t&&t.arch(),this.tags["ai.device.osPlatform"]=t&&t.platform()},c.prototype._loadInternalContext=function(){var l=s.resolve(__dirname,"../../package.json");if(!c.sdkVersion){c.sdkVersion="unknown";try{var d=JSON.parse(r.readFileSync(l,"utf8"));d&&typeof d.version=="string"&&(c.sdkVersion=d.version)}catch(u){o.info("unable to read app version: ",u)}}this.tags[this.keys.internalSdkVersion]="node:"+c.sdkVersion},c.DefaultRoleName="Web",c.appVersion={},c.sdkVersion=null,c}();n.exports=i}),bm=x((e,n)=>{"use strict";var t=e&&e.__extends||function(){var d=function(u,p){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(v[g]=m[g])},d(u,p)};return function(u,p){d(u,p);function v(){this.constructor=u}u.prototype=p===null?Object.create(p):(v.prototype=p.prototype,new v)}}(),r=require("url"),s=Fr(),a=Wr(),o=Ai(),i=Pl(),c=Yn(),l=function(d){t(u,d);function u(p,v){var m=d.call(this)||this;return v&&v.method&&p&&(m.method=v.method,m.url=u._getUrlFromRequestOptions(p,v),m.startTime=+new Date),m}return u.prototype.onError=function(p){this._setStatus(void 0,p)},u.prototype.onResponse=function(p){this._setStatus(p.statusCode,void 0),this.correlationId=a.getCorrelationContextTarget(p,o.requestContextTargetKey)},u.prototype.getDependencyTelemetry=function(p,v){var m=r.parse(this.url);m.search=void 0,m.hash=void 0;var g=this.method.toUpperCase()+" "+m.pathname,E=s.RemoteDependencyDataConstants.TYPE_HTTP,T=m.hostname;m.port&&(T+=":"+m.port),this.correlationId?(E=s.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==c.correlationIdPrefix&&(T+=" | "+this.correlationId)):E=s.RemoteDependencyDataConstants.TYPE_HTTP;var O={id:v,name:g,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:E,target:T};if(p&&p.time?O.time=p.time:this.startTime&&(O.time=new Date(this.startTime)),p){for(var P in p)O[P]||(O[P]=p[P]);if(p.properties)for(var P in p.properties)O.properties[P]=p.properties[P]}return O},u._getUrlFromRequestOptions=function(p,v){if(typeof p=="string")if(p.indexOf("http://")===0||p.indexOf("https://")===0)p=r.parse(p);else{var m=r.parse(p);m.host==="443"?p=r.parse("https://"+p):p=r.parse("http://"+p)}else{if(p&&typeof r.URL=="function"&&p instanceof r.URL)return r.format(p);var g=p;p={},g&&Object.keys(g).forEach(function(O){p[O]=g[O]})}if(p.path){var E=r.parse(p.path);p.pathname=E.pathname,p.search=E.search}if(p.host&&p.port){var T=r.parse("http://"+p.host);!T.port&&p.port&&(p.hostname=p.host,delete p.host)}return p.protocol=p.protocol||v.agent&&v.agent.protocol||v.protocol||void 0,p.hostname=p.hostname||"localhost",r.format(p)},u}(i);n.exports=l}),Sm=x(e=>{"use strict";var n=e&&e.__assign||function(){return n=Object.assign||function(o){for(var i,c=1,l=arguments.length;c<l;c++){i=arguments[c];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(o[d]=i[d])}return o},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.spanToTelemetryContract=void 0;var t=tr(),r=wn();function s(o){var i=n({},o);return Object.keys(r.SpanAttribute).forEach(function(c){delete i[c]}),i}function a(o){var i="|"+o.spanContext().traceId+"."+o.spanContext().spanId+".",c=Math.round(o._duration[0]*1e3+o._duration[1]/1e6),l=o.attributes["peer.address"]?o.attributes["peer.address"].toString():"",d=o.attributes.component?o.attributes.component.toString():"",u=d.toUpperCase()===r.DependencyTypeName.Http||!!o.attributes[r.SpanAttribute.HttpUrl],p=d.toLowerCase()===r.DependencyTypeName.Grpc;if(u){var v=o.attributes[r.SpanAttribute.HttpMethod]||"GET",m=new URL(o.attributes[r.SpanAttribute.HttpUrl].toString()),g=o.attributes[r.SpanAttribute.HttpHost]||m.host,E=o.attributes[r.SpanAttribute.HttpPort]||m.port||null,T=m.pathname||"/",O=v+" "+T,P=r.DependencyTypeName.Http,A=E?(g+":"+E).toString():g.toString(),M=m.toString(),j=o.attributes[r.SpanAttribute.HttpStatusCode]||o.status.code||0,G=j<400;return{id:i,name:O,dependencyTypeName:P,target:A,data:M,success:G,duration:c,url:M,resultCode:String(j),properties:s(o.attributes)}}else if(p){var v=o.attributes[r.SpanAttribute.GrpcMethod]||"rpc",q=o.attributes[r.SpanAttribute.GrpcService],Y=q?v+" "+q:o.name;return{id:i,duration:c,name:Y,target:q.toString(),data:q.toString()||Y,url:q.toString()||Y,dependencyTypeName:r.DependencyTypeName.Grpc,resultCode:String(o.status.code||0),success:o.status.code===0,properties:s(o.attributes)}}else{var ne=o.name,_e=o.links&&o.links.map(function(De){return{operation_Id:De.context.traceId,id:De.context.spanId}});return{id:i,duration:c,name:ne,target:l,data:l||ne,url:l||ne,dependencyTypeName:o.kind===t.SpanKind.INTERNAL?r.DependencyTypeName.InProc:d||o.name,resultCode:String(o.status.code||0),success:o.status.code===0,properties:n(n({},s(o.attributes)),{"_MS.links":_e||void 0})}}}e.spanToTelemetryContract=a}),Tm=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var n=tr(),t=dr(),r=po(),s=Sm(),a=Xu(),o=[],i=function(l){var d=l.data,u=s.spanToTelemetryContract(d),p=d.spanContext(),v=new r;v.traceId=p.traceId,v.spanId=p.spanId,v.traceFlag=r.formatOpenTelemetryTraceFlags(p.traceFlags),v.parentId=d.parentSpanId?"|"+p.traceId+"."+d.parentSpanId+".":null,a.AsyncScopeManager.with(d,function(){o.forEach(function(m){d.kind===n.SpanKind.SERVER?m.trackRequest(u):(d.kind===n.SpanKind.CLIENT||d.kind===n.SpanKind.INTERNAL)&&m.trackDependency(u)})})};e.subscriber=i;function c(l,d){l?(o.length===0&&t.channel.subscribe("azure-coretracing",e.subscriber),o.push(d)):(o=o.filter(function(u){return u!=d}),o.length===0&&t.channel.unsubscribe("azure-coretracing",e.subscriber))}e.enable=c}),wm=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var n=dr(),t=[],r=function(a){a.data.event.commandName!=="ismaster"&&t.forEach(function(o){var i=a.data.startedData&&a.data.startedData.databaseName||"Unknown database";o.trackDependency({target:i,data:a.data.event.commandName,name:a.data.event.commandName,duration:a.data.event.duration,success:a.data.succeeded,resultCode:a.data.succeeded?"0":"1",time:a.data.startedData.time,dependencyTypeName:"mongodb"})})};e.subscriber=r;function s(a,o){a?(t.length===0&&n.channel.subscribe("mongodb",e.subscriber),t.push(o)):(t=t.filter(function(i){return i!=o}),t.length===0&&n.channel.unsubscribe("mongodb",e.subscriber))}e.enable=s}),Im=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var n=dr(),t=[],r=function(a){t.forEach(function(o){var i=a.data.query||{},c=i.sql||"Unknown query",l=!a.data.err,d=i._connection||{},u=d.config||{},p=u.socketPath?u.socketPath:(u.host||"localhost")+":"+u.port;o.trackDependency({target:p,data:c,name:c,duration:a.data.duration,success:l,resultCode:l?"0":"1",time:a.data.time,dependencyTypeName:"mysql"})})};e.subscriber=r;function s(a,o){a?(t.length===0&&n.channel.subscribe("mysql",e.subscriber),t.push(o)):(t=t.filter(function(i){return i!=o}),t.length===0&&n.channel.unsubscribe("mysql",e.subscriber))}e.enable=s}),Am=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var n=dr(),t=[],r=function(a){t.forEach(function(o){a.data.commandObj.command!=="info"&&o.trackDependency({target:a.data.address,name:a.data.commandObj.command,data:a.data.commandObj.command,duration:a.data.duration,success:!a.data.err,resultCode:a.data.err?"1":"0",time:a.data.time,dependencyTypeName:"redis"})})};e.subscriber=r;function s(a,o){a?(t.length===0&&n.channel.subscribe("redis",e.subscriber),t.push(o)):(t=t.filter(function(i){return i!=o}),t.length===0&&n.channel.unsubscribe("redis",e.subscriber))}e.enable=s}),Om=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var n=dr(),t=[],r=function(a){t.forEach(function(o){var i=a.data.query,c=i.preparable&&i.preparable.text||i.plan||i.text||"unknown query",l=!a.data.error,d=a.data.database.host+":"+a.data.database.port;o.trackDependency({target:d,data:c,name:c,duration:a.data.duration,success:l,resultCode:l?"0":"1",time:a.data.time,dependencyTypeName:"postgres"})})};e.subscriber=r;function s(a,o){a?(t.length===0&&n.channel.subscribe("postgres",e.subscriber),t.push(o)):(t=t.filter(function(i){return i!=o}),t.length===0&&n.channel.unsubscribe("postgres",e.subscriber))}e.enable=s}),Oi=x((e,n)=>{"use strict";var t=e&&e.__spreadArrays||function(){for(var m=0,g=0,E=arguments.length;g<E;g++)m+=arguments[g].length;for(var T=Array(m),O=0,g=0;g<E;g++)for(var P=arguments[g],A=0,M=P.length;A<M;A++,O++)T[O]=P[A];return T},r=require("http"),s=require("https"),a=br(),o=Wr(),i=Ai(),c=bm(),l=Zn(),d=Yn(),u=po(),p=as(),v=function(){function m(g){if(m.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");m.INSTANCE=this,this._client=g}return m.prototype.enable=function(g){this._isEnabled=g,this._isEnabled&&!this._isInitialized&&this._initialize(),p.IsInitialized&&(Tm().enable(!0,this._client),wm().enable(g,this._client),Im().enable(g,this._client),Am().enable(g,this._client),Om().enable(g,this._client))},m.prototype.isInitialized=function(){return this._isInitialized},m.prototype._initialize=function(){var g=this;this._isInitialized=!0;var E=r.request,T=s.request,O=function(P,A){var M=!A[m.disableCollectionRequestOption]&&!P[m.alreadyAutoCollectedFlag];A.headers&&A.headers["user-agent"]&&A.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(M=!1),P[m.alreadyAutoCollectedFlag]=!0,P&&A&&M&&(l.CorrelationContextManager.wrapEmitter(P),m.trackRequest(g._client,{options:A,request:P}))};r.request=function(P){for(var A=[],M=1;M<arguments.length;M++)A[M-1]=arguments[M];var j=E.call.apply(E,t([r,P],A));return O(j,P),j},s.request=function(P){for(var A=[],M=1;M<arguments.length;M++)A[M-1]=arguments[M];var j=T.call.apply(T,t([s,P],A));return O(j,P),j},r.get=function(P){for(var A,M=[],j=1;j<arguments.length;j++)M[j-1]=arguments[j];var G=(A=r.request).call.apply(A,t([r,P],M));return G.end(),G},s.get=function(P){for(var A,M=[],j=1;j<arguments.length;j++)M[j-1]=arguments[j];var G=(A=s.request).call.apply(A,t([s,P],M));return G.end(),G}},m.trackRequest=function(g,E){if(!E.options||!E.request||!g){a.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!E.options,!E.request,!g);return}var T=new c(E.options,E.request),O=l.CorrelationContextManager.getCurrentContext(),P,A;if(O&&O.operation&&O.operation.traceparent&&u.isValidTraceId(O.operation.traceparent.traceId))O.operation.traceparent.updateSpanId(),P=O.operation.traceparent.getBackCompatRequestId();else if(d.w3cEnabled){var M=new u;A=M.toString(),P=M.getBackCompatRequestId()}else P=O&&O.operation&&O.operation.parentId+m.requestNumber+++".";if(o.canIncludeCorrelationHeader(g,T.getUrl())&&E.request.getHeader&&E.request.setHeader&&g.config&&g.config.correlationId){var j=E.request.getHeader(i.requestContextHeader);try{o.safeIncludeCorrelationHeader(g,E.request,j)}catch(Y){a.warn("Request-Context header could not be set. Correlation of requests may be lost",Y)}if(O&&O.operation)try{if(E.request.setHeader(i.requestIdHeader,P),g.config.ignoreLegacyHeaders||(E.request.setHeader(i.parentIdHeader,O.operation.id),E.request.setHeader(i.rootIdHeader,P)),A||O.operation.traceparent)E.request.setHeader(i.traceparentHeader,A||O.operation.traceparent.toString());else if(d.w3cEnabled){var M=new u().toString();E.request.setHeader(i.traceparentHeader,M)}if(O.operation.tracestate){var G=O.operation.tracestate.toString();G&&E.request.setHeader(i.traceStateHeader,G)}var q=O.customProperties.serializeToHeader();q&&E.request.setHeader(i.correlationContextHeader,q)}catch(Y){a.warn("Correlation headers could not be set. Correlation of requests may be lost.",Y)}}E.request.on&&(E.request.on("response",function(Y){T.onResponse(Y);var ne=T.getDependencyTelemetry(E,P);ne.contextObjects=ne.contextObjects||{},ne.contextObjects["http.RequestOptions"]=E.options,ne.contextObjects["http.ClientRequest"]=E.request,ne.contextObjects["http.ClientResponse"]=Y,g.trackDependency(ne)}),E.request.on("error",function(Y){T.onError(Y);var ne=T.getDependencyTelemetry(E,P);ne.contextObjects=ne.contextObjects||{},ne.contextObjects["http.RequestOptions"]=E.options,ne.contextObjects["http.ClientRequest"]=E.request,ne.contextObjects.Error=Y,g.trackDependency(ne)}),E.request.on("abort",function(){T.onError(new Error);var Y=T.getDependencyTelemetry(E,P);Y.contextObjects=Y.contextObjects||{},Y.contextObjects["http.RequestOptions"]=E.options,Y.contextObjects["http.ClientRequest"]=E.request,g.trackDependency(Y)}))},m.prototype.dispose=function(){m.INSTANCE=null,this.enable(!1),this._isInitialized=!1},m.disableCollectionRequestOption="disableAppInsightsAutoCollection",m.requestNumber=1,m.alreadyAutoCollectedFlag="_appInsightsAutoCollected",m}();n.exports=v}),Pm=x((e,n)=>{"use strict";var t=require("os"),r=wn(),s=Wr(),a=ho(),o=Oi(),i="http://169.254.169.254/metadata/instance/compute",c="api-version=2017-12-01",l="format=json",d="ENETUNREACH",u=function(){function p(v){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",p.INSTANCE||(p.INSTANCE=this),this._isInitialized=!1,this._client=v}return p.prototype.enable=function(v,m){var g=this;this._isEnabled=v,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),v?this._handle||(this._handle=setInterval(function(){return g.trackHeartBeat(m,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},p.prototype.isInitialized=function(){return this._isInitialized},p.isEnabled=function(){return p.INSTANCE&&p.INSTANCE._isEnabled},p.prototype.trackHeartBeat=function(v,m){var g=this,E=!1,T={},O=a.sdkVersion;T.sdk=O,T.osType=t.type(),process.env.WEBSITE_SITE_NAME?(T.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",T.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",T.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?T.azfunction_appId=process.env.WEBSITE_HOSTNAME:v&&(this._isVM===void 0?(E=!0,this._getAzureComputeMetadata(v,function(){g._isVM&&Object.keys(g._vmData).length>0&&(T.azInst_vmId=g._vmData.vmId||"",T.azInst_subscriptionId=g._vmData.subscriptionId||"",T.azInst_osType=g._vmData.osType||"",g._azInst_vmId=g._vmData.vmId||"",g._azInst_subscriptionId=g._vmData.subscriptionId||"",g._azInst_osType=g._vmData.osType||""),g._client.trackMetric({name:r.HeartBeatMetricName,value:0,properties:T}),m()})):this._isVM&&(T.azInst_vmId=this._azInst_vmId,T.azInst_subscriptionId=this._azInst_subscriptionId,T.azInst_osType=this._azInst_osType)),E||(this._client.trackMetric({name:r.HeartBeatMetricName,value:0,properties:T}),m())},p.prototype.dispose=function(){p.INSTANCE=null,this.enable(!1),this._isInitialized=!1},p.prototype._getAzureComputeMetadata=function(v,m){var g,E=this,T=i+"?"+c+"&"+l,O=(g={method:"GET"},g[o.disableCollectionRequestOption]=!0,g.headers={Metadata:"True"},g),P=s.makeRequest(v,T,O,function(A){if(A.statusCode===200){E._isVM=!0;var M="";A.on("data",function(j){M+=j}),A.on("end",function(){E._vmData=E._isJSON(M)?JSON.parse(M):{},m()})}else m()});P&&(P.on("error",function(A){A&&A.message&&A.message.indexOf(d)>-1&&(E._isVM=!1),m()}),P.end())},p.prototype._isJSON=function(v){try{return JSON.parse(v)&&!!v}catch{return!1}},p}();n.exports=u}),Ml=x((e,n)=>{"use strict";var t=require("http"),r=require("https"),s=br(),a=Wr(),o=Ai(),i=Cl(),c=Zn(),l=us(),d=function(){function u(p){if(u.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");u.INSTANCE=this,this._client=p}return u.prototype.enable=function(p){this._isEnabled=p,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},u.prototype.useAutoCorrelation=function(p,v){p&&!this._isAutoCorrelating?c.CorrelationContextManager.enable(v):!p&&this._isAutoCorrelating&&c.CorrelationContextManager.disable(),this._isAutoCorrelating=p},u.prototype.isInitialized=function(){return this._isInitialized},u.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},u.prototype._generateCorrelationContext=function(p){if(this._isAutoCorrelating)return c.CorrelationContextManager.generateContextObject(p.getOperationId(this._client.context.tags),p.getRequestId(),p.getOperationName(this._client.context.tags),p.getCorrelationContextHeader(),p.getTraceparent(),p.getTracestate())},u.prototype._initialize=function(){var p=this;this._isInitialized=!0;var v=function(T){if(T){if(typeof T!="function")throw new Error("onRequest handler must be a function");return function(O,P){c.CorrelationContextManager.wrapEmitter(O),c.CorrelationContextManager.wrapEmitter(P);var A=O&&!O[u.alreadyAutoCollectedFlag];if(O&&A){var M=new i(O),j=p._generateCorrelationContext(M);c.CorrelationContextManager.runWithContext(j,function(){p._isEnabled&&(O[u.alreadyAutoCollectedFlag]=!0,u.trackRequest(p._client,{request:O,response:P},M)),typeof T=="function"&&T(O,P)})}else typeof T=="function"&&T(O,P)}}},m=function(T){var O=T.addListener.bind(T);T.addListener=function(P,A){switch(P){case"request":case"checkContinue":return O(P,v(A));default:return O(P,A)}},T.on=T.addListener},g=t.createServer;t.createServer=function(T,O){if(O&&typeof O=="function"){var P=g(T,v(O));return m(P),P}else{var P=g(v(T));return m(P),P}};var E=r.createServer;r.createServer=function(T,O){var P=E(T,v(O));return m(P),P}},u.trackRequestSync=function(p,v){if(!v.request||!v.response||!p){s.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!v.request,!v.response,!p);return}u.addResponseCorrelationIdHeader(p,v.response);var m=c.CorrelationContextManager.getCurrentContext(),g=new i(v.request,m&&m.operation.parentId);m&&(m.operation.id=g.getOperationId(p.context.tags)||m.operation.id,m.operation.name=g.getOperationName(p.context.tags)||m.operation.name,m.operation.parentId=g.getRequestId()||m.operation.parentId,m.customProperties.addHeaderData(g.getCorrelationContextHeader())),u.endRequest(p,g,v,v.duration,v.error)},u.trackRequest=function(p,v,m){if(!v.request||!v.response||!p){s.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!v.request,!v.response,!p);return}var g=c.CorrelationContextManager.getCurrentContext(),E=m||new i(v.request,g&&g.operation.parentId);a.canIncludeCorrelationHeader(p,E.getUrl())&&u.addResponseCorrelationIdHeader(p,v.response),g&&!m&&(g.operation.id=E.getOperationId(p.context.tags)||g.operation.id,g.operation.name=E.getOperationName(p.context.tags)||g.operation.name,g.operation.parentId=E.getOperationParentId(p.context.tags)||g.operation.parentId,g.customProperties.addHeaderData(E.getCorrelationContextHeader())),v.response.once&&v.response.once("finish",function(){u.endRequest(p,E,v,null,null)}),v.request.on&&v.request.on("error",function(T){u.endRequest(p,E,v,null,T)}),v.request.on&&v.request.on("aborted",function(){var T="The request has been aborted and the network socket has closed.";u.endRequest(p,E,v,null,T)})},u.addResponseCorrelationIdHeader=function(p,v){if(p.config&&p.config.correlationId&&v.getHeader&&v.setHeader&&!v.headersSent){var m=v.getHeader(o.requestContextHeader);a.safeIncludeCorrelationHeader(p,v,m)}},u.endRequest=function(p,v,m,g,E){E?v.onError(E,g):v.onResponse(m.response,g);var T=v.getRequestTelemetry(m);if(T.tagOverrides=v.getRequestTags(p.context.tags),m.tagOverrides)for(var O in m.tagOverrides)T.tagOverrides[O]=m.tagOverrides[O];var P=v.getLegacyRootId();P&&(T.properties.ai_legacyRootId=P),T.contextObjects=T.contextObjects||{},T.contextObjects["http.ServerRequest"]=m.request,T.contextObjects["http.ServerResponse"]=m.response,p.trackRequest(T)},u.prototype.dispose=function(){u.INSTANCE=null,this.enable(!1),this._isInitialized=!1,c.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},u.alreadyAutoCollectedFlag="_appInsightsAutoCollected",u}();n.exports=d}),Cm=x((e,n)=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(d){for(var u,p=1,v=arguments.length;p<v;p++){u=arguments[p];for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&(d[m]=u[m])}return d},t.apply(this,arguments)},r=require("os"),s=Fr(),a=wn(),o=Wr(),i=br(),c=o.w3cTraceId(),l=function(){function d(){}return d.createQuickPulseEnvelope=function(u,p,v,m){var g=r&&typeof r.hostname=="function"&&r.hostname()||"Unknown",E=m.tags&&m.keys&&m.keys.cloudRoleInstance&&m.tags[m.keys.cloudRoleInstance]||g,T=m.tags&&m.keys&&m.keys.cloudRole&&m.tags[m.keys.cloudRole]||null,O={Documents:p.length>0?p:null,InstrumentationKey:v.instrumentationKey||"",Metrics:u.length>0?u:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:m.tags[m.keys.internalSdkVersion],StreamId:c,MachineName:g,Instance:E,RoleName:T};return O},d.createQuickPulseMetric=function(u){var p;return p={Name:u.name,Value:u.value,Weight:u.count||1},p},d.telemetryEnvelopeToQuickPulseDocument=function(u){switch(u.data.baseType){case s.TelemetryTypeString.Event:return d.createQuickPulseEventDocument(u);case s.TelemetryTypeString.Exception:return d.createQuickPulseExceptionDocument(u);case s.TelemetryTypeString.Trace:return d.createQuickPulseTraceDocument(u);case s.TelemetryTypeString.Dependency:return d.createQuickPulseDependencyDocument(u);case s.TelemetryTypeString.Request:return d.createQuickPulseRequestDocument(u)}return null},d.createQuickPulseEventDocument=function(u){var p=d.createQuickPulseDocument(u),v=u.data.baseData.name,m=t(t({},p),{Name:v});return m},d.createQuickPulseTraceDocument=function(u){var p=d.createQuickPulseDocument(u),v=u.data.baseData.severityLevel||0,m=t(t({},p),{Message:u.data.baseData.message,SeverityLevel:s.SeverityLevel[v]});return m},d.createQuickPulseExceptionDocument=function(u){var p=d.createQuickPulseDocument(u),v=u.data.baseData.exceptions,m="",g="",E="";v&&v.length>0&&(v[0].parsedStack&&v[0].parsedStack.length>0?v[0].parsedStack.forEach(function(O){m+=O.assembly+`
`}):v[0].stack&&v[0].stack.length>0&&(m=v[0].stack),g=v[0].message,E=v[0].typeName);var T=t(t({},p),{Exception:m,ExceptionMessage:g,ExceptionType:E});return T},d.createQuickPulseRequestDocument=function(u){var p=d.createQuickPulseDocument(u),v=u.data.baseData,m=t(t({},p),{Name:v.name,Success:v.success,Duration:v.duration,ResponseCode:v.responseCode,OperationName:v.name});return m},d.createQuickPulseDependencyDocument=function(u){var p=d.createQuickPulseDocument(u),v=u.data.baseData,m=t(t({},p),{Name:v.name,Target:v.target,Success:v.success,Duration:v.duration,ResultCode:v.resultCode,CommandName:v.data,OperationName:p.OperationId,DependencyTypeName:v.type});return m},d.createQuickPulseDocument=function(u){var p,v,m,g;u.data.baseType?(v=a.TelemetryTypeStringToQuickPulseType[u.data.baseType],p=a.TelemetryTypeStringToQuickPulseDocumentType[u.data.baseType]):i.warn("Document type invalid; not sending live metric document",u.data.baseType),m=u.tags[d.keys.operationId],g=d.aggregateProperties(u);var E={DocumentType:p,__type:v,OperationId:m,Version:"1.0",Properties:g};return E},d.aggregateProperties=function(u){var p=[],v=u.data.baseData.measurements||{};for(var m in v)if(v.hasOwnProperty(m)){var g=v[m],E={key:m,value:g};p.push(E)}var T=u.data.baseData.properties||{};for(var m in T)if(T.hasOwnProperty(m)){var g=T[m],E={key:m,value:g};p.push(E)}return p},d.keys=new s.ContextTagKeys,d}();n.exports=l}),Dm=x((e,n)=>{"use strict";var t=function(){return(Date.now()+621355968e5)*1e4};n.exports={getTransmissionTime:t}}),Rm=x((e,n)=>{"use strict";var t=e&&e.__awaiter||function(u,p,v,m){function g(E){return E instanceof v?E:new v(function(T){T(E)})}return new(v||(v=Promise))(function(E,T){function O(M){try{A(m.next(M))}catch(j){T(j)}}function P(M){try{A(m.throw(M))}catch(j){T(j)}}function A(M){M.done?E(M.value):g(M.value).then(O,P)}A((m=m.apply(u,p||[])).next())})},r=e&&e.__generator||function(u,p){var v={label:0,sent:function(){if(E[0]&1)throw E[1];return E[1]},trys:[],ops:[]},m,g,E,T;return T={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(T[Symbol.iterator]=function(){return this}),T;function O(A){return function(M){return P([A,M])}}function P(A){if(m)throw new TypeError("Generator is already executing.");for(;v;)try{if(m=1,g&&(E=A[0]&2?g.return:A[0]?g.throw||((E=g.return)&&E.call(g),0):g.next)&&!(E=E.call(g,A[1])).done)return E;switch(g=0,E&&(A=[A[0]&2,E.value]),A[0]){case 0:case 1:E=A;break;case 4:return v.label++,{value:A[1],done:!1};case 5:v.label++,g=A[1],A=[0];continue;case 7:A=v.ops.pop(),v.trys.pop();continue;default:if(E=v.trys,!(E=E.length>0&&E[E.length-1])&&(A[0]===6||A[0]===2)){v=0;continue}if(A[0]===3&&(!E||A[1]>E[0]&&A[1]<E[3])){v.label=A[1];break}if(A[0]===6&&v.label<E[1]){v.label=E[1],E=A;break}if(E&&v.label<E[2]){v.label=E[2],v.ops.push(A);break}E[2]&&v.ops.pop(),v.trys.pop();continue}A=p.call(u,v)}catch(M){A=[6,M],g=0}finally{m=E=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},s=require("https"),a=Oi(),o=br(),i=Dm(),c=Wr(),l={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},d=function(){function u(p){this._config=p,this._consecutiveErrors=0}return u.prototype.ping=function(p,v,m){var g=[{name:l.streamId,value:p.StreamId},{name:l.machineName,value:p.MachineName},{name:l.roleName,value:p.RoleName},{name:l.instanceName,value:p.Instance},{name:l.invariantVersion,value:p.InvariantVersion.toString()}];this._submitData(p,v,m,"ping",g)},u.prototype.post=function(p,v,m){return t(this,void 0,void 0,function(){return r(this,function(g){switch(g.label){case 0:return[4,this._submitData([p],v,m,"post")];case 1:return g.sent(),[2]}})})},u.prototype._submitData=function(p,v,m,g,E){return t(this,void 0,void 0,function(){var T,O,P,A,M,j=this;return r(this,function(G){return T=JSON.stringify(p),O=(A={},A[a.disableCollectionRequestOption]=!0,A.host=v&&v.length>0?v:this._config.quickPulseHost,A.method=l.method,A.path="/QuickPulseService.svc/"+g+"?ikey="+this._config.instrumentationKey,A.headers=(M={Expect:"100-continue"},M[l.time]=i.getTransmissionTime(),M["Content-Type"]="application/json",M["Content-Length"]=Buffer.byteLength(T),M),A),E&&E.length>0&&E.forEach(function(q){return O.headers[q.name]=q.value}),this._config.httpsAgent?O.agent=this._config.httpsAgent:O.agent=c.tlsRestrictedAgent,P=s.request(O,function(q){if(q.statusCode==200){var Y=q.headers[l.subscribed]==="true",ne=q.headers[l.endpointRedirect]?q.headers[l.endpointRedirect].toString():null,_e=q.headers[l.pollingIntervalHint]?parseInt(q.headers[l.pollingIntervalHint].toString()):null;j._consecutiveErrors=0,m(Y,q,ne,_e)}else j._onError("StatusCode:"+q.statusCode+" StatusMessage:"+q.statusMessage),m()}),P.on("error",function(q){j._onError(q),m()}),P.write(T),P.end(),[2]})})},u.prototype._onError=function(p){this._consecutiveErrors++;var v="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%u.MAX_QPS_FAILURES_BEFORE_WARN===0?(v="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",o.warn(u.TAG,v,p)):o.info(u.TAG,v,p)},u.TAG="QuickPulseSender",u.MAX_QPS_FAILURES_BEFORE_WARN=25,u}();n.exports=d}),xm=x((e,n)=>{"use strict";var t=e&&e.__awaiter||function(d,u,p,v){function m(g){return g instanceof p?g:new p(function(E){E(g)})}return new(p||(p=Promise))(function(g,E){function T(A){try{P(v.next(A))}catch(M){E(M)}}function O(A){try{P(v.throw(A))}catch(M){E(M)}}function P(A){A.done?g(A.value):m(A.value).then(T,O)}P((v=v.apply(d,u||[])).next())})},r=e&&e.__generator||function(d,u){var p={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},v,m,g,E;return E={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function T(P){return function(A){return O([P,A])}}function O(P){if(v)throw new TypeError("Generator is already executing.");for(;p;)try{if(v=1,m&&(g=P[0]&2?m.return:P[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,P[1])).done)return g;switch(m=0,g&&(P=[P[0]&2,g.value]),P[0]){case 0:case 1:g=P;break;case 4:return p.label++,{value:P[1],done:!1};case 5:p.label++,m=P[1],P=[0];continue;case 7:P=p.ops.pop(),p.trys.pop();continue;default:if(g=p.trys,!(g=g.length>0&&g[g.length-1])&&(P[0]===6||P[0]===2)){p=0;continue}if(P[0]===3&&(!g||P[1]>g[0]&&P[1]<g[3])){p.label=P[1];break}if(P[0]===6&&p.label<g[1]){p.label=g[1],g=P;break}if(g&&p.label<g[2]){p.label=g[2],p.ops.push(P);break}g[2]&&p.ops.pop(),p.trys.pop();continue}P=u.call(d,p)}catch(A){P=[6,A],m=0}finally{v=g=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},s=br(),a=Cm(),o=Rm(),i=wn(),c=ho(),l=function(){function d(u,p){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=u,this.context=p||new c,this._sender=new o(this.config),this._isEnabled=!1}return d.prototype.addCollector=function(u){this._collectors.push(u)},d.prototype.trackMetric=function(u){this._addMetric(u)},d.prototype.addDocument=function(u){var p=a.telemetryEnvelopeToQuickPulseDocument(u);p&&this._documents.push(p)},d.prototype.enable=function(u){u&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!u&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},d.prototype.enableCollectors=function(u){this._collectors.forEach(function(p){p.enable(u)})},d.prototype._addMetric=function(u){var p=u.value,v=u.count||1,m=i.PerformanceToQuickPulseCounter[u.name];m&&(this._metrics[m]?(this._metrics[m].Value=(this._metrics[m].Value*this._metrics[m].Weight+p*v)/(this._metrics[m].Weight+v),this._metrics[m].Weight+=v):(this._metrics[m]=a.createQuickPulseMetric(u),this._metrics[m].Name=m,this._metrics[m].Weight=1))},d.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},d.prototype._goQuickPulse=function(){return t(this,void 0,void 0,function(){var u,p,v,m,g=this;return r(this,function(E){switch(E.label){case 0:return u=Object.keys(this._metrics).map(function(T){return g._metrics[T]}),p=a.createQuickPulseEnvelope(u,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(p)]:[3,2];case 1:return E.sent(),[3,3];case 2:this._ping(p),E.label=3;case 3:return v=this._pollingIntervalHint>0?this._pollingIntervalHint:d.PING_INTERVAL,m=this._isCollectingData?d.POST_INTERVAL:v,this._isCollectingData&&Date.now()-this._lastSuccessTime>=d.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,m=d.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=d.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(m=d.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),m),this._handle.unref(),[2]}})})},d.prototype._ping=function(u){this._sender.ping(u,this._redirectedHost,this._quickPulseDone.bind(this))},d.prototype._post=function(u){return t(this,void 0,void 0,function(){return r(this,function(p){switch(p.label){case 0:return[4,this._sender.post(u,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return p.sent(),[2]}})})},d.prototype._quickPulseDone=function(u,p,v,m){u!=null?(this._isCollectingData!==u&&(s.info("Live Metrics sending data",u),this.enableCollectors(u)),this._isCollectingData=u,v&&v.length>0&&(this._redirectedHost=v,s.info("Redirecting endpoint to: ",v)),m&&m>0&&(this._pollingIntervalHint=m),p&&p.statusCode<300&&p.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},d.MAX_POST_WAIT_TIME=2e4,d.MAX_PING_WAIT_TIME=6e4,d.FALLBACK_INTERVAL=6e4,d.PING_INTERVAL=5e3,d.POST_INTERVAL=1e3,d}();n.exports=l}),Nm=x((e,n)=>{"use strict";var t=wn(),r=function(){function s(){}return s.parse=function(a){if(!a)return{};var o=a.split(s._FIELDS_SEPARATOR),i=o.reduce(function(l,d){var u=d.split(s._FIELD_KEY_VALUE_SEPARATOR);if(u.length===2){var p=u[0].toLowerCase(),v=u[1];l[p]=v}return l},{});if(Object.keys(i).length>0){if(i.endpointsuffix){var c=i.location?i.location+".":"";i.ingestionendpoint=i.ingestionendpoint||"https://"+c+"dc."+i.endpointsuffix,i.liveendpoint=i.liveendpoint||"https://"+c+"live."+i.endpointsuffix}i.ingestionendpoint=i.ingestionendpoint||t.DEFAULT_BREEZE_ENDPOINT,i.liveendpoint=i.liveendpoint||t.DEFAULT_LIVEMETRICS_ENDPOINT}return i},s._FIELDS_SEPARATOR=";",s._FIELD_KEY_VALUE_SEPARATOR="=",s}();n.exports=r}),kl=x((e,n)=>{"use strict";var t=Yn(),r=Nm(),s=br(),a=wn(),o=require("url"),i=function(){function c(l){var d=this;this.endpointBase=a.DEFAULT_BREEZE_ENDPOINT;var u=process.env[c.ENV_connectionString],p=r.parse(l),v=r.parse(u),m=!p.instrumentationkey&&Object.keys(p).length>0?null:l;this.instrumentationKey=p.instrumentationkey||m||v.instrumentationkey||c._getInstrumentationKey(),c._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(p.ingestionendpoint||v.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(g){return d.correlationId=g},this.proxyHttpUrl=process.env[c.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[c.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=p.ingestionendpoint||v.ingestionendpoint||process.env[c.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=p.liveendpoint||v.liveendpoint||process.env[c.ENV_quickPulseHost]||a.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=o.parse(this._quickPulseHost).host)}return Object.defineProperty(c.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(l){t.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=l,this.correlationId=t.correlationIdPrefix,t.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(l){this._quickPulseHost=l},enumerable:!1,configurable:!0}),c._getInstrumentationKey=function(){var l=process.env[c.ENV_iKey]||process.env[c.ENV_azurePrefix+c.ENV_iKey]||process.env[c.legacy_ENV_iKey]||process.env[c.ENV_azurePrefix+c.legacy_ENV_iKey];if(!l||l=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return l},c._validateInstrumentationKey=function(l){var d="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",u=new RegExp(d);return u.test(l)},c.ENV_azurePrefix="APPSETTING_",c.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",c.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",c.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",c.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",c.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",c.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",c.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",c.ENV_http_proxy="http_proxy",c.ENV_https_proxy="https_proxy",c}();n.exports=i}),Mm=x(e=>{"use strict";var n=e&&e.__assign||function(){return n=Object.assign||function(o){for(var i,c=1,l=arguments.length;c<l;c++){i=arguments[c];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(o[d]=i[d])}return o},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCollectNativePerformance=void 0;var t=kl(),r=ho(),s=br(),a=function(){function o(i){this._disabledMetrics={},o.INSTANCE&&o.INSTANCE.dispose(),o.INSTANCE=this,this._client=i}return o.isNodeVersionCompatible=function(){var i=process.versions.node.split(".");return parseInt(i[0])>=6},o.prototype.enable=function(i,c,l){var d=this;if(c===void 0&&(c={}),l===void 0&&(l=6e4),!!o.isNodeVersionCompatible()){if(o._metricsAvailable==null&&i&&!this._isInitialized)try{var u=require("applicationinsights-native-metrics");o._emitter=new u,o._metricsAvailable=!0,s.info("Native metrics module successfully loaded!")}catch{o._metricsAvailable=!1;return}this._isEnabled=i,this._disabledMetrics=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&o._emitter?(o._emitter.enable(!0,l),this._handle||(this._handle=setInterval(function(){return d._trackNativeMetrics()},l),this._handle.unref())):o._emitter&&(o._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},o.prototype.dispose=function(){this.enable(!1)},o.parseEnabled=function(i){var c=process.env[t.ENV_nativeMetricsDisableAll],l=process.env[t.ENV_nativeMetricsDisablers];if(c)return{isEnabled:!1,disabledMetrics:{}};if(l){var d=l.split(","),u={};if(d.length>0)for(var p=0,v=d;p<v.length;p++){var m=v[p];u[m]=!0}return typeof i=="object"?{isEnabled:!0,disabledMetrics:n(n({},i),u)}:{isEnabled:i,disabledMetrics:u}}return typeof i=="boolean"?{isEnabled:i,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:i}},o.prototype._trackNativeMetrics=function(){var i=!0;typeof this._isEnabled!="object"&&(i=this._isEnabled),i&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},o.prototype._trackGarbageCollection=function(){var i;if(!this._disabledMetrics.gc){var c=o._emitter.getGCData();for(var l in c){var d=c[l].metrics,u=l+" Garbage Collection Duration",p=Math.sqrt(d.sumSquares/d.count-Math.pow(d.total/d.count,2))||0;this._client.trackMetric({name:u,value:d.total,count:d.count,max:d.max,min:d.min,stdDev:p,tagOverrides:(i={},i[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+r.sdkVersion,i)})}}},o.prototype._trackEventLoop=function(){var i;if(!this._disabledMetrics.loop){var c=o._emitter.getLoopData(),l=c.loopUsage;if(l.count!=0){var d="Event Loop CPU Time",u=Math.sqrt(l.sumSquares/l.count-Math.pow(l.total/l.count,2))||0;this._client.trackMetric({name:d,value:l.total,count:l.count,min:l.min,max:l.max,stdDev:u,tagOverrides:(i={},i[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+r.sdkVersion,i)})}}},o.prototype._trackHeapUsage=function(){var i,c,l;if(!this._disabledMetrics.heap){var d=process.memoryUsage(),u=d.heapUsed,p=d.heapTotal,v=d.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:u,count:1,tagOverrides:(i={},i[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+r.sdkVersion,i)}),this._client.trackMetric({name:"Memory Total (Heap)",value:p,count:1,tagOverrides:(c={},c[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+r.sdkVersion,c)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:v-p,count:1,tagOverrides:(l={},l[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+r.sdkVersion,l)})}},o}();e.AutoCollectNativePerformance=a}),km=x((e,n)=>{"use strict";var t=br(),r=function(){function s(a,o,i,c){this._buffer=[],this._lastSend=0,this._isDisabled=a,this._getBatchSize=o,this._getBatchIntervalMs=i,this._sender=c}return s.prototype.setUseDiskRetryCaching=function(a,o,i){this._sender.setDiskRetryMode(a,o,i)},s.prototype.send=function(a){var o=this;if(!this._isDisabled()){if(!a){t.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(a),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){o._timeoutHandle=null,o.triggerSend(!1)},this._getBatchIntervalMs()))}},s.prototype.triggerSend=function(a,o){var i=this._buffer.length<1;i||(a?(this._sender.saveOnCrash(this._buffer),typeof o=="function"&&o("data saved on crash")):this._sender.send(this._buffer,o)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,i&&typeof o=="function"&&o("no data to send")},s}();n.exports=r}),Lm=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.azureRoleEnvironmentTelemetryProcessor=void 0;function n(t,r){process.env.WEBSITE_SITE_NAME&&(t.tags[r.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}e.azureRoleEnvironmentTelemetryProcessor=n}),jm=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSamplingHashCode=e.samplingTelemetryProcessor=void 0;var n=Fr();function t(s,a){var o=s.sampleRate,i=!1;return o==null||o>=100||s.data&&n.TelemetryType.Metric===n.baseTypeToTelemetryType(s.data.baseType)?!0:(a.correlationContext&&a.correlationContext.operation?i=r(a.correlationContext.operation.id)<o:i=Math.random()*100<o,i)}e.samplingTelemetryProcessor=t;function r(s){var a=-2147483648,o=2147483647,i=5381;if(!s)return 0;for(;s.length<8;)s=s+s;for(var c=0;c<s.length;c++)i=((i<<5)+i|0)+s.charCodeAt(c)|0;return i=i<=a?o:Math.abs(i),i/o*100}e.getSamplingHashCode=r}),Hm=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.performanceMetricsTelemetryProcessor=void 0;var n=us(),t=Fr();function r(s,a){switch(a&&a.addDocument(s),s.data.baseType){case t.TelemetryTypeString.Exception:n.countException();break;case t.TelemetryTypeString.Request:var o=s.data.baseData;n.countRequest(o.duration,o.success);break;case t.TelemetryTypeString.Dependency:var i=s.data.baseData;n.countDependency(i.duration,i.success);break}return!0}e.performanceMetricsTelemetryProcessor=r}),Um=x(e=>{"use strict";var n=e&&e.__assign||function(){return n=Object.assign||function(o){for(var i,c=1,l=arguments.length;c<l;c++){i=arguments[c];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(o[d]=i[d])}return o},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.preAggregatedMetricsTelemetryProcessor=void 0;var t=Fr(),r=Nl(),s=Fr();function a(o,i){if(r.isEnabled())switch(o.data.baseType){case s.TelemetryTypeString.Exception:var c=o.data.baseData;c.properties=n(n({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var l={cloudRoleInstance:o.tags[i.keys.cloudRoleInstance],cloudRoleName:o.tags[i.keys.cloudRole]};r.countException(l);break;case s.TelemetryTypeString.Trace:var d=o.data.baseData;d.properties=n(n({},d.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var u={cloudRoleInstance:o.tags[i.keys.cloudRoleInstance],cloudRoleName:o.tags[i.keys.cloudRole],traceSeverityLevel:t.SeverityLevel[d.severity]};r.countTrace(u);break;case s.TelemetryTypeString.Request:var p=o.data.baseData;p.properties=n(n({},p.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var v={cloudRoleInstance:o.tags[i.keys.cloudRoleInstance],cloudRoleName:o.tags[i.keys.cloudRole],operationSynthetic:o.tags[i.keys.operationSyntheticSource],requestSuccess:p.success,requestResultCode:p.responseCode};r.countRequest(p.duration,v);break;case s.TelemetryTypeString.Dependency:var m=o.data.baseData;m.properties=n(n({},m.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var g={cloudRoleInstance:o.tags[i.keys.cloudRoleInstance],cloudRoleName:o.tags[i.keys.cloudRole],operationSynthetic:o.tags[i.keys.operationSyntheticSource],dependencySuccess:m.success,dependencyType:m.type,dependencyTarget:m.target,dependencyResultCode:m.resultCode};r.countDependency(m.duration,g);break}return!0}e.preAggregatedMetricsTelemetryProcessor=a}),Fm=x(e=>{"use strict";var n=e&&e.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=e&&e.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,r,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Lm(),e),t(jm(),e),t(Hm(),e),t(Um(),e)}),Bm=x((e,n)=>{"use strict";var t=e&&e.__awaiter||function(v,m,g,E){function T(O){return O instanceof g?O:new g(function(P){P(O)})}return new(g||(g=Promise))(function(O,P){function A(G){try{j(E.next(G))}catch(q){P(q)}}function M(G){try{j(E.throw(G))}catch(q){P(q)}}function j(G){G.done?O(G.value):T(G.value).then(A,M)}j((E=E.apply(v,m||[])).next())})},r=e&&e.__generator||function(v,m){var g={label:0,sent:function(){if(O[0]&1)throw O[1];return O[1]},trys:[],ops:[]},E,T,O,P;return P={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function A(j){return function(G){return M([j,G])}}function M(j){if(E)throw new TypeError("Generator is already executing.");for(;g;)try{if(E=1,T&&(O=j[0]&2?T.return:j[0]?T.throw||((O=T.return)&&O.call(T),0):T.next)&&!(O=O.call(T,j[1])).done)return O;switch(T=0,O&&(j=[j[0]&2,O.value]),j[0]){case 0:case 1:O=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,T=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(O=g.trys,!(O=O.length>0&&O[O.length-1])&&(j[0]===6||j[0]===2)){g=0;continue}if(j[0]===3&&(!O||j[1]>O[0]&&j[1]<O[3])){g.label=j[1];break}if(j[0]===6&&g.label<O[1]){g.label=O[1],O=j;break}if(O&&g.label<O[2]){g.label=O[2],g.ops.push(j);break}O[2]&&g.ops.pop(),g.trys.pop();continue}j=m.call(v,g)}catch(G){j=[6,G],T=0}finally{E=O=0}if(j[0]&5)throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}},s=require("fs"),a=require("os"),o=require("path"),i=require("zlib"),c=require("child_process"),l=br(),d=Oi(),u=Wr(),p=function(){function v(m,g,E){if(this._redirectedHost=null,this._config=m,this._onSuccess=g,this._onError=E,this._enableDiskRetryMode=!1,this._resendInterval=v.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=v.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=o.join(a.tmpdir(),v.TEMPDIR_PREFIX+this._config.instrumentationKey),!v.OS_PROVIDES_FILE_PROTECTION)if(v.USE_ICACLS){try{v.OS_PROVIDES_FILE_PROTECTION=s.existsSync(v.ICACLS_PATH)}catch{}v.OS_PROVIDES_FILE_PROTECTION||l.warn(v.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else v.OS_PROVIDES_FILE_PROTECTION=!0}return v.prototype.setDiskRetryMode=function(m,g,E){var T=this;this._enableDiskRetryMode=v.OS_PROVIDES_FILE_PROTECTION&&m,typeof g=="number"&&g>=0&&(this._resendInterval=Math.floor(g)),typeof E=="number"&&E>=0&&(this._maxBytesOnDisk=Math.floor(E)),m&&!v.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,l.warn(v.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){T._fileCleanupTask()},v.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},v.prototype.send=function(m,g){return t(this,void 0,void 0,function(){var E,T,O,P,A=this;return r(this,function(M){return m&&(E=this._redirectedHost||this._config.endpointUrl,T={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},O="",m.forEach(function(j){var G=A._stringify(j);typeof G=="string"&&(O+=G+`
`)}),O.length>0&&(O=O.substring(0,O.length-1)),P=Buffer.from?Buffer.from(O):new Buffer(O),i.gzip(P,function(j,G){var q=G;j?(l.warn(j),q=P,T.headers["Content-Length"]=P.length.toString()):(T.headers["Content-Encoding"]="gzip",T.headers["Content-Length"]=G.length.toString()),l.info(v.TAG,T),T[d.disableCollectionRequestOption]=!0;var Y=function(_e){_e.setEncoding("utf-8");var De="";_e.on("data",function(ct){De+=ct}),_e.on("end",function(){if(A._numConsecutiveFailures=0,A._enableDiskRetryMode){if(_e.statusCode===200)A._resendTimer||(A._resendTimer=setTimeout(function(){A._resendTimer=null,A._sendFirstFileOnDisk()},A._resendInterval),A._resendTimer.unref());else if(A._isRetriable(_e.statusCode))try{var ct=JSON.parse(De),ot=[];ct.errors.forEach(function(at){A._isRetriable(at.statusCode)&&ot.push(m[at.index])}),ot.length>0&&A._storeToDisk(ot)}catch{A._storeToDisk(m)}}if(_e.statusCode===307||_e.statusCode===308)if(A._numConsecutiveRedirects++,A._numConsecutiveRedirects<10){var xt=_e.headers.location?_e.headers.location.toString():null;xt&&(A._redirectedHost=xt,A.send(m,g))}else typeof g=="function"&&g("Error sending telemetry because of circular redirects.");else A._numConsecutiveRedirects=0,typeof g=="function"&&g(De),l.info(v.TAG,De),typeof A._onSuccess=="function"&&A._onSuccess(De)})},ne=u.makeRequest(A._config,E,T,Y);ne.on("error",function(_e){if(A._numConsecutiveFailures++,!A._enableDiskRetryMode||A._numConsecutiveFailures>0&&A._numConsecutiveFailures%v.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var De="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";A._enableDiskRetryMode&&(De="Ingestion endpoint could not be reached "+A._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),l.warn(v.TAG,De,u.dumpObj(_e))}else{var De="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";l.info(v.TAG,De,u.dumpObj(_e))}A._onErrorHelper(_e),typeof g=="function"&&(_e&&g(u.dumpObj(_e)),g("Error sending telemetry")),A._enableDiskRetryMode&&A._storeToDisk(m)}),ne.write(q),ne.end()})),[2]})})},v.prototype.saveOnCrash=function(m){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(m))},v.prototype._isRetriable=function(m){return m===206||m===408||m===429||m===439||m===500||m===503},v.prototype._runICACLS=function(m,g){var E=c.spawn(v.ICACLS_PATH,m,{windowsHide:!0});E.on("error",function(T){return g(T)}),E.on("close",function(T,O){return g(T===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+T+")"))})},v.prototype._runICACLSSync=function(m){if(c.spawnSync){var g=c.spawnSync(v.ICACLS_PATH,m,{windowsHide:!0});if(g.error)throw g.error;if(g.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+g.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},v.prototype._getACLIdentity=function(m){if(v.ACL_IDENTITY)return m(null,v.ACL_IDENTITY);var g=c.spawn(v.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),E="";g.stdout.on("data",function(T){return E+=T}),g.on("error",function(T){return m(T,null)}),g.on("close",function(T,O){return v.ACL_IDENTITY=E&&E.trim(),m(T===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+T+")"),v.ACL_IDENTITY)})},v.prototype._getACLIdentitySync=function(){if(v.ACL_IDENTITY)return v.ACL_IDENTITY;if(c.spawnSync){var m=c.spawnSync(v.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(m.error)throw m.error;if(m.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+m.status+")");return v.ACL_IDENTITY=m.stdout&&m.stdout.toString().trim(),v.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},v.prototype._getACLArguments=function(m,g){return[m,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",g+":(OI)(CI)F","/inheritance:r"]},v.prototype._applyACLRules=function(m,g){var E=this;if(!v.USE_ICACLS)return g(null);if(v.ACLED_DIRECTORIES[m]===void 0)v.ACLED_DIRECTORIES[m]=!1,this._getACLIdentity(function(T,O){if(T)return v.ACLED_DIRECTORIES[m]=!1,g(T);E._runICACLS(E._getACLArguments(m,O),function(P){return v.ACLED_DIRECTORIES[m]=!P,g(P)})});else return g(v.ACLED_DIRECTORIES[m]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},v.prototype._applyACLRulesSync=function(m){if(v.USE_ICACLS){if(v.ACLED_DIRECTORIES[m]===void 0){this._runICACLSSync(this._getACLArguments(m,this._getACLIdentitySync())),v.ACLED_DIRECTORIES[m]=!0;return}else if(!v.ACLED_DIRECTORIES[m])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},v.prototype._confirmDirExists=function(m,g){var E=this;s.lstat(m,function(T,O){T&&T.code==="ENOENT"?s.mkdir(m,function(P){P&&P.code!=="EEXIST"?g(P):E._applyACLRules(m,g)}):!T&&O.isDirectory()?E._applyACLRules(m,g):g(T||new Error("Path existed but was not a directory"))})},v.prototype._getShallowDirectorySize=function(m,g){s.readdir(m,function(E,T){if(E)return g(E,-1);var O=null,P=0,A=0;if(T.length===0){g(null,0);return}for(var M=0;M<T.length;M++)s.stat(o.join(m,T[M]),function(j,G){A++,j?O=j:G.isFile()&&(P+=G.size),A===T.length&&(O?g(O,-1):g(O,P))})})},v.prototype._getShallowDirectorySizeSync=function(m){for(var g=s.readdirSync(m),E=0,T=0;T<g.length;T++)E+=s.statSync(o.join(m,g[T])).size;return E},v.prototype._storeToDisk=function(m){var g=this;l.info(v.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(E){if(E){l.warn(v.TAG,"Error while checking/creating directory: "+(E&&E.message)),g._onErrorHelper(E);return}g._getShallowDirectorySize(g._tempDir,function(T,O){if(T||O<0){l.warn(v.TAG,"Error while checking directory size: "+(T&&T.message)),g._onErrorHelper(T);return}else if(O>g._maxBytesOnDisk){l.warn(v.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+O);return}var P=new Date().getTime()+".ai.json",A=o.join(g._tempDir,P);l.info(v.TAG,"saving data to disk at: "+A),s.writeFile(A,g._stringify(m),{mode:384},function(M){return g._onErrorHelper(M)})})})},v.prototype._storeToDiskSync=function(m){try{l.info(v.TAG,"Checking existence of data storage directory: "+this._tempDir),s.existsSync(this._tempDir)||s.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var g=this._getShallowDirectorySizeSync(this._tempDir);if(g>this._maxBytesOnDisk){l.info(v.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+g);return}var E=new Date().getTime()+".ai.json",T=o.join(this._tempDir,E);l.info(v.TAG,"saving data before crash to disk at: "+T),s.writeFileSync(T,m,{mode:384})}catch(O){l.warn(v.TAG,"Error while saving data to disk: "+(O&&O.message)),this._onErrorHelper(O)}},v.prototype._sendFirstFileOnDisk=function(){var m=this;s.exists(this._tempDir,function(g){g&&s.readdir(m._tempDir,function(E,T){if(E)m._onErrorHelper(E);else if(T=T.filter(function(A){return o.basename(A).indexOf(".ai.json")>-1}),T.length>0){var O=T[0],P=o.join(m._tempDir,O);s.readFile(P,function(A,M){A?m._onErrorHelper(A):s.unlink(P,function(j){if(j)m._onErrorHelper(j);else try{var G=JSON.parse(M.toString());m.send(G)}catch(q){l.warn("Failed to read persisted file",q)}})})}})})},v.prototype._onErrorHelper=function(m){typeof this._onError=="function"&&this._onError(m)},v.prototype._stringify=function(m){try{return JSON.stringify(m)}catch(g){l.warn("Failed to serialize payload",g,m)}},v.prototype._fileCleanupTask=function(){var m=this;s.exists(this._tempDir,function(g){g&&s.readdir(m._tempDir,function(E,T){E?m._onErrorHelper(E):(T=T.filter(function(O){return o.basename(O).indexOf(".ai.json")>-1}),T.length>0&&T.forEach(function(O){var P=new Date(parseInt(O.split(".ai.json")[0])),A=new Date(+new Date-v.FILE_RETEMPTION_PERIOD)>P;if(A){var M=o.join(m._tempDir,O);s.unlink(M,function(j){j&&m._onErrorHelper(j)})}}))})})},v.TAG="Sender",v.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",v.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",v.ACLED_DIRECTORIES={},v.ACL_IDENTITY=null,v.WAIT_BETWEEN_RESEND=60*1e3,v.MAX_BYTES_ON_DISK=50*1024*1024,v.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,v.CLEANUP_TIMEOUT=60*60*1e3,v.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,v.TEMPDIR_PREFIX="appInsights-node",v.OS_PROVIDES_FILE_PROTECTION=!1,v.USE_ICACLS=a.type()==="Windows_NT",v}();n.exports=p}),qm=x((e,n)=>{"use strict";var t=Fr(),r=Wr(),s=Zn(),a=function(){function i(){}return i.createEnvelope=function(c,l,d,u,p){var v=null;switch(l){case t.TelemetryType.Trace:v=i.createTraceData(c);break;case t.TelemetryType.Dependency:v=i.createDependencyData(c);break;case t.TelemetryType.Event:v=i.createEventData(c);break;case t.TelemetryType.Exception:v=i.createExceptionData(c);break;case t.TelemetryType.Request:v=i.createRequestData(c);break;case t.TelemetryType.Metric:v=i.createMetricData(c);break;case t.TelemetryType.Availability:v=i.createAvailabilityData(c);break;case t.TelemetryType.PageView:v=i.createPageViewData(c);break}if(d&&t.domainSupportsProperties(v.baseData)){if(v&&v.baseData)if(!v.baseData.properties)v.baseData.properties=d;else for(var m in d)v.baseData.properties[m]||(v.baseData.properties[m]=d[m]);v.baseData.properties=r.validateStringMap(v.baseData.properties)}var g=p&&p.instrumentationKey||"",E=new t.Envelope;return E.data=v,E.iKey=g,E.name="Microsoft.ApplicationInsights."+g.replace(/-/g,"")+"."+v.baseType.substr(0,v.baseType.length-4),E.tags=this.getTags(u,c.tagOverrides),E.time=new Date().toISOString(),E.ver=1,E.sampleRate=p?p.samplingPercentage:100,l===t.TelemetryType.Metric&&(E.sampleRate=100),E},i.createTraceData=function(c){var l=new t.MessageData;l.message=c.message,l.properties=c.properties,isNaN(c.severity)?l.severityLevel=t.SeverityLevel.Information:l.severityLevel=c.severity;var d=new t.Data;return d.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Trace),d.baseData=l,d},i.createDependencyData=function(c){var l=new t.RemoteDependencyData;typeof c.name=="string"&&(l.name=c.name.length>1024?c.name.slice(0,1021)+"...":c.name),l.data=c.data,l.target=c.target,l.duration=r.msToTimeSpan(c.duration),l.success=c.success,l.type=c.dependencyTypeName,l.properties=c.properties,l.resultCode=c.resultCode?c.resultCode+"":"",c.id?l.id=c.id:l.id=r.w3cTraceId();var d=new t.Data;return d.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Dependency),d.baseData=l,d},i.createEventData=function(c){var l=new t.EventData;l.name=c.name,l.properties=c.properties,l.measurements=c.measurements;var d=new t.Data;return d.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Event),d.baseData=l,d},i.createExceptionData=function(c){var l=new t.ExceptionData;l.properties=c.properties,isNaN(c.severity)?l.severityLevel=t.SeverityLevel.Error:l.severityLevel=c.severity,l.measurements=c.measurements,l.exceptions=[];var d=c.exception.stack,u=new t.ExceptionDetails;u.message=c.exception.message,u.typeName=c.exception.name,u.parsedStack=this.parseStack(d),u.hasFullStack=r.isArray(u.parsedStack)&&u.parsedStack.length>0,l.exceptions.push(u);var p=new t.Data;return p.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Exception),p.baseData=l,p},i.createRequestData=function(c){var l=new t.RequestData;c.id?l.id=c.id:l.id=r.w3cTraceId(),l.name=c.name,l.url=c.url,l.source=c.source,l.duration=r.msToTimeSpan(c.duration),l.responseCode=c.resultCode?c.resultCode+"":"",l.success=c.success,l.properties=c.properties;var d=new t.Data;return d.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Request),d.baseData=l,d},i.createMetricData=function(c){var l=new t.MetricData;l.metrics=[];var d=new t.DataPoint;d.count=isNaN(c.count)?1:c.count,d.kind=t.DataPointType.Aggregation,d.max=isNaN(c.max)?c.value:c.max,d.min=isNaN(c.min)?c.value:c.min,d.name=c.name,d.stdDev=isNaN(c.stdDev)?0:c.stdDev,d.value=c.value,l.metrics.push(d),l.properties=c.properties;var u=new t.Data;return u.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Metric),u.baseData=l,u},i.createAvailabilityData=function(c){var l=new t.AvailabilityData;c.id?l.id=c.id:l.id=r.w3cTraceId(),l.name=c.name,l.duration=r.msToTimeSpan(c.duration),l.success=c.success,l.runLocation=c.runLocation,l.message=c.message,l.measurements=c.measurements,l.properties=c.properties;var d=new t.Data;return d.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Availability),d.baseData=l,d},i.createPageViewData=function(c){var l=new t.PageViewData;l.name=c.name,l.duration=r.msToTimeSpan(c.duration),l.url=c.url,l.measurements=c.measurements,l.properties=c.properties;var d=new t.Data;return d.baseType=t.telemetryTypeToBaseType(t.TelemetryType.PageView),d.baseData=l,d},i.getTags=function(c,l){var d=s.CorrelationContextManager.getCurrentContext(),u={};if(c&&c.tags)for(var p in c.tags)u[p]=c.tags[p];if(l)for(var p in l)u[p]=l[p];return d&&(u[c.keys.operationId]=u[c.keys.operationId]||d.operation.id,u[c.keys.operationName]=u[c.keys.operationName]||d.operation.name,u[c.keys.operationParentId]=u[c.keys.operationParentId]||d.operation.parentId),u},i.parseStack=function(c){var l=void 0;if(typeof c=="string"){var d=c.split(`
`);l=[];for(var u=0,p=0,v=0;v<=d.length;v++){var m=d[v];if(o.regex.test(m)){var g=new o(d[v],u++);p+=g.sizeInBytes,l.push(g)}}var E=32*1024;if(p>E)for(var T=0,O=l.length-1,P=0,A=T,M=O;T<O;){var j=l[T].sizeInBytes,G=l[O].sizeInBytes;if(P+=j+G,P>E){var q=M-A+1;l.splice(A,q);break}A=T,M=O,T++,O--}}return l},i}(),o=function(){function i(c,l){this.sizeInBytes=0,this.level=l,this.method="<no_method>",this.assembly=r.trim(c);var d=c.match(i.regex);d&&d.length>=5&&(this.method=r.trim(d[2])||this.method,this.fileName=r.trim(d[4])||"<no_filename>",this.line=parseInt(d[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=i.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return i.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,i.baseSize=58,i}();n.exports=a}),Gm=x((e,n)=>{"use strict";var t=require("url"),r=kl(),s=ho(),a=Fr(),o=km(),i=Fm(),c=Zn(),l=Bm(),d=Wr(),u=br(),p=qm(),v=function(){function m(g){this._telemetryProcessors=[],this._enableAzureProperties=!1;var E=new r(g);this.config=E,this.context=new s,this.commonProperties={};var T=new l(this.config);this.channel=new o(function(){return E.disableAppInsights},function(){return E.maxBatchSize},function(){return E.maxBatchIntervalMs},T)}return m.prototype.trackAvailability=function(g){this.track(g,a.TelemetryType.Availability)},m.prototype.trackPageView=function(g){this.track(g,a.TelemetryType.PageView)},m.prototype.trackTrace=function(g){this.track(g,a.TelemetryType.Trace)},m.prototype.trackMetric=function(g){this.track(g,a.TelemetryType.Metric)},m.prototype.trackException=function(g){g&&g.exception&&!d.isError(g.exception)&&(g.exception=new Error(g.exception.toString())),this.track(g,a.TelemetryType.Exception)},m.prototype.trackEvent=function(g){this.track(g,a.TelemetryType.Event)},m.prototype.trackRequest=function(g){this.track(g,a.TelemetryType.Request)},m.prototype.trackDependency=function(g){g&&!g.target&&g.data&&(g.target=t.parse(g.data).host),this.track(g,a.TelemetryType.Dependency)},m.prototype.flush=function(g){this.channel.triggerSend(g?!!g.isAppCrashing:!1,g?g.callback:void 0)},m.prototype.track=function(g,E){if(g&&a.telemetryTypeToBaseType(E)){var T=p.createEnvelope(g,E,this.commonProperties,this.context,this.config);g.time&&(T.time=g.time.toISOString()),this._enableAzureProperties&&i.azureRoleEnvironmentTelemetryProcessor(T,this.context);var O=this.runTelemetryProcessors(T,g.contextObjects);O=O&&i.samplingTelemetryProcessor(T,{correlationContext:c.CorrelationContextManager.getCurrentContext()}),i.preAggregatedMetricsTelemetryProcessor(T,this.context),O&&(i.performanceMetricsTelemetryProcessor(T,this.quickPulseClient),this.channel.send(T))}else u.warn("track() requires telemetry object and telemetryType to be specified.")},m.prototype.setAutoPopulateAzureProperties=function(g){this._enableAzureProperties=g},m.prototype.addTelemetryProcessor=function(g){this._telemetryProcessors.push(g)},m.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},m.prototype.runTelemetryProcessors=function(g,E){var T=!0,O=this._telemetryProcessors.length;if(O===0)return T;E=E||{},E.correlationContext=c.CorrelationContextManager.getCurrentContext();for(var P=0;P<O;++P)try{var A=this._telemetryProcessors[P];if(A&&A.apply(null,[g,E])===!1){T=!1;break}}catch(M){T=!0,u.warn("One of telemetry processors failed, telemetry item will be sent.",M,g)}return T&&(g&&g.tags&&(g.tags=d.validateStringMap(g.tags)),g&&g.data&&g.data.baseData&&g.data.baseData.properties&&(g.data.baseData.properties=d.validateStringMap(g.data.baseData.properties))),T},m}();n.exports=v}),Vm=x((e,n)=>{"use strict";var t=e&&e.__extends||function(){var c=function(l,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(u[v]=p[v])},c(l,d)};return function(l,d){c(l,d);function u(){this.constructor=l}l.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}(),r=Gm(),s=Ml(),a=Oi(),o=br(),i=function(c){t(l,c);function l(){return c!==null&&c.apply(this,arguments)||this}return l.prototype.trackNodeHttpRequestSync=function(d){d&&d.request&&d.response&&d.duration?s.trackRequestSync(this,d):o.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},l.prototype.trackNodeHttpRequest=function(d){(d.duration||d.error)&&o.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),d&&d.request&&d.response?s.trackRequest(this,d):o.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},l.prototype.trackNodeHttpDependency=function(d){d&&d.request?a.trackRequest(this,d):o.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},l}(r);n.exports=i}),zm=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Wm=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.Configuration=e.wrapWithCorrelationContext=e.startOperation=e.getCorrelationContext=e.start=e.setup=e.liveMetricsClient=e.defaultClient=e.DistributedTracingModes=void 0;var n=Zn(),t=gm(),r=ym(),s=us(),a=Nl(),o=Pm(),i=Oi(),c=Ml(),l=Yn(),d=br(),u=xm(),p=Mm();e.TelemetryClient=Vm(),e.Contracts=Fr(),e.azureFunctionsTypes=zm();var v;(function(Ae){Ae[Ae.AI=0]="AI",Ae[Ae.AI_AND_W3C=1]="AI_AND_W3C"})(v=e.DistributedTracingModes||(e.DistributedTracingModes={}));var m=!0,g=!1,E=!0,T=!0,O=!0,P=!1,A=!0,M=!0,j=!0,G=!0,q,Y=!1,ne=!0,_e,De=void 0,ct=void 0,ot,xt,at,oe,ge,le,Ue,Q,Ee=!1,se;function We(Ae){return e.defaultClient?d.info("The default client is already setup"):(e.defaultClient=new e.TelemetryClient(Ae),ot=new t(e.defaultClient),xt=new r(e.defaultClient),at=new s(e.defaultClient),oe=new a(e.defaultClient),ge=new o(e.defaultClient),Ue=new c(e.defaultClient),Q=new i(e.defaultClient),le||(le=new p.AutoCollectNativePerformance(e.defaultClient))),e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(j,De,ct),ve}e.setup=We;function rt(){return e.defaultClient?(Ee=!0,ot.enable(m,g),xt.enable(E),at.enable(T),oe.enable(O),ge.enable(P,e.defaultClient.config),le.enable(ne,_e),Ue.useAutoCorrelation(G,q),Ue.enable(A),Q.enable(M),e.liveMetricsClient&&Y&&e.liveMetricsClient.enable(Y)):d.warn("Start cannot be called before setup"),ve}e.start=rt;function $(){return G?n.CorrelationContextManager.getCurrentContext():null}e.getCorrelationContext=$;function ee(Ae,Ne){return n.CorrelationContextManager.startOperation(Ae,Ne)}e.startOperation=ee;function re(Ae,Ne){return n.CorrelationContextManager.wrapCallback(Ae,Ne)}e.wrapWithCorrelationContext=re;var ve=function(){function Ae(){}return Ae.setDistributedTracingMode=function(Ne){return l.w3cEnabled=Ne===v.AI_AND_W3C,Ae},Ae.setAutoCollectConsole=function(Ne,Xe){return Xe===void 0&&(Xe=!1),m=Ne,g=Xe,Ee&&ot.enable(Ne,Xe),Ae},Ae.setAutoCollectExceptions=function(Ne){return E=Ne,Ee&&xt.enable(Ne),Ae},Ae.setAutoCollectPerformance=function(Ne,Xe){Xe===void 0&&(Xe=!0),T=Ne;var Ot=p.AutoCollectNativePerformance.parseEnabled(Xe);return ne=Ot.isEnabled,_e=Ot.disabledMetrics,Ee&&(at.enable(Ne),le.enable(Ot.isEnabled,Ot.disabledMetrics)),Ae},Ae.setAutoCollectPreAggregatedMetrics=function(Ne){return O=Ne,Ee&&oe.enable(Ne),Ae},Ae.setAutoCollectHeartbeat=function(Ne){return P=Ne,Ee&&ge.enable(Ne,e.defaultClient.config),Ae},Ae.setAutoCollectRequests=function(Ne){return A=Ne,Ee&&Ue.enable(Ne),Ae},Ae.setAutoCollectDependencies=function(Ne){return M=Ne,Ee&&Q.enable(Ne),Ae},Ae.setAutoDependencyCorrelation=function(Ne,Xe){return G=Ne,q=Xe,Ee&&Ue.useAutoCorrelation(Ne,Xe),Ae},Ae.setUseDiskRetryCaching=function(Ne,Xe,Ot){return j=Ne,De=Xe,ct=Ot,e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(Ne,Xe,Ot),Ae},Ae.setInternalLogging=function(Ne,Xe){return Ne===void 0&&(Ne=!1),Xe===void 0&&(Xe=!0),d.enableDebug=Ne,d.disableWarnings=!Xe,Ae},Ae.setSendLiveMetrics=function(Ne){return Ne===void 0&&(Ne=!1),e.defaultClient?(!e.liveMetricsClient&&Ne?(e.liveMetricsClient=new u(e.defaultClient.config,null),se=new s(e.liveMetricsClient,1e3,!0),e.liveMetricsClient.addCollector(se),e.defaultClient.quickPulseClient=e.liveMetricsClient):e.liveMetricsClient&&e.liveMetricsClient.enable(Ne),Y=Ne,Ae):(d.warn("Live metrics client cannot be setup without the default client"),Ae)},Ae.start=rt,Ae}();e.Configuration=ve;function Ve(){l.w3cEnabled=!0,e.defaultClient=null,Ee=!1,ot&&ot.dispose(),xt&&xt.dispose(),at&&at.dispose(),oe&&oe.dispose(),ge&&ge.dispose(),le&&le.dispose(),Ue&&Ue.dispose(),Q&&Q.dispose(),e.liveMetricsClient&&(e.liveMetricsClient.enable(!1),Y=!1,e.liveMetricsClient=void 0)}e.dispose=Ve}),Ll={};wp(Ll,{default:()=>tg});jl.exports=Ip(Ll);var Za=lo(require("os")),Sn=lo(require("vscode")),$m=lo(require("https")),Zr=class{constructor(e){this.vscodeAPI=e}getTelemetryLevel(){let e="telemetry",n="enableTelemetry";try{let t=this.vscodeAPI.env.telemetryConfiguration;return t.isUsageEnabled&&t.isErrorsEnabled&&t.isCrashEnabled?"on":t.isErrorsEnabled&&t.isCrashEnabled?"error":"off"}catch{return this.vscodeAPI.env.isTelemetryEnabled!==void 0?this.vscodeAPI.env.isTelemetryEnabled?"on":"off":this.vscodeAPI.workspace.getConfiguration(e).get(n)?"on":"off"}}static applyReplacements(e,n){for(let t of Object.keys(e))for(let r of n)r.lookup.test(t)&&(r.replacementString!==void 0?e[t]=r.replacementString:delete e[t])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getInstance(e){return Zr._instance||(Zr._instance=new Zr(e)),Zr._instance}},Km=class{constructor(e,n,t,r,s,a){this.extensionId=e,this.extensionVersion=n,this.telemetryAppender=t,this.osShim=r,this.vscodeAPI=s,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!a,this.updateUserOptStatus(),s.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(s.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(s.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(s.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let e=Zr.getInstance(this.vscodeAPI).getTelemetryLevel();this.userOptIn=e==="on",this.errorOptIn=e==="error"||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let n="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(t=>{e.indexOf(`${t}`)===0&&(n=t)}),n}get extension(){return this._extension===void 0&&(this._extension=this.vscodeAPI.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,n){if(e===null||typeof e!="object"||typeof n!="function")return e;let t={};for(let r in e)t[r]=n(r,e[r]);return t}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?!(this.vscodeAPI.env.remoteName&&this.cleanRemoteName(this.vscodeAPI.env.remoteName)==="other"):!0}getCommonProperties(){let e={};if(e["common.os"]=this.osShim.platform,e["common.nodeArch"]=this.osShim.architecture,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,this.vscodeAPI&&this.vscodeAPI.env){switch(e["common.vscodemachineid"]=this.vscodeAPI.env.machineId,e["common.vscodesessionid"]=this.vscodeAPI.env.sessionId,e["common.vscodeversion"]=this.vscodeAPI.version,e["common.isnewappinstall"]=this.vscodeAPI.env.isNewAppInstall?this.vscodeAPI.env.isNewAppInstall.toString():"false",e["common.product"]=this.vscodeAPI.env.appHost,this.vscodeAPI.env.uiKind){case this.vscodeAPI.UIKind.Web:e["common.uikind"]="web";break;case this.vscodeAPI.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(this.vscodeAPI.env.remoteName)}return e}anonymizeFilePaths(e,n){let t;if(e==null)return"";let r=[];this.vscodeAPI.env.appRoot!==""&&r.push(new RegExp(this.vscodeAPI.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&r.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let s=e;if(n){let a=[];for(let l of r)for(;(t=l.exec(e))&&t;)a.push([t.index,l.lastIndex]);let o=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,i=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,c=0;for(s="";(t=i.exec(e))&&t;)t[0]&&!o.test(t[0])&&a.every(([l,d])=>t.index<l||t.index>=d)&&(s+=e.substring(c,t.index)+"<REDACTED: user-file-path>",c=i.lastIndex);c<e.length&&(s+=e.substr(c))}for(let a of r)s=s.replace(a,"");return s}removePropertiesWithPossibleUserInfo(e){if(typeof e!="object")return;let n={};for(let t of Object.keys(e)){let r=e[t];if(!r)continue;let s=/@[a-zA-Z0-9-.]+/,a=/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/,o=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;a.test(r.toLowerCase())?n[t]="<REDACTED: secret>":s.test(r)?n[t]="<REDACTED: email>":o.test(r)?n[t]="<REDACTED: token>":n[t]=r}return n}get telemetryLevel(){switch(Zr.getInstance(this.vscodeAPI).getTelemetryLevel()){case"on":return"all";case"error":return"error";case"off":return"off"}}internalSendTelemetryEvent(e,n,t,r,s){if((this.userOptIn||s)&&e!==""){if(n=Ln(Ln({},n),this.getCommonProperties()),r){let a=this.cloneAndChange(n,(o,i)=>this.anonymizeFilePaths(i,this.firstParty));n=this.removePropertiesWithPossibleUserInfo(a)}n=n??{},t=t??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:n,measurements:t})}}sendTelemetryEvent(e,n,t){this.internalSendTelemetryEvent(e,n,t,!0,!1)}sendRawTelemetryEvent(e,n,t){this.internalSendTelemetryEvent(e,n,t,!1,!1)}sendDangerousTelemetryEvent(e,n,t,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryEvent(e,n,t,r,!0)}internalSendTelemetryErrorEvent(e,n,t,r,s){if((this.shouldSendErrorTelemetry()||s)&&e!==""){if(n=Ln(Ln({},n),this.getCommonProperties()),r){let a=this.cloneAndChange(n,(o,i)=>this.anonymizeFilePaths(i,this.firstParty));n=this.removePropertiesWithPossibleUserInfo(a)}n=n??{},t=t??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:n,measurements:t})}}sendTelemetryErrorEvent(e,n,t){this.internalSendTelemetryErrorEvent(e,n,t,!0,!1)}sendDangerousTelemetryErrorEvent(e,n,t,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryErrorEvent(e,n,t,r,!0)}internalSendTelemetryException(e,n,t,r,s){if((this.shouldSendErrorTelemetry()||s)&&e){if(n=Ln(Ln({},n),this.getCommonProperties()),r){let a=this.cloneAndChange(n,(o,i)=>this.anonymizeFilePaths(i,this.firstParty));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),n=this.removePropertiesWithPossibleUserInfo(a)}n=n??{},t=t??{},this.telemetryAppender.logException(e,{properties:n,measurements:t})}}sendTelemetryException(e,n,t){this.internalSendTelemetryException(e,n,t,!0,!1)}sendDangerousTelemetryException(e,n,t,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryException(e,n,t,r,!0)}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(e=>e.dispose()))}},Qm=class{constructor(e,n){this._instantiationStatus=0,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=n,this._key=e}logEvent(e,n){if(!this._telemetryClient){this._instantiationStatus!==2&&this._eventQueue.push({eventName:e,data:n});return}this._telemetryClient.logEvent(e,n)}logException(e,n){if(!this._telemetryClient){this._instantiationStatus!==2&&this._exceptionQueue.push({exception:e,data:n});return}this._telemetryClient.logException(e,n)}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:n})=>this.logEvent(e,n)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:n})=>this.logException(e,n)),this._exceptionQueue=[]}instantiateAppender(){this._instantiationStatus===0&&(this._instantiationStatus=1,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=2,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=2}))}},Xm=async(e,n,t)=>{let r=await Promise.resolve().then(()=>ar(Ya())),s=await Promise.resolve().then(()=>ar(Vu())),a=new r.AppInsightsCore,o=new s.PostChannel,i={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[o]]};if(t){i.extensionConfig={};let l={alwaysUseXhrOverride:!0,httpXHROverride:t};i.extensionConfig[o.identifier]=l}let c=n.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(i,[]),a.addTelemetryInitializer(l=>{!c||(l.ext=l.ext??{},l.ext.utc=l.ext.utc??{},l.ext.utc.flags=8462029)}),a},Ym=async(e,n,t)=>{let r=await Xm(e,n,t);return{logEvent:(s,a)=>{try{r?.track({name:s,baseData:{name:s,properties:a?.properties,measurements:a?.measurements}})}catch(o){throw new Error(`Failed to log event to app insights!
`+o.message)}},logException:(s,a)=>{throw new Error("1DS SDK does not support logging exceptions, please use logEvent for exception tracking")},flush:async()=>{try{r?.unload()}catch(s){throw new Error(`Failed to flush app insights!
`+s.message)}}}},Zm=async(e,n)=>{let t;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let r=await Promise.resolve().then(()=>lo(Wm()));r.defaultClient?(t=new r.TelemetryClient(e),t.channel.setUseDiskRetryCaching(!0)):(r.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),t=r.defaultClient),Sn&&Sn.env&&(t.context.tags[t.context.keys.userId]=Sn.env.machineId,t.context.tags[t.context.keys.sessionId]=Sn.env.sessionId,t.context.tags[t.context.keys.cloudRole]=Sn.env.appName,t.context.tags[t.context.keys.cloudRoleInstance]=Sn.env.appName),e&&e.indexOf("AIF-")===0&&(t.config.endpointUrl="https://mobile.events.data.microsoft.com/collect/v1")}catch(r){return Promise.reject(`Failed to initialize app insights!
`+r.message)}return n!=null&&n.length&&Jm(t,n),{logEvent:(r,s)=>{try{t?.trackEvent({name:r,properties:s?.properties,measurements:s?.measurements})}catch(a){throw new Error(`Failed to log event to app insights!
`+a.message)}},logException:(r,s)=>{try{t?.trackException({exception:r,properties:s?.properties,measurements:s?.measurements})}catch(a){throw new Error(`Failed to log exception to app insights!
`+a.message)}},flush:async()=>{try{t?.flush()}catch(r){throw new Error(`Failed to flush app insights!
`+r.message)}}}};function Jm(e,n){e.addTelemetryProcessor(t=>(Array.isArray(t.tags)?t.tags.forEach(r=>Zr.applyReplacements(r,n)):t.tags&&Zr.applyReplacements(t.tags,n),t.data.baseData&&Zr.applyReplacements(t.data.baseData,n),!0))}function eg(){return{sendPOST:(e,n)=>{let t={method:"POST",headers:Tp(Ln({},e.headers),{"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)})};try{let r=$m.request(e.urlString,t,s=>{s.on("data",function(a){n(s.statusCode??200,s.headers,a.toString())}),s.on("error",function(){n(0,{})})});r.write(e.data),r.end()}catch{n(0,{})}}}}var tg=class extends Km{constructor(e,n,t,r,s){let a=i=>Zm(i,s);Zr.shouldUseOneDataSystemSDK(t)&&(a=i=>Ym(i,Sn,eg()));let o=new Qm(t,a);t&&(t.indexOf("AIF-")===0||Zr.shouldUseOneDataSystemSDK(t))&&(r=!0),super(e,n,o,{release:Za.release(),platform:Za.platform(),architecture:Za.arch()},Sn,r)}}});var ds=qt(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.ConstantBackoff=void 0;var ls=class{constructor(n){this.interval=n}next(){return rg(this.interval)}};vo.ConstantBackoff=ls;var rg=e=>({duration:e,next(){return this}})});var Ul=qt(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.DelegateBackoff=void 0;var fs=class{constructor(n){this.fn=n}next(n){return ps(this.fn).next(n)}};mo.DelegateBackoff=fs;var ps=(e,n,t=0)=>({duration:t,next(r){let s=e(r,n);return typeof s=="number"?ps(e,n,s):ps(e,s.state,s.delay)}})});var hs=qt($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.decorrelatedJitterGenerator=$r.halfJitterGenerator=$r.fullJitterGenerator=$r.noJitterGenerator=void 0;var ng=(e=0,n)=>[Math.min(n.maxDelay,n.initialDelay*2**e),e+1];$r.noJitterGenerator=ng;var ig=(e,n)=>{let[t,r]=(0,$r.noJitterGenerator)(e,n);return[Math.floor(Math.random()*t),r]};$r.fullJitterGenerator=ig;var og=(e,n)=>{let[t,r]=(0,$r.noJitterGenerator)(e,n);return[Math.floor((t+Math.random()*t)/2),r]};$r.halfJitterGenerator=og;var ag=4,sg=1/1.4,cg=(e,n)=>{let[t,r]=e||[0,0],s=t+Math.random(),a=Math.pow(n.exponent,s)*Math.tanh(Math.sqrt(ag*s)),o=Math.max(0,a-r);return[Math.min(o*sg*n.initialDelay,n.maxDelay),[t+1,a]]};$r.decorrelatedJitterGenerator=cg});var ql=qt(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.ExponentialBackoff=void 0;var ug=hs(),Fl={generator:ug.decorrelatedJitterGenerator,maxDelay:3e4,exponent:2,initialDelay:128},vs=class{constructor(n){this.options=n?{...Fl,...n}:Fl}next(){return Bl(this.options).next(void 0)}};go.ExponentialBackoff=vs;var Bl=(e,n,t=0,r=-1)=>({duration:t,next(){let[s,a]=e.generator(n,e);return Bl(e,a,s,r+1)}})});var Vl=qt(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.IterableBackoff=void 0;var ms=class{constructor(n){this.durations=n}next(){return Gl(this.durations,0)}};yo.IterableBackoff=ms;var Gl=(e,n)=>({duration:e[n],next(){return n===e.length-1?this:Gl(e,n+1)}})});var gs=qt(en=>{"use strict";var lg=en&&en.__createBinding||(Object.create?function(e,n,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(n,t);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,r,s)}:function(e,n,t,r){r===void 0&&(r=t),e[r]=n[t]}),Pi=en&&en.__exportStar||function(e,n){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(n,t)&&lg(n,e,t)};Object.defineProperty(en,"__esModule",{value:!0});Pi(ds(),en);Pi(Ul(),en);Pi(ql(),en);Pi(hs(),en);Pi(Vl(),en)});var Eo=qt(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.TaskCancelledError=void 0;var ys=class extends Error{constructor(n="Operation cancelled"){super(n),this.message=n,this.isTaskCancelledError=!0}};_o.TaskCancelledError=ys});var In=qt(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.MemorizingEventEmitter=Pr.EventEmitter=Pr.onAbort=Pr.Event=Pr.noopDisposable=void 0;var zl=Eo();Pr.noopDisposable={dispose:()=>{}};var dg;(function(e){e.once=(n,t)=>{let r=!1,s;return s=n(a=>{t(a),s?s.dispose():r=!0}),r?(s.dispose(),Pr.noopDisposable):s},e.toPromise=(n,t)=>t?t.aborted?Promise.reject(new zl.TaskCancelledError):new Promise((r,s)=>{let a=(0,Pr.onAbort)(t)(()=>{o.dispose(),s(new zl.TaskCancelledError)}),o=e.once(n,i=>{a.dispose(),r(i)})}):new Promise(r=>e.once(n,r))})(dg=Pr.Event||(Pr.Event={}));var fg=e=>{let n=new Es;if(e.aborted)return n.emit(),n.addListener;let t=()=>{n.emit(),e.removeEventListener("abort",t)};return e.addEventListener("abort",t),n.addListener};Pr.onAbort=fg;var Ci=class{constructor(){this.addListener=n=>this.addListenerInner(n)}get size(){return this.listeners?typeof this.listeners=="function"?1:this.listeners.length:0}emit(n){if(this.listeners)if(typeof this.listeners=="function")this.listeners(n);else for(let t of this.listeners)t(n)}addListenerInner(n){return this.listeners?typeof this.listeners=="function"?this.listeners=[this.listeners,n]:this.listeners.push(n):this.listeners=n,{dispose:()=>this.removeListener(n)}}removeListener(n){if(!this.listeners)return;if(typeof this.listeners=="function"){this.listeners===n&&(this.listeners=void 0);return}let t=this.listeners.indexOf(n);t!==-1&&(this.listeners.length===2?this.listeners=t===0?this.listeners[1]:this.listeners[0]:this.listeners=this.listeners.slice(0,t).concat(this.listeners.slice(t+1)))}};Pr.EventEmitter=Ci;var _s=class extends Ci{constructor(){super(...arguments),this.addListener=n=>{let t=this.addListenerInner(n);return this.lastValue&&n(this.lastValue.value),t}}get hasEmitted(){return!!this.lastValue}emit(n){this.lastValue={value:n},super.emit(n)}};Pr.MemorizingEventEmitter=_s;var Es=class extends Ci{constructor(){super(...arguments),this.addListener=n=>this.lastValue?(n(this.lastValue.value),Pr.noopDisposable):this.addListenerInner(n)}emit(n){this.lastValue={value:n},super.emit(n),this.listeners=void 0}}});var jn=qt(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.deriveAbortController=fn.abortedSignal=fn.neverAbortedSignal=void 0;var pg=In();fn.neverAbortedSignal=new AbortController().signal;var Wl=new AbortController;Wl.abort();fn.abortedSignal=Wl.signal;var hg=e=>{let n=new AbortController;if(!e)return n;if(e.aborted&&n.abort(),e!==fn.neverAbortedSignal){let t=new WeakRef(n);(0,pg.onAbort)(e)(()=>t.deref()?.abort())}return n};fn.deriveAbortController=hg});var ei=qt(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.ExecuteWrapper=Jn.returnOrThrow=void 0;var $l=In(),vg=e=>{if("error"in e)throw e.error;return"success"in e?e.success:e.value};Jn.returnOrThrow=vg;var mg=()=>{if(typeof performance<"u"){let e=performance.now();return()=>performance.now()-e}else{let e=process.hrtime.bigint();return()=>Number(process.hrtime.bigint()-e)/1e6}},bs=class e{constructor(n=()=>!1,t=()=>!1){this.errorFilter=n,this.resultFilter=t,this.successEmitter=new $l.EventEmitter,this.failureEmitter=new $l.EventEmitter,this.onSuccess=this.successEmitter.addListener,this.onFailure=this.failureEmitter.addListener}clone(){return new e(this.errorFilter,this.resultFilter)}async invoke(n,...t){let r=this.successEmitter.size||this.failureEmitter.size?mg():null;try{let s=await n(...t);return this.resultFilter(s)?(r&&this.failureEmitter.emit({duration:r(),handled:!0,reason:{value:s}}),{value:s}):(r&&this.successEmitter.emit({duration:r()}),{success:s})}catch(s){let a=s,o=this.errorFilter(a);if(r&&this.failureEmitter.emit({duration:r(),handled:o,reason:{error:a}}),!o)throw a;return{error:a}}}};Jn.ExecuteWrapper=bs});var Ts=qt(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.BrokenCircuitError=void 0;var Ss=class extends Error{constructor(n="Execution prevented because the circuit breaker is open"){super(n),this.isBrokenCircuitError=!0}};bo.BrokenCircuitError=Ss});var Is=qt(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.BulkheadRejectedError=void 0;var ws=class extends Error{constructor(n,t){super(`Bulkhead capacity exceeded (0/${n} execution slots, 0/${t} available)`),this.isBulkheadRejectedError=!0}};So.BulkheadRejectedError=ws});var Os=qt(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.IsolatedCircuitError=void 0;var gg=Ts(),As=class extends gg.BrokenCircuitError{constructor(){super("Execution prevented because the circuit breaker is open"),this.isIsolatedCircuitError=!0}};To.IsolatedCircuitError=As});var Io=qt(Er=>{"use strict";var yg=Er&&Er.__createBinding||(Object.create?function(e,n,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(n,t);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,r,s)}:function(e,n,t,r){r===void 0&&(r=t),e[r]=n[t]}),wo=Er&&Er.__exportStar||function(e,n){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(n,t)&&yg(n,e,t)};Object.defineProperty(Er,"__esModule",{value:!0});Er.isTaskCancelledError=Er.isIsolatedCircuitError=Er.isBulkheadRejectedError=Er.isBrokenCircuitError=void 0;wo(Ts(),Er);wo(Is(),Er);wo(Os(),Er);wo(Eo(),Er);var _g=e=>!!e&&e instanceof Error&&"isBrokenCircuitError"in e;Er.isBrokenCircuitError=_g;var Eg=e=>!!e&&e instanceof Error&&"isBulkheadRejectedError"in e;Er.isBulkheadRejectedError=Eg;var bg=e=>!!e&&e instanceof Error&&"isBulkheadRejectedError"in e;Er.isIsolatedCircuitError=bg;var Sg=e=>!!e&&e instanceof Error&&"isBulkheadRejectedError"in e;Er.isTaskCancelledError=Sg});var Oo=qt(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.CircuitBreakerPolicy=Hn.CircuitState=void 0;var Tg=jn(),Ao=In(),Kl=ei(),Ql=Io(),wg=Os(),rr;(function(e){e[e.Closed=0]="Closed",e[e.Open=1]="Open",e[e.HalfOpen=2]="HalfOpen",e[e.Isolated=3]="Isolated"})(rr=Hn.CircuitState||(Hn.CircuitState={}));var Ps=class{constructor(n,t){this.options=n,this.executor=t,this.breakEmitter=new Ao.EventEmitter,this.resetEmitter=new Ao.EventEmitter,this.halfOpenEmitter=new Ao.EventEmitter,this.stateChangeEmitter=new Ao.EventEmitter,this.innerState={value:rr.Closed},this.onBreak=this.breakEmitter.addListener,this.onReset=this.resetEmitter.addListener,this.onHalfOpen=this.halfOpenEmitter.addListener,this.onStateChange=this.stateChangeEmitter.addListener,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure}get state(){return this.innerState.value}get lastFailure(){return this.innerLastFailure}isolate(){this.innerState.value!==rr.Isolated&&(this.innerState={value:rr.Isolated,counters:0},this.breakEmitter.emit({isolated:!0}),this.stateChangeEmitter.emit(rr.Isolated)),this.innerState.counters++;let n=!1;return{dispose:()=>{n||(n=!0,this.innerState.value===rr.Isolated&&!--this.innerState.counters&&(this.innerState={value:rr.Closed},this.resetEmitter.emit(),this.stateChangeEmitter.emit(rr.Closed)))}}}async execute(n,t=Tg.neverAbortedSignal){let r=this.innerState;switch(r.value){case rr.Closed:let s=await this.executor.invoke(n,{signal:t});return"success"in s?this.options.breaker.success(r.value):(this.innerLastFailure=s,this.options.breaker.failure(r.value)&&this.open(s)),(0,Kl.returnOrThrow)(s);case rr.HalfOpen:if(await r.test.catch(()=>{}),this.state===rr.Closed&&t.aborted)throw new Ql.TaskCancelledError;return this.execute(n);case rr.Open:if(Date.now()-r.openedAt<this.options.halfOpenAfter)throw new Ql.BrokenCircuitError;let a=this.halfOpen(n,t);return this.innerState={value:rr.HalfOpen,test:a},this.stateChangeEmitter.emit(rr.HalfOpen),a;case rr.Isolated:throw new wg.IsolatedCircuitError;default:throw new Error(`Unexpected circuit state ${r}`)}}async halfOpen(n,t){this.halfOpenEmitter.emit();try{let r=await this.executor.invoke(n,{signal:t});return"success"in r?(this.options.breaker.success(rr.HalfOpen),this.close()):(this.innerLastFailure=r,this.options.breaker.failure(rr.HalfOpen),this.open(r)),(0,Kl.returnOrThrow)(r)}catch(r){throw this.close(),r}}open(n){this.state===rr.Isolated||this.state===rr.Open||(this.innerState={value:rr.Open,openedAt:Date.now()},this.breakEmitter.emit(n),this.stateChangeEmitter.emit(rr.Open))}close(){this.state===rr.HalfOpen&&(this.innerState={value:rr.Closed},this.resetEmitter.emit(),this.stateChangeEmitter.emit(rr.Closed))}};Hn.CircuitBreakerPolicy=Ps});var Yl=qt(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.SamplingBreaker=void 0;var Xl=Oo(),Cs=class{constructor({threshold:n,duration:t,minimumRps:r}){if(this.windows=[],this.currentWindow=0,this.currentFailures=0,this.currentSuccesses=0,n<=0||n>=1)throw new RangeError(`SamplingBreaker threshold should be between (0, 1), got ${n}`);this.threshold=n;let s=Math.max(5,Math.ceil(t/1e3));for(let a=0;a<s;a++)this.windows.push({startedAt:0,failures:0,successes:0});this.windowSize=Math.round(t/s),this.duration=this.windowSize*s,r?this.minimumRpms=r/1e3:this.minimumRpms=5/(n*1e3)}success(n){n===Xl.CircuitState.HalfOpen&&this.resetWindows(),this.push(!0)}failure(n){if(this.push(!1),n!==Xl.CircuitState.Closed)return!0;let t=this.currentSuccesses+this.currentFailures;return t<this.duration*this.minimumRpms?!1:this.currentFailures>this.threshold*t}resetWindows(){this.currentFailures=0,this.currentSuccesses=0;for(let n of this.windows)n.failures=0,n.successes=0,n.startedAt=0}rotateWindow(n){let t=(this.currentWindow+1)%this.windows.length;this.currentFailures-=this.windows[t].failures,this.currentSuccesses-=this.windows[t].successes;let r=this.windows[t]={failures:0,successes:0,startedAt:n};return this.currentWindow=t,r}push(n){let t=Date.now(),r=this.windows[this.currentWindow];t-r.startedAt>=this.windowSize&&(r=this.rotateWindow(t)),n?(r.successes++,this.currentSuccesses++):(r.failures++,this.currentFailures++)}};Po.SamplingBreaker=Cs});var Zl=qt(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.ConsecutiveBreaker=void 0;var Ds=class{constructor(n){this.threshold=n,this.count=0}success(){this.count=0}failure(){return++this.count>=this.threshold}};Co.ConsecutiveBreaker=Ds});var ed=qt(An=>{"use strict";var Ig=An&&An.__createBinding||(Object.create?function(e,n,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(n,t);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,r,s)}:function(e,n,t,r){r===void 0&&(r=t),e[r]=n[t]}),Jl=An&&An.__exportStar||function(e,n){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(n,t)&&Ig(n,e,t)};Object.defineProperty(An,"__esModule",{value:!0});Jl(Yl(),An);Jl(Zl(),An)});var td=qt(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.defer=void 0;var Ag=()=>{let e,n,t=new Promise((r,s)=>{e=r,n=s});return{resolve:e,reject:n,promise:t}};Do.defer=Ag});var xs=qt(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.BulkheadPolicy=void 0;var Og=jn(),Pg=td(),Cg=In(),Dg=ei(),Rg=Is(),xg=Io(),Rs=class{constructor(n,t){this.capacity=n,this.queueCapacity=t,this.active=0,this.queue=[],this.onRejectEmitter=new Cg.EventEmitter,this.executor=new Dg.ExecuteWrapper,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure,this.onReject=this.onRejectEmitter.addListener}get executionSlots(){return this.capacity-this.active}get queueSlots(){return this.queueCapacity-this.queue.length}async execute(n,t=Og.neverAbortedSignal){if(t.aborted)throw new xg.TaskCancelledError;if(this.active<this.capacity){this.active++;try{return await n({signal:t})}finally{this.active--,this.dequeue()}}if(this.queue.length<this.queueCapacity){let{resolve:r,reject:s,promise:a}=(0,Pg.defer)();return this.queue.push({signal:t,fn:n,resolve:r,reject:s}),a}throw this.onRejectEmitter.emit(),new Rg.BulkheadRejectedError(this.capacity,this.queueCapacity)}dequeue(){let n=this.queue.shift();n&&Promise.resolve().then(()=>this.execute(n.fn,n.signal)).then(n.resolve).catch(n.reject)}};Ro.BulkheadPolicy=Rs});var Ms=qt(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.FallbackPolicy=void 0;var Ng=jn(),Ns=class{constructor(n,t){this.executor=n,this.value=t,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure}async execute(n,t=Ng.neverAbortedSignal){let r=await this.executor.invoke(n,{signal:t});return"success"in r?r.success:this.value()}};xo.FallbackPolicy=Ns});var Ls=qt(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.NoopPolicy=void 0;var Mg=jn(),rd=ei(),ks=class{constructor(){this.executor=new rd.ExecuteWrapper,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure}async execute(n,t=Mg.neverAbortedSignal){return(0,rd.returnOrThrow)(await this.executor.invoke(n,{signal:t}))}};No.NoopPolicy=ks});var Hs=qt(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.RetryPolicy=void 0;var kg=ds(),Lg=jn(),nd=In(),jg=(e,n)=>new Promise(t=>{let r=setTimeout(t,e);n&&r.unref()}),js=class e{constructor(n,t){this.options=n,this.executor=t,this.onGiveUpEmitter=new nd.EventEmitter,this.onRetryEmitter=new nd.EventEmitter,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure,this.onRetry=this.onRetryEmitter.addListener,this.onGiveUp=this.onGiveUpEmitter.addListener}dangerouslyUnref(){return new e({...this.options,unref:!0},this.executor.clone())}async execute(n,t=Lg.neverAbortedSignal){let r=this.options.backoff||new kg.ConstantBackoff(0),s;for(let a=0;;a++){let o=await this.executor.invoke(n,{attempt:a,signal:t});if("success"in o)return o.success;if(!t.aborted&&a<this.options.maxAttempts){let i={attempt:a+1,signal:t,result:o};s=s?s.next(i):r.next(i);let c=s.duration,l=jg(c,!!this.options.unref);this.onRetryEmitter.emit({...o,delay:c}),await l;continue}if(this.onGiveUpEmitter.emit(o),"error"in o)throw o.error;return o.value}}};Mo.RetryPolicy=js});var qs=qt(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.TimeoutPolicy=Un.TimeoutStrategy=void 0;var Hg=jn(),Us=In(),Fs=ei(),Ug=Eo(),id;(function(e){e.Cooperative="optimistic",e.Aggressive="aggressive"})(id=Un.TimeoutStrategy||(Un.TimeoutStrategy={}));var Bs=class e{constructor(n,t,r=new Fs.ExecuteWrapper,s=!1){this.duration=n,this.options=t,this.executor=r,this.unref=s,this.timeoutEmitter=new Us.EventEmitter,this.onTimeout=this.timeoutEmitter.addListener,this.onFailure=this.executor.onFailure,this.onSuccess=this.executor.onSuccess}dangerouslyUnref(){return new e(this.duration,this.options,this.executor,!0)}async execute(n,t){let r=(0,Hg.deriveAbortController)(t),s=setTimeout(()=>r.abort(),this.duration);this.unref&&s.unref();let a={signal:r.signal},o=(0,Us.onAbort)(r.signal),i=o(()=>this.timeoutEmitter.emit());try{return this.options.strategy===id.Cooperative?(0,Fs.returnOrThrow)(await this.executor.invoke(n,a,r.signal)):await this.executor.invoke(async()=>Promise.race([Promise.resolve(n(a,r.signal)),Us.Event.toPromise(o).then(()=>{throw new Ug.TaskCancelledError(`Operation timed out after ${this.duration}ms`)})])).then(Fs.returnOrThrow)}finally{i.dispose(),this.options.abortOnReturn!==!1&&r.abort(),clearTimeout(s)}}};Un.TimeoutPolicy=Bs});var od=qt(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.fallback=Gt.circuitBreaker=Gt.retry=Gt.wrap=Gt.timeout=Gt.usePolicy=Gt.bulkhead=Gt.handleWhenResult=Gt.handleResultType=Gt.handleWhen=Gt.handleType=Gt.handleAll=Gt.noop=Gt.Policy=void 0;var Fg=gs(),Bg=xs(),qg=Oo(),Gs=ei(),Gg=Ms(),Vg=Ls(),zg=Hs(),Wg=qs(),ko=(e,n)=>n?t=>t instanceof e&&n(t):t=>t instanceof e,$g=()=>!0,Di=()=>!1,On=class e{constructor(n){this.options=n}orType(n,t){let r=ko(n,t);return new e({...this.options,errorFilter:s=>this.options.errorFilter(s)||r(s)})}orWhen(n){return new e({...this.options,errorFilter:t=>this.options.errorFilter(t)||n(t)})}orWhenResult(n){return new e({...this.options,resultFilter:t=>this.options.resultFilter(t)||n(t)})}orResultType(n,t){let r=ko(n,t);return new e({...this.options,resultFilter:s=>this.options.resultFilter(s)||r(s)})}};Gt.Policy=On;Gt.noop=new Vg.NoopPolicy;Gt.handleAll=new On({errorFilter:$g,resultFilter:Di});function Kg(e,n){return new On({errorFilter:ko(e,n),resultFilter:Di})}Gt.handleType=Kg;function Qg(e){return new On({errorFilter:e,resultFilter:Di})}Gt.handleWhen=Qg;function Xg(e,n){return new On({errorFilter:Di,resultFilter:ko(e,n)})}Gt.handleResultType=Xg;function Yg(e){return new On({errorFilter:Di,resultFilter:e})}Gt.handleWhenResult=Yg;function Zg(e,n=0){return new Bg.BulkheadPolicy(e,n)}Gt.bulkhead=Zg;function Jg(e){return(n,t,r)=>{let s=r.value;if(typeof s!="function")throw new Error(`Can only decorate functions with @cockatiel, got ${typeof s}`);r.value=function(...a){let o=a[a.length-1]instanceof AbortSignal?a.pop():void 0;return e.execute(i=>s.apply(this,[...a,i]),o)}}}Gt.usePolicy=Jg;function ey(e,n){return new Wg.TimeoutPolicy(e,typeof n=="string"?{strategy:n}:n)}Gt.timeout=ey;function ty(...e){return{_altReturn:void 0,onFailure:e[0].onFailure,onSuccess:e[0].onSuccess,wrapped:e,execute(n,t){let r=(s,a)=>a===e.length?n(s):e[a].execute(o=>r({...s,...o},a+1),s.signal);return Promise.resolve(r({signal:t},0))}}}Gt.wrap=ty;function ry(e,n){return new zg.RetryPolicy({backoff:n.backoff||new Fg.ConstantBackoff(0),maxAttempts:n.maxAttempts??1/0},new Gs.ExecuteWrapper(e.options.errorFilter,e.options.resultFilter))}Gt.retry=ry;function ny(e,n){return new qg.CircuitBreakerPolicy(n,new Gs.ExecuteWrapper(e.options.errorFilter,e.options.resultFilter))}Gt.circuitBreaker=ny;function iy(e,n){return new Gg.FallbackPolicy(new Gs.ExecuteWrapper(e.options.errorFilter,e.options.resultFilter),typeof n=="function"?n:()=>n)}Gt.fallback=iy});var Lo=qt(fr=>{"use strict";var oy=fr&&fr.__createBinding||(Object.create?function(e,n,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(n,t);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,r,s)}:function(e,n,t,r){r===void 0&&(r=t),e[r]=n[t]}),rn=fr&&fr.__exportStar||function(e,n){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(n,t)&&oy(n,e,t)};Object.defineProperty(fr,"__esModule",{value:!0});fr.EventEmitter=fr.Event=void 0;rn(gs(),fr);rn(ed(),fr);rn(xs(),fr);rn(Oo(),fr);var ad=In();Object.defineProperty(fr,"Event",{enumerable:!0,get:function(){return ad.Event}});Object.defineProperty(fr,"EventEmitter",{enumerable:!0,get:function(){return ad.EventEmitter}});rn(Io(),fr);rn(Ms(),fr);rn(Ls(),fr);rn(od(),fr);rn(Hs(),fr);rn(qs(),fr)});var zy={};hp(zy,{activate:()=>Gy,deactivate:()=>Vy});module.exports=vp(zy);var Hd=ar(Hl()),cr=ar(require("vscode"));var ld=ar(Lo());var sd=e=>(n,t)=>{let r,s=0,a=t.length-1;for(;s<=a;)r=Math.floor((s+a)/2),e(t[r])>=n?a=r-1:s=r+1;return s};var jo=Symbol("unset"),Ho=e=>{let n=jo,t=()=>(n===jo&&(n=e()),n);return t.getValue=()=>n===jo?void 0:n,t.forget=()=>{n=jo},t};var ay=e=>e.op===0?{...e,op:1,previous:e.value}:e.op===1?{...e,op:0,value:e.previous}:{...e,value:e.previous,previous:e.value};var Ri=class{constructor(n){this.saveGuard=(0,ld.bulkhead)(1,1/0);this._unsavedEditIndex=0;this.getSizeInner=Ho(()=>this.accessor.getSize());this.getAllEditTimeline=Ho(()=>ud(this._edits));this.getUnsavedEditTimeline=Ho(()=>ud(this._edits.slice(this._unsavedEditIndex)));this._edits=n.edits?n.edits.saved.concat(n.edits.unsaved):[],this._unsavedEditIndex=n.edits?.saved.length??0,this.supportsLengthChanges=n.supportsLengthChanges,this.isFiniteSize=n.isFiniteSize,this.accessor=n.accessor,this.pageSize=n.accessor.pageSize}get uri(){return this.accessor.uri}get isReadonly(){return!!this.accessor.isReadonly}async size(){if(!this.isFiniteSize)return;let n=await this.getSizeInner();if(n!==void 0)return n}async sizeWithEdits(){if(!this.isFiniteSize)return;let n=await this.getSizeInner();if(n===void 0)return;let{sizeDelta:t}=this.getUnsavedEditTimeline();return n+t}get edits(){return this._edits}get unsavedEdits(){return this._edits.slice(this.unsavedEditIndex)}get unsavedEditIndex(){return this._unsavedEditIndex}get isSynced(){return this.unsavedEditIndex===this.edits.length}readInto(n,t){return this.accessor.read(n,t)}readWithAllEdits(n=0,t=128*1024){return cd(this.accessor,this.getAllEditTimeline().ranges,n,t)}readWithUnsavedEdits(n=0,t=128*1024){return cd(this.accessor,this.getUnsavedEditTimeline().ranges,n,t)}save(){let n=this._edits.slice(this.unsavedEditIndex);return n.length===0?Promise.resolve():this.saveGuard.execute(async()=>{n.some(t=>t.op!==2||t.previous.length!==t.value.length)?await this.accessor.writeStream(this.readWithUnsavedEdits()):await this.accessor.writeBulk(n.map(t=>({offset:t.offset,data:t.value}))),this._unsavedEditIndex+=n.length,this.getUnsavedEditTimeline.forget(),this.getSizeInner.forget()})}revert(){this._unsavedEditIndex=0,this._edits=[],this.accessor.invalidate?.(),this.getAllEditTimeline.forget(),this.getUnsavedEditTimeline.forget(),this.getSizeInner.forget()}makeEdits(n){let t=this._edits.length;return this._edits.push(...n),this.getAllEditTimeline.forget(),this.getUnsavedEditTimeline.forget(),{undo:()=>(this.unsavedEditIndex<=t?this._edits.splice(t,n.length):this._edits.push(...n.map(ay)),this.getAllEditTimeline.forget(),this.getUnsavedEditTimeline.forget(),this._edits),redo:()=>(this._edits.push(...n),this.getAllEditTimeline.forget(),this.getUnsavedEditTimeline.forget(),this._edits)}}dispose(){this.accessor.dispose()}};async function*cd(e,n,t=0,r=1024){let s=new Uint8Array(r);for(let a=0;a<n.length;a++){let o=n[a];if(o.op===1)continue;if(o.op===3){let l=o.offset+o.length-t;if(l<=0)continue;let d=l<o.length?s.fill(0,-l).subarray(-l):s.fill(0,-o.length).subarray(-o.length);d.length>0&&(yield d);continue}if(o.op===2){let l=o.offset+o.value.length-t;if(l<=0)continue;let d=l<o.value.length?o.value.subarray(-l):o.value;d.length>0&&(yield d);continue}let i=o.roffset+(a+1<n.length?n[a+1].offset:1/0)-o.offset,c=o.roffset+Math.max(0,t-o.offset);for(;c<i;){let l=await e.read(c,s.subarray(0,Math.min(s.length,i-c)));if(l===0)break;yield s.subarray(0,l),c+=l}}}var ud=e=>{let n=[{op:0,editIndex:-1,roffset:0,offset:0}],t=(o,i,c)=>i.op===0?{before:{op:0,editIndex:o,roffset:i.roffset,offset:i.offset},after:{op:0,editIndex:o,roffset:i.roffset+c,offset:i.offset+c}}:i.op===1?{before:{op:1,editIndex:o,offset:i.offset},after:{op:1,editIndex:o,offset:i.offset+c}}:i.op===2?{before:{op:2,editIndex:o,offset:i.offset,value:i.value.subarray(0,c)},after:{op:2,editIndex:o,offset:i.offset+c,value:i.value.subarray(c)}}:{before:{op:3,editIndex:o,offset:i.offset,length:c},after:{op:3,editIndex:o,offset:i.offset+c,length:i.length-c}},r=sd(o=>o.offset),s=0,a=(o,i)=>{for(s+=i;o<n.length;o++)n[o].offset+=i};for(let o=0;o<e.length;o++){let i=e[o],c=r(i.offset,n);(c===n.length||n[c].offset>i.offset)&&c--;let l=n[c];if(i.op===0||i.op===3){let{before:d,after:u}=t(o,l,i.offset-l.offset);n.splice(c,1,d,i.op===0?{op:2,editIndex:o,offset:i.offset,value:i.value}:{op:3,editIndex:o,offset:i.offset,length:i.length},u),a(c+2,i.op===0?i.value.length:i.length)}else if(i.op===1||i.op===2){let{before:d}=t(o,l,i.offset-l.offset),u=r(i.offset+i.previous.length,n);(u===n.length||n[u].offset>i.offset)&&u--;let{after:p}=t(o,n[u],i.offset+i.previous.length-n[u].offset);n.splice(c,u-c+1,d,i.op===2?{op:2,editIndex:o,offset:i.offset,value:i.value}:{op:1,editIndex:o,offset:i.offset},p),a(c+2,(i.op===2?i.value.length:0)-i.previous.length)}}return{ranges:n,sizeDelta:s}};var dd=ar(require("vscode"));function Fn(e){let n={};if(e){let t=(e[0]==="?"?e.substr(1):e).split("&");for(let r of t){let s=r.split("="),a=s.shift();if(a){let o=s.join("=");a==="side"?(o==="modified"||o==="original"||o===void 0)&&(n.side=o):n[a]=o}}}return n}function Vs(e){let n=[];for(let t in e){let r=e[t];r!==void 0&&r!==""&&n.push(`${t}=${r}`)}return n.join("&")}var sy=()=>{let e=0;return()=>(e++).toString()},cy=sy(),fd=(e,n)=>{let t=cy(),r=e.with({scheme:"hexdiff",query:Vs({...Fn(e.query),side:"original",token:t})}),s=n.with({scheme:"hexdiff",query:Vs({...Fn(e.query),side:"modified",token:t})});dd.commands.executeCommand("vscode.diff",r,s)};var uy=typeof atob=="function",ly=typeof btoa=="function",Bo=typeof Buffer=="function",tE=typeof TextDecoder=="function"?new TextDecoder:void 0,rE=typeof TextEncoder=="function"?new TextEncoder:void 0,dy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",xi=Array.prototype.slice.call(dy),Uo=(e=>{let n={};return e.forEach((t,r)=>n[t]=r),n})(xi),fy=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Fo=String.fromCharCode.bind(String),pd=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):(e,n=t=>t)=>new Uint8Array(Array.prototype.slice.call(e,0).map(n)),py=e=>e.replace(/=/g,"").replace(/[+\/]/g,n=>n=="+"?"-":"_"),vd=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),hy=e=>{let n,t,r,s,a="",o=e.length%3;for(let i=0;i<e.length;){if((t=e.charCodeAt(i++))>255||(r=e.charCodeAt(i++))>255||(s=e.charCodeAt(i++))>255)throw new TypeError("invalid character found");n=t<<16|r<<8|s,a+=xi[n>>18&63]+xi[n>>12&63]+xi[n>>6&63]+xi[n&63]}return o?a.slice(0,o-3)+"===".substring(o):a},vy=ly?e=>btoa(e):Bo?e=>Buffer.from(e,"binary").toString("base64"):hy,hd=Bo?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let r=0,s=e.length;r<s;r+=4096)t.push(Fo.apply(null,e.subarray(r,r+4096)));return vy(t.join(""))},qo=(e,n=!1)=>n?py(hd(e)):hd(e);var my=e=>{if(e=e.replace(/\s+/g,""),!fy.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let n,t="",r,s;for(let a=0;a<e.length;)n=Uo[e.charAt(a++)]<<18|Uo[e.charAt(a++)]<<12|(r=Uo[e.charAt(a++)])<<6|(s=Uo[e.charAt(a++)]),t+=r===64?Fo(n>>16&255):s===64?Fo(n>>16&255,n>>8&255):Fo(n>>16&255,n>>8&255,n&255);return t},gy=uy?e=>atob(vd(e)):Bo?e=>Buffer.from(e,"base64").toString("binary"):my,yy=Bo?e=>pd(Buffer.from(e,"base64")):e=>pd(gy(e),n=>n.charCodeAt(0)),md=e=>yy(_y(e));var _y=e=>vd(e.replace(/[-_]/g,n=>n=="-"?"+":"/"));var tn=ar(require("vscode"));var ti=class{constructor(n,t){this.messageHandler=n;this.postMessage=t;this.messageIdCounter=0;this.pendingMessages=new Map}sendEvent(n,t){this.postMessage({body:n,messageId:this.messageIdCounter++},t)}sendRequest(n,t){let r=this.messageIdCounter++;return this.postMessage({body:n,messageId:r},t),new Promise((s,a)=>{this.pendingMessages.set(r,{resolve:s,reject:a})})}sendReply(n,t){this.postMessage({body:t,messageId:this.messageIdCounter++,inReplyTo:n.messageId})}handleMessage(n){n.inReplyTo!==void 0?(this.pendingMessages.get(n.inReplyTo)?.resolve(n.body),this.pendingMessages.delete(n.inReplyTo)):Promise.resolve(this.messageHandler(n.body)).then(t=>t&&this.sendReply(n,t))}};var yd={Hex:by,Literal:Sy,"UTF-8":Ey,C:Ty,Go:wy,Java:Iy,JSON:Ay,Base64:Oy},_d=async e=>{let n=[{label:"Hex"},{label:"Literal"},{label:"UTF-8"},{label:"C"},{label:"Go"},{label:"Java"},{label:"JSON"},{label:"Base64"}];tn.window.showQuickPick(n).then(t=>{t&&e.sendEvent({type:15,format:t.label})})};function Ey(e){tn.env.clipboard.writeText(new TextDecoder().decode(e))}function by(e){let n=Array.from(e,t=>t.toString(16).padStart(2,"0")).join("");tn.env.clipboard.writeText(n)}function Sy(e){let n="",r=Array.from(e,s=>s.toString(16).padStart(2,"0")).join("").match(/.{1,2}/g);r&&(n="\\x"+r.join("\\x")),tn.env.clipboard.writeText(n)}function Ty(e,n){let t=e.length,r=`unsigned char ${n}[${t}] =
{`;for(let s=0;s<t;++s){s%8==0&&(r+=`
	`);let a=e[s].toString(16).padStart(2,"0");r+=`0x${a}, `}r+=`
};
`,typeof process<"u"&&process.platform==="win32"&&(r=r.replace(/\n/g,`\r
`)),tn.env.clipboard.writeText(r)}function wy(e,n){let t=e.length,r=`// ${n} (${t} bytes)
`;r+=`var ${n} = []byte{`;for(let s=0;s<t;++s){s%8==0&&(r+=`
	`);let a=e[s].toString(16).padStart(2,"0");r+=`0x${a}, `}r+=`
}
`,typeof process<"u"&&process.platform==="win32"&&(r=r.replace(/\n/g,`\r
`)),tn.env.clipboard.writeText(r)}function Iy(e,n){let t=e.length,r=`byte ${n}[] =
{`;for(let s=0;s<t;++s){s%8==0&&(r+=`
	`);let a=e[s].toString(16).padStart(2,"0");r+=`0x${a}, `}r+=`
};
`,typeof process<"u"&&process.platform==="win32"&&(r=r.replace(/\n/g,`\r
`)),tn.env.clipboard.writeText(r)}function Ay(e){tn.env.clipboard.writeText(JSON.stringify(e))}function Oy(e){tn.env.clipboard.writeText(qo(e))}var qr=ar(require("vscode"));function zs(e){for(;e.length;){let n=e.pop();n&&n.dispose()}}var Br=class{constructor(){this._isDisposed=!1;this._disposables=[]}dispose(){this._isDisposed||(this._isDisposed=!0,zs(this._disposables))}_register(n){return this._isDisposed?n.dispose():this._disposables.push(n),n}get isDisposed(){return this._isDisposed}},Pn=class{constructor(n){this._value=n}get value(){return this._value}set value(n){this._value!==n&&(this._value?.dispose(),this._value=n)}dispose(){this.value?.dispose()}};var Ed=require("vscode");function Vo(e=32){let n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}var Ws=e=>e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(0,e.byteLength);var bd=e=>{let n=0;for(let s of e)n+=s.byteLength;let t=new Uint8Array(n),r=0;for(let s of e)t.set(s,r),r+=s.byteLength;return t},Sd=e=>{let n=e.split("/").pop();return n=n.substring(0,n.lastIndexOf("."))||n,n.replace(/[^a-z0-9]/gi,"")};var Ni=class e extends Br{constructor(t,r){super();this._extensionURI=t;this._register(r.onDidChangeActiveDocument(s=>{let o=qr.workspace.getConfiguration("hexeditor").get("inspectorType")==="sidebar"&&!!s;qr.commands.executeCommand("setContext","hexEditor:showSidebarInspector",o),o&&this.show({autoReveal:!0})}))}static{this.viewType="hexEditor.dataInspectorView"}resolveWebviewView(t,r,s){this._view=t,t.webview.options={enableScripts:!0,localResourceRoots:[this._extensionURI]},t.webview.html=this._getWebviewHTML(t.webview),t.webview.onDidReceiveMessage(a=>{a.type==="ready"&&t.show()}),this._view.onDidDispose(()=>this._view=void 0),t.onDidChangeVisibility(()=>{t.visible&&this._lastMessage&&t.webview.postMessage(this._lastMessage)}),this._lastMessage&&t.webview.postMessage(this._lastMessage)}handleEditorMessage(t){this._lastMessage=t,this._view?.webview.postMessage(t)}show(t){t?.autoReveal&&!qr.workspace.getConfiguration("hexeditor.dataInspector").get("autoReveal",!1)||(this._view&&!t?.forceFocus?this._view.show():qr.commands.executeCommand(`${e.viewType}.focus`),this._lastMessage&&this._view?.webview.postMessage(this._lastMessage))}_getWebviewHTML(t){let r=t.asWebviewUri(qr.Uri.joinPath(this._extensionURI,"dist","inspector.js")),s=t.asWebviewUri(qr.Uri.joinPath(this._extensionURI,"dist","inspector.css")),a=qr.workspace.getConfiguration().get("hexeditor.defaultEndianness"),o=Vo();return`<!DOCTYPE html>
            <html lang="en">
            <head>
              <meta charset="UTF-8">
              <!--
                Use a content security policy to only allow loading images from https or from our extension directory,
                and only allow scripts that have a specific nonce.
              -->
              <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${t.cspSource}; script-src 'nonce-${o}';">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <link href="${s}" rel="stylesheet">

              <title>Data Inspector</title>
            </head>
            <body>
              <div id="data-inspector">
                <div class="grid-container">
									<!-- Input elements filled in by dataInspector.ts -->
                  <div class="grid-item endian-select">
                    <label for="endianness">Endianness</label>
                  </div>
                  <div class="grid-item endian-select">
                    <select id="endianness">
                      <option value="little" ${a==="little"?"selected":""}>${qr.l10n.t("Little Endian")}</option>
                      <option value="big" ${a==="big"?"selected":""}>${qr.l10n.t("Big Endian")}</option>
                    </select>
                  </div>
                </div>
              </div>
              <script nonce="${o}" src="${r}"></script>
            </body>
            </html>`}};var zo=ar(require("vscode"));var Cy=/^0x[a-f0-9]+$/i,Dy=/^[0-9]+$/i,Td=e=>{let n=zo.window.createInputBox();n.placeholder="Enter offset to go to",e.sendEvent({type:7});let t,r=!1;n.onDidChangeValue(s=>{if(!s)t=void 0;else if(Cy.test(s))t=parseInt(s.slice(2),16);else if(Dy.test(s))t=parseInt(s,10);else{n.validationMessage=zo.l10n.t("Offset must be provided as a decimal (12345) or hex (0x12345) address");return}n.validationMessage="",t!==void 0&&(n.validationMessage="",e.sendEvent({type:8,offset:t}))}),n.onDidAccept(()=>{r=!0,t!==void 0&&e.sendEvent({type:10,offset:t})}),n.onDidHide(()=>{r||e.sendEvent({type:13})}),n.show()};var pn=ar(require("vscode"));function Wo(e){return e.with({scheme:"file"})}var $o=class{constructor(){this._emitter=new pn.EventEmitter;this.onDidChangeFile=this._emitter.event}readDirectory(n){throw new Error("Method not implemented.")}createDirectory(n){throw new Error("Method not implemented.")}readFile(n){return pn.workspace.fs.readFile(Wo(n))}writeFile(n,t,r){return pn.workspace.fs.writeFile(Wo(n),t)}delete(n,t){return pn.workspace.fs.delete(Wo(n),t)}rename(n,t,r){throw new Error("Method not implemented")}copy(n,t,r){throw new Error("Method not implemented.")}watch(n,t){return new pn.Disposable(()=>{})}stat(n){return pn.workspace.fs.stat(Wo(n))}};var st=ar(require("vscode"));var wd=e=>typeof e=="function"?e():e,ri=class{constructor(){this.table=new Map}set(n,t){let r=xy(n),s=this.table.get(r);if(!s){let o={buf:n,value:wd(t)};return this.table.set(r,[o]),o.value}for(let o of s)if(Ry(o.buf,n))return o.value;let a={buf:n,value:wd(t)};return s.push(a),a.value}*entries(){for(let n of this.table.values())for(let{buf:t,value:r}of n)yield[t,r]}*keys(){for(let n of this.table.values())for(let{buf:t}of n)yield t}*values(){for(let n of this.table.values())for(let{value:t}of n)yield t}};function Ry(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function xy(e,n=0){n=Id(149417,n);for(let t=0,r=e.length;t<r;t++)n=Id(e[t],n);return n}function Id(e,n){return(n<<5)-n+e|0}var ni=e=>{let n=0,t=new ri,r=o=>({offset:t.set(o,()=>{let c=n;return n+=o.length,c}),len:o.length}),s=[];for(let o of e)o.op===0?s.push({...o,value:r(o.value)}):o.op===1?s.push({...o,previous:r(o.previous)}):s.push({...o,previous:r(o.previous),value:r(o.value)});let a=new Uint8Array(n);for(let[o,i]of t.entries())a.set(o,i);return{data:a,edits:s}},Ad=({edits:e,data:n})=>{let t=({offset:r,len:s})=>n.slice(r,r+s);return e.map(r=>r.op===0?{...r,value:t(r.value)}:r.op===1?{...r,previous:t(r.previous)}:{...r,previous:t(r.previous),value:t(r.value)})};var Qo="%1%";var Cr=ar(require("vscode"));var $s=ar(require("vscode")),Ny=new TextEncoder,My=new TextDecoder,Mi=class{constructor(n){this.uri=n}async write(n){let t=JSON.stringify(n,(r,s)=>s instanceof Uint8Array?{$u8:qo(s)}:s);await $s.workspace.fs.writeFile(this.uri,Ny.encode(t))}async read(){let n;try{n=My.decode(await $s.workspace.fs.readFile(this.uri))}catch{return[]}return JSON.parse(n,(t,r)=>r&&typeof r=="object"&&"$u8"in r?md(r.$u8):r)}};var ii=ar(Lo()),Jt=ar(require("vscode")),Zs=async(e,n)=>{if(e.scheme==="untitled")return new Xs(e,n??new Uint8Array);if(e.scheme==="vscode-debug-memory"){let{permissions:t=0}=await Jt.workspace.fs.stat(e);return new Ys(e,!!(t&Jt.FilePermission.Readonly))}if(e.scheme==="file"||e.scheme==="hexdiff")try{let t=require("fs"),r=require("os"),s=await t.promises.stat(e.fsPath),{uid:a,gid:o}=r.userInfo(),i=a===-1||a===s.uid?!(s.mode&128):o===s.gid?!(s.mode&16):!(s.mode&2);if(s.isFile())return new Qs(e,e.scheme==="hexdiff"?!0:i,t)}catch{}return new Xo(e)},Ks=class{constructor(n,t,r){this.path=n;this.flags=t;this._fs=r;this.borrowQueue=[];this.disposed=!1}borrow(n){return this.disposed?Promise.reject(new Error("FileHandle was disposed")):new Promise((t,r)=>{this.borrowQueue.push(async s=>{if(s instanceof Error)return r(s);try{t(await n(s))}catch(a){r(a)}}),this.borrowQueue.length===1&&this.process()})}dispose(){this.disposed=!0,this.handle=void 0,this.disposeTimeout&&clearTimeout(this.disposeTimeout),this.rejectAll(new Error("FileHandle was disposed"))}async close(){await this.handle?.close(),this.handle=void 0,this.disposeTimeout&&clearTimeout(this.disposeTimeout)}rejectAll(n){for(;this.borrowQueue.length;)this.borrowQueue.pop()(n)}async process(){for(this.disposeTimeout&&clearTimeout(this.disposeTimeout);this.borrowQueue.length;){if(!this.handle)try{this.handle=await this._fs.promises.open(this.path,this.flags|this._fs.constants.O_CREAT)}catch(n){return this.rejectAll(n)}await this.borrowQueue[0]?.(this.handle),this.borrowQueue.shift()}this.handle&&(this.disposeTimeout=setTimeout(()=>{this.handle?.close(),this.handle=void 0},1e3))}},ky=(0,ii.retry)((0,ii.handleWhen)(e=>e.code==="ENOENT"),{maxAttempts:50,backoff:new ii.ConstantBackoff(50)}),Od=128*1024,Qs=class{constructor(n,t,r){this.fs=r;this.supportsIncremetalAccess=!0;this.pageSize=Od;this.uri=n.toString(),this.isReadonly=t,this.handle=new Ks(n.fsPath,t?r.constants.O_RDONLY:r.constants.O_RDWR,r)}watch(n,t){return Js(this.uri,n,t)}async getSize(){return this.handle.borrow(async n=>(await n.stat()).size)}async read(n,t){return this.handle.borrow(async r=>{let{bytesRead:s}=await r.read(t,0,t.byteLength,n);return s})}writeBulk(n){return this.handle.borrow(async t=>Promise.all(n.map(({data:r,offset:s})=>t.write(r,0,r.byteLength,s))))}async writeStream(n,t){let r=`${this.handle.path}.tmp`,s=await this.fs.promises.open(r,this.fs.constants.O_WRONLY|this.fs.constants.O_CREAT|this.fs.constants.O_TRUNC);try{let a=0;for await(let o of n){if(t?.isCancellationRequested)return;await s.write(o,0,o.byteLength,a),a+=o.byteLength}}finally{await s.close()}return await this.handle.borrow(async()=>{await this.handle.close(),await ky.execute(()=>this.fs.promises.rename(r,this.handle.path))}),this.handle.borrow(async a=>{if(t?.isCancellationRequested)return;let o=0;for await(let i of n){if(t?.isCancellationRequested)return;await a.write(i,0,i.byteLength,o),o+=i.byteLength}})}dispose(){this.handle.dispose()}},Xo=class{constructor(n){this.pageSize=Od;this.uri=n.toString(),this.fsPath=n.fsPath,this.isReadonly=Jt.workspace.fs.isWritableFileSystem(this.uri)===!1}watch(n,t){return Js(this.uri,n,t)}async getSize(){return(await Jt.workspace.fs.stat(Jt.Uri.parse(this.uri))).size}async read(n,t){let r=await this.getContents(),s=Math.min(t.length,r.length-n);return t.set(r.subarray(n,s+n)),s}async writeStream(n,t){let r=0,s=[];for await(let i of n){if(t?.isCancellationRequested)throw new Jt.CancellationError;s.push(i),r+=i.length}let a=new Uint8Array(r),o=0;for(let i of s)a.set(i,o),o+=i.length;await Jt.workspace.fs.writeFile(Jt.Uri.parse(this.uri),a)}async writeBulk(n){let t=await this.getContents();for(let{data:r,offset:s}of n)t.set(r,s);return Jt.workspace.fs.writeFile(Jt.Uri.parse(this.uri),t)}invalidate(){this.contents=void 0}dispose(){this.contents=void 0}getContents(){return this.contents??=Jt.workspace.fs.readFile(Jt.Uri.parse(this.uri)),this.contents}},Xs=class extends Xo{constructor(n,t){super(n),this.contents=t}getSize(){return Promise.resolve(this.contents.byteLength)}},Ys=class{constructor(n,t){this.isReadonly=t;this.supportsIncremetalAccess=!0;this.pageSize=4*1024;this.uri=n.toString()}watch(n,t){return Js(this.uri,n,t)}async getSize(){}async read(n,t){let r=await Jt.workspace.fs.readFile(this.referenceRange(n,n+t.length)),s=Math.min(t.length,r.length);return t.set(r.subarray(0,s)),s}async writeStream(){throw new Error("Not supported")}async writeBulk(n){await Promise.all(n.map(t=>Jt.workspace.fs.writeFile(this.referenceRange(t.offset,t.offset+t.data.length),t.data)))}referenceRange(n,t){return Jt.Uri.parse(this.uri).with({query:`?range=${n}:${t}`})}invalidate(){}dispose(){}},Js=(e,n,t)=>{let r=e.split("/"),s=r.pop(),a=new Jt.RelativePattern(Jt.Uri.parse(r.join("/")),s),o=Jt.workspace.createFileSystemWatcher(a),i=o.onDidChange(n),c=o.onDidDelete(t);return new Jt.Disposable(()=>{i.dispose(),c.dispose(),o.dispose()})};var Yo=class{start(n,t){this._request?.dispose(),this._request=t,(async()=>{for await(let r of t.search())n.sendEvent({type:2,data:r})})()}cancel(){this._request?.dispose(),this._request=void 0}};var Zo=class e extends Br{constructor(t,r,s,a){super();this.model=t;this.isLargeFile=r;this.baseAddress=s;this.diffModel=a;this.lastSave=0;this._selectionState={selected:0};this._editMode=0;this._hoverState=void 0;this.searchProvider=new Yo;this._onDidDispose=this._register(new Cr.EventEmitter);this.onDidDispose=this._onDidDispose.event;this._onDidChangeSelectionState=this._register(new Cr.EventEmitter);this.onDidChangeSelectionState=this._onDidChangeSelectionState.event;this._onDidChangeEditMode=this._register(new Cr.EventEmitter);this.onDidChangeEditMode=this._onDidChangeEditMode.event;this._onDidChangeHoverState=this._register(new Cr.EventEmitter);this.onDidChangeHoverState=this._onDidChangeHoverState.event;this._onDidRevert=this._register(new Cr.EventEmitter);this.onDidRevert=this._onDidRevert.event}static async create(t,{backupId:r,untitledDocumentData:s},a,o){let i=await Zs(t,s),c=new Ri({accessor:i,isFiniteSize:!0,supportsLengthChanges:!0,edits:r?{unsaved:await new Mi(Cr.Uri.parse(r)).read(),saved:[]}:void 0}),l=Fn(t.query),d=l.baseAddress?e.parseHexOrDecInt(l.baseAddress):0,u=await i.getSize();a.sendTelemetryEvent("fileOpen",{},{fileSize:u??0});let p=Cr.workspace.getConfiguration().get("hexeditor.maxFileSize")*1e6,v=!r&&!i.supportsIncremetalAccess&&(u??0)>p,m=l.side&&o?await o.setModel(l.side,c).build():void 0;return{document:new e(c,v,d,m),accessor:i}}get pageSize(){return this.model.pageSize}get isReadonly(){return this.model.isReadonly}get uri(){return Cr.Uri.parse(this.model.uri)}async readDecorators(){if(this.diffModel)try{return await this.diffModel.computeDecorators(this.uri)}catch(t){Cr.window.showErrorMessage(t instanceof Error?t.message:Cr.l10n.t("Unknown Error in HexEditor Diff"))}return[]}readWithUnsavedEdits(t){return this.model.readWithUnsavedEdits(t)}async readBufferWithEdits(t,r){let s=new Uint8Array(r),a=0;for await(let o of this.model.readWithUnsavedEdits(t)){let i=Math.min(o.length,s.length-a);if(s.set(o.subarray(0,i),a),a+=i,a===r)return s}return s.slice(0,a)}async readBuffer(t,r){let s=new Uint8Array(r),a=await this.model.readInto(t,s);return a===r?s:s.slice(0,a)}dispose(){this._onDidDispose.fire(),this.model.dispose(),super.dispose()}get selectionState(){return this._selectionState}set selectionState(t){this._selectionState=t,this._onDidChangeSelectionState.fire(t)}get editMode(){return this._editMode}set editMode(t){this._editMode=t,this._onDidChangeEditMode.fire(t)}get hoverState(){return this._hoverState}set hoverState(t){this._hoverState=t,this._onDidChangeHoverState.fire(t)}get isSynced(){return this.model.isSynced}get edits(){return this.model.edits}get unsavedEditIndex(){return this.model.unsavedEditIndex}makeEdits(t){return this.model.makeEdits(t)}insert(t,r){return this.model.makeEdits([{op:0,offset:t,value:r}])}async replace(t,r){let s=await this.readBufferWithEdits(t,r.length);return s.length===r.length?this.makeEdits([{op:2,offset:t,value:r,previous:s}]):this.makeEdits([{op:2,offset:t,value:r.subarray(0,s.length),previous:s},{op:0,offset:t+s.length,value:r.subarray(s.length)}])}size(){return this.model.size()}async save(t){this.lastSave=Date.now(),await this.model.save(),this.lastSave=Date.now()}async saveAs(t,r){if(r&&r.isCancellationRequested)return;if(!this.model.isFiniteSize)throw new Error("Cannot save a document without a finite size");let s=await Zs(t);this.lastSave=Date.now(),await s.writeStream(this.model.readWithUnsavedEdits()),this.lastSave=Date.now(),this.model.dispose(),this.model=new Ri({accessor:s,isFiniteSize:!0,supportsLengthChanges:!0})}async revert(t){this.model.revert(),this._onDidRevert.fire()}async backup(t){return await new Mi(t).write(this.model.unsavedEdits),{id:t.toString(),delete:async()=>{try{await Cr.workspace.fs.delete(t)}catch{}}}}static parseHexOrDecInt(t){return t=t.toLowerCase(),t.startsWith("0x")?parseInt(t.substring(2),16):parseInt(t,10)}};var Jo=Symbol("Wildcard"),Pd=new Uint8Array(255);for(let e=0;e<255;e++)Pd[e]=e;var ec=new Uint8Array(255);for(let e=0;e<255;e++)ec[e]=String.fromCharCode(e).toUpperCase().charCodeAt(0);var ea=class{constructor(n,t,r=Pd){this.needle=n;this.onMatch=t;this.equivalencyTable=r;this.needleLen=0;this.index=0;this.usableBuffer=0;for(let s of n)s===Jo?this.needleLen++:this.needleLen+=s.length;this.buffer=new Uint8Array(this.needleLen)}push(n){let{needleLen:t,buffer:r}=this;for(let s=0;s<n.length;s++)r[this.index++%t]=n[s],this.usableBuffer++,this.attemptMatch()}attemptMatch(){let{needle:n,needleLen:t,buffer:r,index:s,equivalencyTable:a}=this;if(this.usableBuffer<t)return;let o=0;for(let c=0;c<n.length;c++){let l=n[c];if(l===Jo){o++;continue}for(let d=0;d<l.length;d++){if(a[l[d]]!==a[r[(s+o)%t]])return;o++}}this.matchTmpBuf||(this.matchTmpBuf=new Uint8Array(t));let i=this.index%t;this.matchTmpBuf.set(r.subarray(i),0),this.matchTmpBuf.set(r.subarray(0,i),t-i),this.onMatch(this.index-t,this.matchTmpBuf),this.usableBuffer=0}};var ta=class e{constructor(n,t){this.filesize=n;this.cap=t;this.buffers=new ri;this.fileOffset=0;this.lastYieldedTime=Date.now();this.results=[]}static{this.targetUpdateInterval=1e3}get capped(){return this.cap===0}push(n,t,r){let s=this.buffers.set(n,()=>new Uint8Array(n));this.cap===void 0?this.results.push({from:t,to:r,previous:s}):this.cap>0&&(this.results.push({from:t,to:r,previous:s}),this.cap--)}toYield(){let n=Date.now();if(n-this.lastYieldedTime>e.targetUpdateInterval){this.lastYieldedTime=n;let t=this.results;return this.results=[],{progress:this.filesize?this.fileOffset/this.filesize:0,results:t}}}final(){return{progress:1,capped:this.capped,results:this.results}}},ra=class{constructor(n,t,r,s){this.document=n;this.query=t;this.isCaseSensitive=r;this.cap=s;this.cancelled=!1}dispose(){this.cancelled=!0}async*search(){let{isCaseSensitive:n,query:t,document:r,cap:s}=this,a=new ta(await r.size(),s),o=new ea(t.literal.map(i=>i==="*"?Jo:i),(i,c)=>a.push(c,i,i+c.length),n?void 0:ec);for await(let i of r.readWithUnsavedEdits(0)){if(this.cancelled||a.capped){yield a.final();return}o.push(i),a.fileOffset+=i.length;let c=a.toYield();c&&(yield c)}yield a.final()}},Ly=8*1024,na=class{constructor(n,t,r,s){this.document=n;this.cap=s;this.cancelled=!1;this.re=new RegExp(t.re,r?"g":"ig")}dispose(){this.cancelled=!0}async*search(){let n="",t=0,{re:r,document:s}=this,a=new TextDecoder("ascii"),o=new TextEncoder,i=new ta(await s.size(),this.cap);for await(let c of s.readWithUnsavedEdits(0)){if(this.cancelled||i.capped){yield i.final();return}n+=a.decode(c);let l=0;for(let p of n.matchAll(r)){let v=t+n.slice(0,p.index).length,m=p[0].length;i.push(o.encode(p[0]),v,v+m),l=p.index+p[0].length}i.fileOffset+=c.length;let d=Math.max(n.length-Ly,l);d>0&&(t+=d,r.lastIndex=0,n=n.slice(d));let u=i.toYield();u&&(yield u)}yield i.final()}};var Dd={columnWidth:16,showDecodedText:!0,defaultEndianness:"little",inspectorType:"aside"},Cd=Object.keys(Dd),ia=class e{constructor(n,t,r,s){this._context=n;this._telemetryReporter=t;this._dataInspectorView=r;this._registry=s;this._onDidChangeCustomDocument=new st.EventEmitter;this.onDidChangeCustomDocument=this._onDidChangeCustomDocument.event}static register(n,t,r,s){return st.window.registerCustomEditorProvider(e.viewType,new e(n,t,r,s),{supportsMultipleEditorsPerDocument:!1})}static{this.viewType="hexEditor.hexedit"}async openCustomDocument(n,t,r){let s=this._registry.getDiff(n),{document:a,accessor:o}=await Zo.create(n,t,this._telemetryReporter,s.builder),i=[];i.push(s),i.push(a.onDidRevert(async()=>{let u=await a.size()??null;for(let p of this._registry.getMessaging(a))p.sendEvent({type:3,edits:{edits:[],data:new Uint8Array},replaceFileSize:u}),p.sendEvent({type:6})}),a.onDidChangeEditMode(u=>{for(let p of this._registry.getMessaging(a))p.sendEvent({type:4,mode:u})}));let c=st.l10n.t("Overwrite"),l=async()=>{if(a.isSynced){Date.now()-a.lastSave<5e3||a.revert();return}let u=st.l10n.t("This file has changed on disk, but you have unsaved changes. Saving now will overwrite the file on disk with your changes."),p=st.l10n.t("Revert"),v=await st.window.showWarningMessage(u,c,p);v===c?st.commands.executeCommand("workbench.action.files.save"):v===p&&st.commands.executeCommand("workbench.action.files.revert")},d=()=>{for(let u of st.window.tabGroups.all)for(let p of u.tabs)p.input===a&&st.window.tabGroups.close(p,!0)};return i.push(o.watch(l,d)),a.onDidDispose(()=>zs(i)),a}async resolveCustomEditor(n,t,r){let s=new ti(o=>this.onMessage(s,n,o),o=>t.webview.postMessage(o)),a=this._registry.add(n,s);t.onDidDispose(()=>a.dispose()),t.webview.options={enableScripts:!0},t.webview.html=this.getHtmlForWebview(t.webview),t.webview.onDidReceiveMessage(o=>s.handleMessage(o))}async saveCustomDocument(n,t){await n.save(t);for(let r of this._registry.getMessaging(n))r.sendEvent({type:5,unsavedEditIndex:n.unsavedEditIndex})}saveCustomDocumentAs(n,t,r){return n.saveAs(t,r)}revertCustomDocument(n,t){return n.revert(t)}backupCustomDocument(n,t,r){return n.backup(t.destination)}getHtmlForWebview(n){let t=n.asWebviewUri(st.Uri.joinPath(this._context.extensionUri,"dist","editor.js")),r=n.asWebviewUri(st.Uri.joinPath(this._context.extensionUri,"dist","editor.css")),s=Vo(),a={pasteAs:st.l10n.t("Paste as"),pasteMode:st.l10n.t("Paste mode"),replace:st.l10n.t("Replace"),insert:st.l10n.t("Insert"),bytes:st.l10n.t("bytes"),encodingError:st.l10n.t("Encoding Error"),decodedText:st.l10n.t("Decoded Text"),loadingUpper:st.l10n.t("LOADING"),loadingDotDotDot:st.l10n.t("Loading..."),littleEndian:st.l10n.t("Little Endian"),onlyHexChars:st.l10n.t("Only hexadecimal characters (0-9 and a-f) are allowed"),onlyHexCharsAndPlaceholders:st.l10n.t("Only hexadecimal characters (0-9, a-f, and ?? placeholders) are allowed"),toggleReplace:st.l10n.t("Toggle Replace"),findBytes:st.l10n.t("Find Bytes (hex)"),findText:st.l10n.t("Find Text"),regexSearch:st.l10n.t("Regular Expression Search"),searchInBinaryMode:st.l10n.t("Search in Binary Mode"),caseSensitive:st.l10n.t("Case Sensitive"),cancelSearch:st.l10n.t("Cancel Search"),previousMatch:st.l10n.t("Previous Match"),nextMatch:st.l10n.t("Next Match"),closeWidget:st.l10n.t("Close Widget (Esc)"),replaceAllMatches:st.l10n.t("Replace All Matches"),replaceSelectedMatch:st.l10n.t("Replace Selected Match"),resultOverflow:st.l10n.t("More than {0} results, click to find all",Qo),resultCount:st.l10n.t("{0} results",Qo),foundNResults:st.l10n.t("Found {0}...",Qo),noResults:st.l10n.t("No results"),openLargeFileWarning:st.l10n.t("Opening this large file may cause instability."),openAnyways:st.l10n.t("Open Anyways"),readonlyWarning:st.l10n.t("Cannot edit in read-only editor."),openSettings:st.l10n.t("Open Settings"),showDecodedText:st.l10n.t("Show Decoded Text"),bytesPerRow:st.l10n.t("Bytes per row"),close:st.l10n.t("Close")};return`
			<!DOCTYPE html>
			<html lang="en">
			<head>
				<meta charset="UTF-8">

				<!--
				Use a content security policy to only allow loading images from https or from our extension directory,
				and only allow scripts that have a specific nonce.
				-->
				<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src ${n.cspSource} blob:; font-src ${n.cspSource}; style-src ${n.cspSource}; script-src 'nonce-${s}';">

				<meta name="viewport" content="width=device-width, initial-scale=1.0">

				<link href="${r}" rel="stylesheet" />
				<script nonce="${s}">globalThis.LOC_STRINGS=${JSON.stringify(a)}</script>
				<script nonce="${s}" src="${t}" defer></script>

				<title>Hex Editor</title>
			</head>
			<body>
			</body>
			</html>`}readCodeSettings(){return{scrollBeyondLastLine:st.workspace.getConfiguration("editor").get("scrollBeyondLastLine",!0)}}readEditorSettings(){let n=st.workspace.getConfiguration("hexeditor"),t={...Dd};for(let r of Cd)n.has(r)&&(t[r]=n.get(r));return t}writeEditorSettings(n){let t=st.workspace.getConfiguration("hexeditor");for(let r of Cd){let s=t.inspect(r),a=s?s.workspaceFolderValue!==void 0?st.ConfigurationTarget.WorkspaceFolder:s.workspaceValue!==void 0?st.ConfigurationTarget.Workspace:st.ConfigurationTarget.Global:st.ConfigurationTarget.Global;t.update(r,n[r],a)}}async onMessage(n,t,r){switch(r.type){case 16:return{type:0,initialOffset:t.baseAddress,editorSettings:this.readEditorSettings(),codeSettings:this.readCodeSettings(),edits:ni(t.edits),unsavedEditIndex:t.unsavedEditIndex,fileSize:await t.size(),pageSize:t.pageSize,isLargeFile:t.isLargeFile,isReadonly:t.isReadonly,editMode:t.editMode,decorators:await t.readDecorators()};case 12:t.selectionState=r;break;case 9:t.hoverState=r.hovered;break;case 18:let s=await t.readBuffer(r.offset,r.bytes);return{type:1,data:Ws(s)};case 19:this.publishEdit(n,t,t.makeEdits(Ad(r.edits)));return;case 26:this.publishEdit(n,t,r.mode==="insert"?t.insert(r.offset,r.data):await t.replace(r.offset,r.data)),n.sendEvent({type:3,edits:ni(t.edits)});return;case 27:{let o=await Promise.all(r.selections.sort((l,d)=>l[0]-d[0]).map(l=>t.readBuffer(l[0],l[1]-l[0]))),i=bd(o),c=Sd(t.uri.path);yd[r.format](i,c);return}case 20:{let i=(await Promise.all(r.deletes.map(c=>t.readBufferWithEdits(c.start,c.end-c.start)))).map((c,l)=>({op:1,previous:c,offset:r.deletes[l].start}));return n.sendEvent({type:3,edits:ni(i),appendOnly:!0}),this.publishEdit(n,t,t.makeEdits(i)),{type:14}}case 22:t.searchProvider.cancel();return;case 21:let a;"re"in r.query?a=new na(t,r.query,r.caseSensitive,r.cap):a=new ra(t,r.query,r.caseSensitive,r.cap),t.searchProvider.start(n,a);return;case 23:this._dataInspectorView.handleEditorMessage({method:"reset"});break;case 24:this._dataInspectorView.handleEditorMessage({method:"update",data:Ws(await t.readBufferWithEdits(r.offset,8))});break;case 25:this.writeEditorSettings(r.editorSettings);break}}publishEdit(n,t,r){this._onDidChangeCustomDocument.fire({document:t,undo:()=>n.sendEvent({type:3,edits:ni(r.undo())}),redo:()=>n.sendEvent({type:3,edits:ni(r.redo())})})}};var nn=ar(require("vscode"));var Rd=ar(Lo()),xd=ar(require("vscode"));var oa=class e{constructor(n,t,r){this.originalModel=n;this.modifiedModel=t;this.messageHandler=r;this.saveGuard=(0,Rd.bulkhead)(1,1/0)}async computeDecorators(n){return this.saveGuard.execute(async()=>{if(this.decorators===void 0){let t=await this.originalModel.sizeWithEdits(),r=await this.modifiedModel.sizeWithEdits();if(t===void 0||r===void 0)throw new Error(xd.l10n.t("HexEditor Diff: Failed to get file sizes."));let s=new Uint8Array(t),a=new Uint8Array(r);await this.originalModel.readInto(0,s),await this.modifiedModel.readInto(0,a);let o=await this.messageHandler.sendRequest({type:0,original:s,modified:a},[s.buffer,a.buffer]);this.decorators=o}return n.toString()===this.originalModel.uri.toString()?this.decorators.original:this.decorators.modified})}static{this.Builder=class{constructor(n){this.messageHandler=n;let t,r;t=new Promise(s=>r=s),this.original={promise:t,resolve:r},t=new Promise(s=>r=s),this.modified={promise:t,resolve:r}}setModel(n,t){return n==="original"?this.original.resolve(t):this.modified.resolve(t),this}async build(){let[n,t]=await Promise.all([this.original.promise,this.modified.promise]);return this.built===void 0&&(this.built=new e(n,t,this.messageHandler)),this.built}}}};var Nd=[],aa=class extends Br{constructor(t){super();this.initDiffWorker=t;this.docs=new Map;this.diffsBuilder=new Map;this.onChangeEmitter=new nn.EventEmitter;this.onDidChangeActiveDocument=this.onChangeEmitter.event;this._register(nn.window.tabGroups.onDidChangeTabs(this.onChangedTabs,this)),this._register(nn.window.tabGroups.onDidChangeTabGroups(this.onChangedTabs,this)),this.onChangedTabs()}get activeDocument(){return this._activeDocument}get activeMessaging(){return this._activeDocument&&this.docs.get(this._activeDocument)||Nd}getMessaging(t){return this.docs.get(t)||Nd}add(t,r){let s=this.docs.get(t);return s?s.add(r):(s=new Set([r]),this.docs.set(t,s)),this.onChangedTabs(),{dispose:()=>{s.delete(r),s.size===0&&this.docs.delete(t)}}}getDiff(t){let{token:r}=Fn(t.query);if(r===void 0)return{builder:void 0,dispose:()=>{}};let s=this.initDiffWorker();this.diffsBuilder.has(r)||this.diffsBuilder.set(r,{refCount:0,value:new oa.Builder(s)});let a=this.diffsBuilder.get(r);return a.refCount++,{builder:a.value,dispose:()=>{a.refCount--,a.refCount===0&&this.diffsBuilder.delete(r)}}}onChangedTabs(){let t=nn.window.tabGroups.activeTabGroup.activeTab?.input,r=t instanceof nn.TabInputCustom?t.uri:void 0,s;if(r){for(let a of this.docs.keys())if(a.uri.toString()===r.toString()){s=a;break}}s!==this._activeDocument&&(this._activeDocument=s,nn.commands.executeCommand("setContext","hexEditor:isActive",!!s),this.onChangeEmitter.fire(s))}};var Md=ar(require("vscode"));function kd(e,n){let t;return()=>{if(!t){let{msgHandler:r,dispose:s}=jy(e);t=r,n({dispose:s})}return t}}function jy(e){let n,t=Md.Uri.joinPath(e,"dist","diffWorker.js").toString();try{n=new Worker(t)}catch{let{Worker:s}=require("worker_threads"),a=new s(new URL(t)),o=a.addListener;a.addEventListener=o,n=a}let r=new ti(async()=>{},(s,a)=>n.postMessage(s,a));return n.addEventListener("message",s=>s.data?r.handleMessage(s.data):r.handleMessage(s)),{msgHandler:r,dispose:()=>n.terminate()}}var ki=ar(require("vscode"));var Hy=/^0x[a-f0-9]+$/i,Uy=/^[0-9]+$/i,Ld=async(e,n)=>{e.sendEvent({type:7});let t,r=n.activeDocument?.selectionState;r!==void 0&&r.selected>0&&r.focused!==void 0&&(t=`0x${r.focused.toString(16)}`);let s=await a(ki.l10n.t("Enter offset to select from"),t);if(s!==void 0){let o=await a(ki.l10n.t("Enter offset to select until"));o!==void 0&&e.sendEvent({type:11,startingOffset:s,endingOffset:o})}async function a(o,i){let c=[];try{return await new Promise((d,u)=>{let p=ki.window.createInputBox();p.title=o,p.value=i||"",p.prompt=o,p.ignoreFocusOut=!0,p.placeholder=o,c.push(p.onDidAccept(()=>{let v=p.value;p.enabled=!1,p.busy=!0;let m=l(v);m!==void 0&&d(m),p.enabled=!0,p.busy=!1}),p.onDidChangeValue(v=>{let m=l(v);m===void 0?p.validationMessage="Offset must be provided as a decimal (12345) or hex (0x12345) address":(p.validationMessage="",e.sendEvent({type:8,offset:m}))}),p.onDidHide(()=>{e.sendEvent({type:13}),d(void 0)}),p),p.show()})}finally{c.forEach(d=>d.dispose())}function l(d){let u;return d?Hy.test(d)?u=parseInt(d.slice(2),16):Uy.test(d)&&(u=parseInt(d,10)):u=void 0,u}}};var Cn=ar(require("vscode"));var Li=class extends Br{constructor(t){super();this.docChangeListener=this._register(new Pn);this.item=this._register(Cn.window.createStatusBarItem(Cn.StatusBarAlignment.Right,99)),this.item.tooltip=Cn.l10n.t("Switch Edit Mode"),this.item.command="hexEditor.switchEditMode";let r=s=>{s?(this.docChangeListener.value=s.onDidChangeEditMode(a=>this.update(a)),this.update(s.editMode),this.show()):this.hide()};this._register(t.onDidChangeActiveDocument(r)),r(t.activeDocument)}update(t){if(t===0)this.item.text=Cn.l10n.t("Insert");else if(t===2)this.item.text=Cn.l10n.t("Replace");else{this.item.hide();return}this.item.show()}show(){this.item.show()}hide(){this.item.hide()}};var oi=ar(require("vscode"));var Fy=new Intl.NumberFormat,ji=class extends Br{constructor(t){super();this.docChangeListener=this._register(new Pn);this.item=this._register(oi.window.createStatusBarItem(oi.StatusBarAlignment.Right,100));let r=s=>{s?(this.docChangeListener.value=s.onDidChangeSelectionState(a=>this.update(a)),this.update(s.selectionState),this.show()):this.hide()};this._register(t.onDidChangeActiveDocument(r)),r(t.activeDocument)}update({focused:t}){let r=t!==void 0?Fy.format(t):void 0;if(r)this.item.text=oi.l10n.t("{0}/0x{1}",r,t.toString(16).toUpperCase()),this.item.show();else{this.item.hide();return}}show(){this.item.show()}hide(){this.item.hide()}};var Dn=ar(require("vscode"));var jd=new Intl.NumberFormat,Hi=class extends Br{constructor(t){super();this.docChangeListener=this._register(new Pn);this.item=this._register(Dn.window.createStatusBarItem(Dn.StatusBarAlignment.Right,101));let r=s=>{s?(this._register(s.onDidChangeHoverState(()=>this.update(s))),this._register(s.onDidChangeSelectionState(()=>this.update(s))),this.update(s),this.show()):this.hide()};this._register(t.onDidChangeActiveDocument(r)),r(t.activeDocument)}update({hoverState:t,selectionState:r}){let{selected:s}=r,a=t!==void 0?jd.format(t):void 0,o=s>1?jd.format(s):void 0;a&&o?this.item.text=Dn.l10n.t("{0}/0x{1} ({2}/0x{3} selected)",a,t.toString(16).toUpperCase(),o,s.toString(16).toUpperCase()):a?this.item.text=Dn.l10n.t("{0}/0x{1}",a,t.toString(16).toUpperCase()):o?this.item.text=Dn.l10n.t("{0}/0x{1} selected",o,s.toString(16).toUpperCase()):this.item.text="",this.item.show()}show(){this.item.show()}hide(){this.item.hide()}};function By(e){let n=e.packageJSON;return{extId:`${n.publisher}.${n.name}`,version:n.version,aiKey:n.aiKey}}function qy(){let e=cr.window.tabGroups.activeTabGroup.activeTab?.input;e.uri&&cr.commands.executeCommand("vscode.openWith",e.uri,"hexEditor.hexedit")}async function Gy(e){let n=kd(e.extensionUri,m=>e.subscriptions.push(m)),t=new aa(n),r=new Ni(e.extensionUri,t),s=By(e.extension);e.subscriptions.push(t,r,cr.window.registerWebviewViewProvider(Ni.viewType,r));let a=new Hd.default(s.extId,s.version,s.aiKey);e.subscriptions.push(a);let o=cr.commands.registerCommand("hexEditor.openFile",qy),i=cr.commands.registerCommand("hexEditor.goToOffset",()=>{let m=t.activeMessaging[Symbol.iterator]().next();m.value&&Td(m.value)}),c=cr.commands.registerCommand("hexEditor.selectBetweenOffsets",()=>{let m=t.activeMessaging[Symbol.iterator]().next();m.value&&Ld(m.value,t)}),l=cr.commands.registerCommand("hexEditor.copyAs",()=>{let m=t.activeMessaging[Symbol.iterator]().next();m.value&&_d(m.value)}),d=cr.commands.registerCommand("hexEditor.switchEditMode",()=>{t.activeDocument&&(t.activeDocument.editMode=t.activeDocument.editMode===0?2:0)}),u=cr.commands.registerCommand("hexEditor.copyOffsetAsHex",()=>{if(t.activeDocument){let m=t.activeDocument.selectionState.focused;m!==void 0&&cr.env.clipboard.writeText(m.toString(16).toUpperCase())}}),p=cr.commands.registerCommand("hexEditor.copyOffsetAsDec",()=>{if(t.activeDocument){let m=t.activeDocument.selectionState.focused;m!==void 0&&cr.env.clipboard.writeText(m.toString())}}),v=cr.commands.registerCommand("hexEditor.compareSelected",async(...m)=>{if(m.length!==2&&!(m[1]instanceof Array))return;let[g,E]=m[1];g instanceof cr.Uri&&E instanceof cr.Uri&&fd(g,E)});e.subscriptions.push(new Li(t)),e.subscriptions.push(new ji(t)),e.subscriptions.push(new Hi(t)),e.subscriptions.push(i),e.subscriptions.push(c),e.subscriptions.push(l),e.subscriptions.push(d),e.subscriptions.push(o),e.subscriptions.push(a),e.subscriptions.push(p,u),e.subscriptions.push(v),e.subscriptions.push(cr.workspace.registerFileSystemProvider("hexdiff",new $o,{isCaseSensitive:typeof process<"u"&&process.platform!=="win32"&&process.platform!=="darwin"})),e.subscriptions.push(ia.register(e,a,r,t))}function Vy(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

@microsoft/applicationinsights-shims/dist/umd/applicationinsights-shims.js:
  (*!
   * Microsoft Application Insights JavaScript SDK - Shim functions, 2.0.1
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)

@microsoft/applicationinsights-core-js/dist/applicationinsights-core-js.js:
  (*!
   * Application Insights JavaScript SDK - Core, 2.8.4
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*!
   * Microsoft Dynamic Proto Utility, 1.1.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)

@microsoft/dynamicproto-js/lib/dist/node/dynamicproto-js.js:
  (*!
   * Microsoft Dynamic Proto Utility, 1.1.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)

@microsoft/1ds-core-js/dist/ms.core.js:
  (*!
   * 1DS JS SDK Core, 3.2.3
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)

@microsoft/1ds-post-js/dist/ms.post.js:
  (*!
   * 1DS JS SDK POST plugin, 3.2.3
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
*/
